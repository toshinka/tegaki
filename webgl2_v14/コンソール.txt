config.js:507 âœ… config.js v8.14.2 Phase 1æ”¹ä¿®ç‰ˆ loaded
config.js:508    ğŸ”§ PerfectFreehandè¨­å®šãƒªãƒ‹ã‚¢åŒ–
config.js:509    âœ“ thinning: 0 (ç·šã®å¤ªã‚Šè£œæ­£ç„¡åŠ¹)
config.js:510    âœ“ smoothing: 0 (è£œé–“æœ€å°åŒ–)
config.js:511    âœ“ streamline: 0 (é…å»¶è£œæ­£ãªã—)
coordinate-system.js:438 âœ… coordinate-system.js v8.14.0 (WebGL2 Phase 1) loaded
coordinate-system.js:439    ğŸ”§ PixiJS v8 applyInverse() å¯¾å¿œ
data-models.js:276 âœ… data-models.js (backgroundColorè¿½åŠ ç‰ˆ) loaded
batch-api.js:382 âœ… batch-api.js (Phase 6: Historyçµ±åˆç‰ˆ) loaded
popup-manager.js:357 âœ… popup-manager.js (quick-accessé™¤å¤–å¯¾å¿œç‰ˆ) loaded
state-manager.js:669 âœ… state-manager.js (Phase 8å®Œå…¨å®Ÿè£…ç‰ˆ) loaded
settings-manager.js:231 âœ… settings-manager.js Phase 2 loaded
settings-manager.js:232    ğŸ”§ exportResolution è¨­å®šé …ç›®è¿½åŠ 
layer-transform.js:1011 âœ… layer-transform.js Phase 6 loaded
layer-transform.js:1012    ğŸ”§ flipLayer(): confirmTransform()å‰Šé™¤ - åè»¢æ™‚ã®ç”»åƒæ¶ˆå¤±ã‚’è§£æ±º
checker-utils.js:163 âœ… system/checker-utils.js çµ±ä¸€å®Ÿè£…ç‰ˆ loaded
layer-system.js:1370 âœ… layer-system.js Phase 8å®Œæˆç‰ˆ loaded
layer-system.js:1371    âœ… getLayerById() ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
layer-system.js:1372    âœ… LayerModel.id ç¢ºå®Ÿå–å¾—ä¿è¨¼
layer-system.js:1373    âœ… history.js ã¨ã®çµ±åˆå¯¾å¿œå®Œäº†
drawing-clipboard.js:827 âœ… drawing-clipboard.js Phase 1 loaded
drawing-clipboard.js:828    ğŸ”§ cutActiveLayer(): æç”»ã®ã¿å‰Šé™¤ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ä¿æŒï¼‰
drawing-clipboard.js:829    ğŸ¨ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—: ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚³ãƒ”ãƒ¼ã€åˆ‡ã‚Šå–ã‚Š
history.js:343 âœ… history.js Phase 4 mask snapshotå¯¾å¿œå®Œå…¨ç‰ˆ loaded
history.js:344    âœ… pushEraseMask() å®Ÿè£…
history.js:345    âœ… beginAction/endAction/addPoint å®Ÿè£…
webgl2-drawing-layer.js:238 âœ… webgl2-drawing-layer.js Phase 1 loaded
gl-stroke-processor.js:343 [GLStrokeProcessor] âœ… Singleton instance created
gl-msdf-pipeline.js:635 [GLMSDFPipeline] âœ… Phase 1.6å®Œå…¨ä¿®æ­£ç‰ˆ loaded
gl-msdf-pipeline.js:636    âœ… boundsãƒ­ãƒ¼ã‚«ãƒ«åº§æ¨™ [0, width/height] â†’ NDCå¤‰æ›
gl-msdf-pipeline.js:637    âœ… uBoundsMin/uBoundsSizeå‰Šé™¤ï¼ˆä¸è¦ï¼‰
gl-texture-bridge.js:201 âœ… gl-texture-bridge.js Phase 5å®Œå…¨ç‰ˆ (PixiJS v8å¯¾å¿œ) loaded
gl-texture-bridge.js:202    âœ… WebGLTexture â†’ PIXI.Spriteå¤‰æ›å®Ÿè£…å®Œäº†
gl-texture-bridge.js:203    âœ… PixiJS v8: Texture.from()ç›´æ¥ä½¿ç”¨ï¼ˆå®šæ•°å•é¡Œè§£æ±ºï¼‰
gl-texture-bridge.js:204    âœ… WebGPUäº’æ›API (createSpriteFromGPUTexture) å¯¾å¿œ
gl-mask-layer.js:473 âœ… gl-mask-layer.js Phase 6å®Œå…¨ç‰ˆ loaded
gl-mask-layer.js:474    âœ… Circle mask renderingå®Ÿè£…
gl-mask-layer.js:475    âœ… Additive blendå¯¾å¿œ
gl-mask-layer.js:476    âœ… Compose Passçµ±åˆæº–å‚™å®Œäº†
pointer-handler.js:252 âœ… pointer-handler.js Phase 1 loaded
pointer-handler.js:253    ğŸ”§ pressureæ­£è¦åŒ–ä¿®æ­£ï¼ˆãƒã‚¦ã‚¹=0, ãƒšãƒ³=e.pressureï¼‰
pointer-handler.js:254    ğŸ”§ EventEmitteré¢¨APIå®Ÿè£…ï¼ˆ.on / .offï¼‰
pressure-handler.js:144 âœ… pressure-handler.js Phase 1 loaded
pressure-handler.js:145    ğŸ”§ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æœªç¢ºå®šæ™‚ã«rawå€¤è¿”å´ï¼ˆ0.5å›ºå®šå‰Šé™¤ï¼‰
stroke-recorder.js:334 âœ… stroke-recorder.js Phase 0 loaded
stroke-recorder.js:335    âœ“ è‡ªå‹•åˆæœŸåŒ–å®Œäº†ï¼ˆinitialize()ä¸è¦ï¼‰
stroke-recorder.js:336    âœ“ Localåº§æ¨™è¨˜éŒ²å°‚ç”¨ï¼ˆåº§æ¨™å¤‰æ›ãªã—ï¼‰
stroke-recorder.js:337    âœ“ PerfectFreehandäº’æ›å½¢å¼å¯¾å¿œ
stroke-renderer.js:199 âœ… stroke-renderer.js (WebGL2ç§»è¡Œç‰ˆ) loaded
stroke-renderer.js:200    ğŸ”§ WebGPU â†’ WebGL2 å‚ç…§å¤‰æ›´å®Œäº†
thumbnail-system.js:507 âœ… thumbnail-system.js (v1.1: çµ±ä¸€ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”å¯¾å¿œ) loaded
brush-settings.js:222 âœ… brush-settings.js (Phase 3-D Clean) loaded
blend-modes.js:24 âœ… BlendMode definitions loaded
vector-operations.js:144 âœ… vector-operations.js Phase 1å®Œå…¨ç‰ˆ loaded
vector-operations.js:145    âœ“ window.VectorOperations.generateStrokePolygon(points, size)
vector-operations.js:146    âœ“ config.js perfectFreehandè¨­å®šè‡ªå‹•é©ç”¨
vector-operations.js:147    ğŸ”¥ PerfectFreehandçµ±åˆåŸºç›¤å®Œæˆ
brush-core.js:695 âœ… brush-core.js Phase 2ãƒ•ãƒªãƒƒã‚«ãƒ¼è§£æ¶ˆç‰ˆ loaded
brush-core.js:696    âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°: 100msé–“éš”ï¼ˆ10fpsç›¸å½“ï¼‰
brush-core.js:697    âœ… æœ€å°ãƒã‚¤ãƒ³ãƒˆæ•°: 3ãƒã‚¤ãƒ³ãƒˆ
fill-tool.js:269 âœ… fill-tool.js (WebGPUç«¶åˆä¿®æ­£ç‰ˆ) loaded
fill-tool.js:270    âŒ ç‹¬è‡ªWebGPUåˆæœŸåŒ–ã‚’å‰Šé™¤
fill-tool.js:271    âœ… æ—¢å­˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å‚ç…§ã®ã¿
quick-export-ui.js:292 âœ… quick-export-ui.js (ç„¡åŠ¹åŒ–ç‰ˆ) loaded
export-manager.js:531 âœ… export-manager.js v8.33.0 loaded
export-manager.js:532    ğŸ”§ PNGâ†’APNGç¶­æŒ / WEBPâ†’WebMè‡ªå‹•åˆ‡æ›¿å¯¾å¿œ
png-exporter.js:255 âœ… png-exporter.js v8.29.0 loaded
png-exporter.js:256    ğŸ”§ generatePreview()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
png-exporter.js:257    ğŸ”§ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
png-exporter.js:258    ğŸ”§ Blobç”Ÿæˆã®ç¢ºå®Ÿæ€§å‘ä¸Š
webp-exporter.js:249 âœ… webp-exporter.js v8.33.0 loaded (é™æ­¢ç”»WEBPå°‚ç”¨)
webp-exporter.js:250    âš ï¸ è¤‡æ•°ãƒ•ãƒ¬ãƒ¼ãƒ æ™‚ã¯WebMæ¨å¥¨ï¼ˆã‚¢ãƒ«ãƒ•ã‚¡å€¤ç¶­æŒãƒ»è»½é‡ï¼‰
psd-exporter.js:170 âœ… psd-exporter.js v8.18.0 loaded (Phase 5: ãƒœã‚¿ãƒ³é…ç½®ç”¨)
psd-exporter.js:171    âš ï¸ å®Ÿè£…ã¯å°†æ¥ãƒ•ã‚§ãƒ¼ã‚ºã§è¿½åŠ äºˆå®š
psd-exporter.js:172    âœ“ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§é–‹ç™ºä¸­ã‚’é€šçŸ¥
apng-exporter.js:281 âœ… apng-exporter.js v8.31.0 loaded
mp4-exporter.js:30 âœ… mp4-exporter.js (Phase 8å®Œæˆç‰ˆ) loaded
dom-builder.js:527 âœ… dom-builder.js v8.19.0 loaded
dom-builder.js:528    ğŸ”§ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³: PNG/WEBP/PSDï¼ˆGIF/PDFå‰Šé™¤ï¼‰
dom-builder.js:529    âœ“ Systemæƒ…å ±è¡¨ç¤ºï¼ˆWebGPU/GPUæ¤œå‡ºï¼‰
slider-utils.js:265 âœ… slider-utils.js v8.14.0 loaded
slider-utils.js:266    ğŸ”§ PointerEventé…ä¿¡å•é¡Œä¿®æ­£å®Œäº†
keyboard-handler.js:486 âœ… keyboard-handler.js Phase 6å®Œæˆç‰ˆ loaded
keyboard-handler.js:487    âœ… BS/DEL: æç”»å‰Šé™¤ãŒæ­£å¸¸å‹•ä½œ
keyboard-handler.js:488    âœ… Undo/Redo: childrenå‚ç…§ä¿æŒã§å®Œå…¨å¾©å…ƒ
keyboard-handler.js:489    ğŸ”§ åè»¢å‡¦ç†: ç”»åƒæ¶ˆå¤±å•é¡Œè§£æ±º
layer-panel-renderer.js:663 âœ… layer-panel-renderer.js (Phase 5+6å¯¾å¿œç‰ˆ) loaded
layer-panel-renderer.js:664    âœ“ layer:panel-update-requested ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
layer-panel-renderer.js:665    âœ“ LayerSystemã‹ã‚‰ã®ç›´æ¥å‘¼ã³å‡ºã—å®Œå…¨æ’é™¤
status-display-renderer.js:317 âœ… ui/status-display-renderer.js å®Œå…¨æ”¹ä¿®ç‰ˆ loaded
timeline-thumbnail-utils.js:258 âœ… ui/timeline-thumbnail-utils.js (Phase 3å®Œå…¨ç‰ˆ) loaded
timeline-thumbnail-utils.js:259    âœ“ Phase 1: layer:transform-updated è³¼èª­è¿½åŠ 
timeline-thumbnail-utils.js:260    âœ“ Phase 3: throttleæœ€é©åŒ–ï¼ˆ100msï¼‰
timeline-thumbnail-utils.js:261    âœ“ Phase 3: immediate ãƒ•ãƒ©ã‚°å¯¾å¿œ
timeline-thumbnail-utils.js:262    âœ“ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢ã«å³åº§è¿½å¾“
timeline-ui.js:981 âœ… timeline-ui.js (Phase 4å®Œäº†: ãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢é€£æºç‰ˆ) loaded
album-popup.js:473 âœ… album-popup.js (FRAMEæ”¹ä¿®ç‰ˆ) loaded
settings-popup.js:649 âœ… settings-popup.js Phase 1 loaded
settings-popup.js:650    ğŸ”§ ui:open-settings ãƒªã‚¹ãƒŠãƒ¼è¿½åŠ ï¼ˆCtrl+, å¯¾å¿œï¼‰
quick-access-popup.js:740 âœ… quick-access-popup.js v8.13.17 loaded
export-popup.js:557 âœ… export-popup.js v8.29.0 loaded
export-popup.js:558    ğŸ”§ PNGâ†’APNGç¶­æŒ / WEBPâ†’WebMè‡ªå‹•åˆ‡æ›¿UIå¯¾å¿œ
ui-panels.js:420 âœ… ui-panels.js v8.13.15 loaded
ui-panels.js:421    ğŸ¨ ã‚µã‚¤ãƒ‰ãƒãƒ¼è»½é‡ãƒ‡ã‚¶ã‚¤ãƒ³: ã‚ªãƒ¬ãƒ³ã‚¸æ ã®ã¿
ui-panels.js:422    ğŸ¯ SVGè‰²çµ±ä¸€: å¸¸ã«var(--futaba-maroon)
core-runtime.js:578 âœ… core-runtime.js (Phase 5 - UIä¾‹å¤–ä¿®æ­£ç‰ˆ) loaded
core-engine.js:767 âœ… core-engine.js Phase 4-Cå®Œå…¨ç‰ˆ loaded
core-engine.js:768    ğŸ”§ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çµ±åˆå®Œäº†
core-engine.js:769    ğŸ”§ Master Loop: pointer â†’ preview â†’ render
index.html:111 ğŸš€ WebGL2 MSDFç‰ˆ èµ·å‹•ä¸­...
popup-manager.js:16 âœ… PopupManager initialized
popup-manager.js:42 ğŸ“‹ Popup "settings" registered (priority: 1)
popup-manager.js:42 ğŸ“‹ Popup "quickAccess" registered (priority: 2)
popup-manager.js:42 ğŸ“‹ Popup "album" registered (priority: 3)
popup-manager.js:42 ğŸ“‹ Popup "resize" registered (priority: 4)
popup-manager.js:102 ğŸ”§ Initializing all popups...
popup-manager.js:87 âœ… Popup "settings" initialized successfully
popup-manager.js:87 âœ… Popup "quickAccess" initialized successfully
popup-manager.js:87 âœ… Popup "album" initialized successfully
popup-manager.js:87 âœ… Popup "resize" initialized successfully
popup-manager.js:118 ğŸ“Š Popup initialization: 4 ready, 0 deferred
webgl2-drawing-layer.js:87 [WebGL2DrawingLayer] âœ… Initialized {maxTextureSize: 16384, extensions: Array(3)}
core-initializer.js:187 [WebGL2] Drawing Layer initialized
gl-stroke-processor.js:48 [GLStrokeProcessor] âœ… Initialized (Phase 1.6)
core-initializer.js:196 [WebGL2] GLStrokeProcessor initialized
gl-msdf-pipeline.js:63 [GLMSDFPipeline] âœ… Initialized (Phase 1.6)
core-initializer.js:201 [WebGL2] GLMSDFPipeline initialized
gl-texture-bridge.js:51 [GLTextureBridge] âœ… Initialized (PixiJS v8)
core-initializer.js:209 [WebGL2] GLTextureBridge initialized
gl-mask-layer.js:82 [GLMaskLayer] âœ… Initialized {width: 400, height: 400}
core-initializer.js:221 [WebGL2] GLMaskLayer initialized
stroke-renderer.js:76 [StrokeRenderer] âœ… Initialized (WebGL2 mode)
core-initializer.js:236 [WebGL2] StrokeRenderer initialized
core-initializer.js:238 [WebGL2] âœ… Phase 6 initialization complete
core-initializer.js:345 [App] Re-initializing BrushCore with WebGL2 components
core-initializer.js:356 [App] âœ… BrushCore re-initialized with WebGL2 (Phase 6)
index.html:113 âœ… WebGL2åˆæœŸåŒ–å®Œäº†
popup-manager.js:42 ğŸ“‹ Popup "export" registered (priority: 5)
popup-manager.js:87 âœ… Popup "export" initialized successfully
/**
 * åº§æ¨™ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
 * ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œã—ã¦ãã ã•ã„
 */

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã‚’ç™»éŒ²
window.CoordinateDebug = {
  
  /**
   * æ¬¡å›ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»ã‚’ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
   */
  enableStrokeDebug() {
    console.log('ğŸ” æ¬¡å›ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»ã‚’ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™');
    
    // BrushCoreã®_finalizeMSDFStrokeã‚’ãƒ•ãƒƒã‚¯
    const originalFinalize = window.BrushCore._finalizeMSDFStroke.bind(window.BrushCore);
    
    window.BrushCore._finalizeMSDFStroke = async function(points, activeLayer) {
      console.group('ğŸ“Š ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯åº§æ¨™ãƒ‡ãƒãƒƒã‚°');
      
      // 1. ãƒã‚¤ãƒ³ãƒˆæƒ…å ±
      console.log('1ï¸âƒ£ ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæ•°:', points.length);
      console.log('   æœ€åˆã®ãƒã‚¤ãƒ³ãƒˆ:', points[0]);
      console.log('   æœ€å¾Œã®ãƒã‚¤ãƒ³ãƒˆ:', points[points.length - 1]);
      
      // 2. Boundsè¨ˆç®—
      const bounds = window.GLStrokeProcessor.calculateBounds(points);
      console.log('2ï¸âƒ£ è¨ˆç®—ã•ã‚ŒãŸBounds:');
      console.log('   minX:', bounds.minX, 'minY:', bounds.minY);
      console.log('   maxX:', bounds.maxX, 'maxY:', bounds.maxY);
      console.log('   width:', bounds.width, 'height:', bounds.height);
      
      // 3. VertexBufferç”Ÿæˆ
      const vertexResult = window.GLStrokeProcessor.createPolygonVertexBuffer(
        points,
        this.currentSettings.size
      );
      
      if (vertexResult) {
        console.log('3ï¸âƒ£ VertexBufferæƒ…å ±:');
        console.log('   é ‚ç‚¹æ•°:', vertexResult.vertexCount);
        console.log('   ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º:', vertexResult.buffer.length);
        
        // æœ€åˆã®é ‚ç‚¹ã‚’è¡¨ç¤º
        const first = {
          x: vertexResult.buffer[0],
          y: vertexResult.buffer[1]
        };
        console.log('   æœ€åˆã®é ‚ç‚¹åº§æ¨™:', first);
        
        // boundsã¨ã®æ¯”è¼ƒ
        console.log('   æœ€åˆã®é ‚ç‚¹ vs bounds.minX:', first.x - bounds.minX);
        console.log('   æœ€åˆã®é ‚ç‚¹ vs bounds.minY:', first.y - bounds.minY);
      }
      
      // 4. Spriteé…ç½®ä½ç½®
      const result = await originalFinalize.call(this, points, activeLayer);
      
      // Spriteæƒ…å ±ã‚’å–å¾—
      const container = this._getLayerContainer(activeLayer);
      if (container && container.children.length > 0) {
        const lastChild = container.children[container.children.length - 1];
        if (lastChild instanceof PIXI.Sprite) {
          console.log('4ï¸âƒ£ Spriteé…ç½®æƒ…å ±:');
          console.log('   sprite.x:', lastChild.x);
          console.log('   sprite.y:', lastChild.y);
          console.log('   sprite.width:', lastChild.width);
          console.log('   sprite.height:', lastChild.height);
          
          console.log('5ï¸âƒ£ åº§æ¨™ã®ã‚ºãƒ¬æ¤œè¨¼:');
          console.log('   sprite.x == bounds.minX:', lastChild.x === bounds.minX);
          console.log('   sprite.y == bounds.minY:', lastChild.y === bounds.minY);
          console.log('   å·®åˆ†X:', lastChild.x - bounds.minX);
          console.log('   å·®åˆ†Y:', lastChild.y - bounds.minY);
        }
      }
      
      console.groupEnd();
      
      // å…ƒã®é–¢æ•°ã«æˆ»ã™
      window.BrushCore._finalizeMSDFStroke = originalFinalize;
      
      return result;
    };
  },
  
  /**
   * åº§æ¨™å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å…¨ä½“ã‚’ãƒ†ã‚¹ãƒˆ
   */
  testCoordinateTransform(screenX, screenY) {
    console.group('ğŸ”„ åº§æ¨™å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ');
    console.log('å…¥åŠ›: Screenåº§æ¨™', { screenX, screenY });
    
    const coord = window.CoordinateSystem;
    const camera = window.cameraSystem;
    
    // Step 1: Screen â†’ Canvas
    const canvas = coord.screenClientToCanvas(screenX, screenY);
    console.log('1ï¸âƒ£ Canvasåº§æ¨™:', canvas);
    
    // Step 2: Canvas â†’ World
    const world = coord.canvasToWorld(canvas.x, canvas.y);
    console.log('2ï¸âƒ£ Worldåº§æ¨™:', world);
    
    // Step 3: World â†’ Local (Active Layer)
    const activeLayer = window.layerManager.getActiveLayer();
    if (activeLayer) {
      const container = window.BrushCore._getLayerContainer(activeLayer);
      if (container) {
        const local = coord.worldToLocal(world.x, world.y, container);
        console.log('3ï¸âƒ£ Localåº§æ¨™:', local);
        
        console.log('ğŸ“Š å¤‰æ›ã‚µãƒãƒªãƒ¼:');
        console.log('   Screen â†’ Canvas:', 
          `(${screenX}, ${screenY}) â†’ (${canvas.x.toFixed(2)}, ${canvas.y.toFixed(2)})`);
        console.log('   Canvas â†’ World:', 
          `(${canvas.x.toFixed(2)}, ${canvas.y.toFixed(2)}) â†’ (${world.x.toFixed(2)}, ${world.y.toFixed(2)})`);
        console.log('   World â†’ Local:', 
          `(${world.x.toFixed(2)}, ${world.y.toFixed(2)}) â†’ (${local.x.toFixed(2)}, ${local.y.toFixed(2)})`);
      }
    }
    
    console.groupEnd();
  },
  
  /**
   * ç¾åœ¨ã®åº§æ¨™ç³»è¨­å®šã‚’è¡¨ç¤º
   */
  showCoordinateState() {
    console.group('âš™ï¸ åº§æ¨™ç³»ç¾åœ¨çŠ¶æ…‹');
    
    const camera = window.cameraSystem;
    const worldContainer = window.worldContainer;
    
    console.log('CameraçŠ¶æ…‹:');
    console.log('   zoom:', camera.zoom);
    console.log('   panX:', camera.panX);
    console.log('   panY:', camera.panY);
    
    if (worldContainer) {
      console.log('WorldContainer Transform:');
      console.log('   position:', worldContainer.position.x, worldContainer.position.y);
      console.log('   scale:', worldContainer.scale.x, worldContainer.scale.y);
      console.log('   rotation:', worldContainer.rotation);
    }
    
    const activeLayer = window.layerManager?.getActiveLayer();
    if (activeLayer) {
      const container = window.BrushCore._getLayerContainer(activeLayer);
      console.log('Active Layer Container:');
      console.log('   position:', container?.position?.x, container?.position?.y);
      console.log('   scale:', container?.scale?.x, container?.scale?.y);
      console.log('   rotation:', container?.rotation);
    }
    
    console.groupEnd();
  },
  
  /**
   * GLMSDFPipelineã®Uniformå€¤ã‚’ç¢ºèª
   */
  inspectMSDFUniforms() {
    console.group('ğŸ” MSDF Uniformæ¤œè¨¼');
    console.log('æ¬¡å›ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»æ™‚ã«Uniformå€¤ã‚’ãƒ­ã‚°å‡ºåŠ›ã—ã¾ã™');
    
    const pipeline = window.GLMSDFPipeline;
    const originalDrawStroke = pipeline._drawStroke.bind(pipeline);
    
    pipeline._drawStroke = function(program, vbo, vertexCount, bounds, resolution) {
      console.log('ğŸ“ _drawStroke() å‘¼ã³å‡ºã—:');
      console.log('   vertexCount:', vertexCount);
      console.log('   bounds:', bounds);
      console.log('   resolution:', resolution);
      
      // Uniformå€¤ã‚’å–å¾—ã—ã¦è¡¨ç¤º
      const gl = this.gl;
      gl.useProgram(program);
      
      const uResolution = gl.getUniformLocation(program, 'uResolution');
      const uBoundsMin = gl.getUniformLocation(program, 'uBoundsMin');
      const uBoundsSize = gl.getUniformLocation(program, 'uBoundsSize');
      
      console.log('   Uniform Locations:');
      console.log('     uResolution:', uResolution);
      console.log('     uBoundsMin:', uBoundsMin);
      console.log('     uBoundsSize:', uBoundsSize);
      
      // å…ƒã®é–¢æ•°å®Ÿè¡Œ
      const result = originalDrawStroke.call(this, program, vbo, vertexCount, bounds, resolution);
      
      // å…ƒã«æˆ»ã™
      pipeline._drawStroke = originalDrawStroke;
      console.groupEnd();
      
      return result;
    };
    
    console.groupEnd();
  }
};

console.log('âœ… åº§æ¨™ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«èª­ã¿è¾¼ã¿å®Œäº†');
console.log('ğŸ“– ä½¿ã„æ–¹:');
console.log('  1. CoordinateDebug.enableStrokeDebug()  - æ¬¡å›ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»ã‚’ãƒ‡ãƒãƒƒã‚°');
console.log('  2. CoordinateDebug.testCoordinateTransform(x, y)  - åº§æ¨™å¤‰æ›ãƒ†ã‚¹ãƒˆ');
console.log('  3. CoordinateDebug.showCoordinateState()  - ç¾åœ¨ã®åº§æ¨™ç³»çŠ¶æ…‹è¡¨ç¤º');
console.log('  4. CoordinateDebug.inspectMSDFUniforms()  - MSDF Uniformæ¤œè¨¼');
VM172:202 âœ… åº§æ¨™ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«èª­ã¿è¾¼ã¿å®Œäº†
VM172:203 ğŸ“– ä½¿ã„æ–¹:
VM172:204   1. CoordinateDebug.enableStrokeDebug()  - æ¬¡å›ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»ã‚’ãƒ‡ãƒãƒƒã‚°
VM172:205   2. CoordinateDebug.testCoordinateTransform(x, y)  - åº§æ¨™å¤‰æ›ãƒ†ã‚¹ãƒˆ
VM172:206   3. CoordinateDebug.showCoordinateState()  - ç¾åœ¨ã®åº§æ¨™ç³»çŠ¶æ…‹è¡¨ç¤º
VM172:207   4. CoordinateDebug.inspectMSDFUniforms()  - MSDF Uniformæ¤œè¨¼
undefined
CoordinateDebug.showCoordinateState()
VM172:130 âš™ï¸ åº§æ¨™ç³»ç¾åœ¨çŠ¶æ…‹
VM172:135 CameraçŠ¶æ…‹:
VM172:136    zoom: undefined
VM172:137    panX: undefined
VM172:138    panY: undefined
VM172:150 Active Layer Container:
VM172:151    position: 0 0
VM172:152    scale: 1 1
VM172:153    rotation: 0
undefined
CoordinateDebug.enableStrokeDebug()
VM172:13 ğŸ” æ¬¡å›ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»ã‚’ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã¾ã™
undefined
VM172:19 ğŸ“Š ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯åº§æ¨™ãƒ‡ãƒãƒƒã‚°
VM172:22 1ï¸âƒ£ ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæ•°: 18
VM172:23    æœ€åˆã®ãƒã‚¤ãƒ³ãƒˆ: {x: 148.5, y: 324, pressure: 0.5, tiltX: 0, tiltY: 0,Â â€¦}
VM172:24    æœ€å¾Œã®ãƒã‚¤ãƒ³ãƒˆ: {x: 193, y: 326.5, pressure: 0.5, tiltX: 0, tiltY: 0,Â â€¦}
VM172:28 2ï¸âƒ£ è¨ˆç®—ã•ã‚ŒãŸBounds:
VM172:29    minX: 128.5 minY: 304
VM172:30    maxX: 213 maxY: 346.5
VM172:31    width: 84.5 height: 42.5
VM172:40 3ï¸âƒ£ VertexBufferæƒ…å ±:
VM172:41    é ‚ç‚¹æ•°: 183
VM172:42    ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º: 1281
VM172:49    æœ€åˆã®é ‚ç‚¹åº§æ¨™: {x: 10.000499725341797, y: 5}
VM172:52    æœ€åˆã®é ‚ç‚¹ vs bounds.minX: -118.4995002746582
VM172:53    æœ€åˆã®é ‚ç‚¹ vs bounds.minY: -299
VM172:64 4ï¸âƒ£ Spriteé…ç½®æƒ…å ±:
VM172:65    sprite.x: 128.5
VM172:66    sprite.y: 304
VM172:67    sprite.width: 512
VM172:68    sprite.height: 512
VM172:70 5ï¸âƒ£ åº§æ¨™ã®ã‚ºãƒ¬æ¤œè¨¼:
VM172:71    sprite.x == bounds.minX: true
VM172:72    sprite.y == bounds.minY: true
VM172:73    å·®åˆ†X: 0
VM172:74    å·®åˆ†Y: 0
CoordinateDebug.inspectMSDFUniforms()
VM172:163 ğŸ” MSDF Uniformæ¤œè¨¼
VM172:164 æ¬¡å›ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»æ™‚ã«Uniformå€¤ã‚’ãƒ­ã‚°å‡ºåŠ›ã—ã¾ã™
undefined
VM172:170 ğŸ“ _drawStroke() å‘¼ã³å‡ºã—:
VM172:171    vertexCount: 126
VM172:172    bounds: {minX: 121.85763888888889, minY: 272.8576388888889, maxX: 167.64236111111111, maxY: 314.6423611111111, width: 45.78472222222222,Â â€¦}
VM172:173    resolution: {width: 512, height: 512}
VM172:183    Uniform Locations:
VM172:184      uResolution: WebGLUniformLocationÂ {}
VM172:185      uBoundsMin: null
VM172:186      uBoundsSize: null
