config.js:509 âœ… config.js v8.14.3 Phase 1.7 ç­†åœ§å¯¾å¿œç‰ˆ loaded
config.js:510    ğŸ”§ thinning: 0.7 (ç­†åœ§ã«ã‚ˆã‚‹å¤ªã•å¤‰åŒ–æœ‰åŠ¹)
config.js:511    ğŸ”§ smoothing: 0.4 (é©åº¦ãªè£œé–“)
config.js:512    ğŸ”§ streamline: 0.3 (å®‰å®šåŒ–)
coordinate-system.js:322 âœ… coordinate-system.js Phase 1.3 åˆæœŸåŒ–å¤±æ•—è¨ºæ–­å¼·åŒ–ç‰ˆ loaded
coordinate-system.js:323    ğŸ”§ worldContaineré…å»¶å–å¾—å¯¾å¿œ
coordinate-system.js:324    ğŸ”§ åˆæœŸåŒ–å¤±æ•—æ™‚ã®è©³ç´°è¨ºæ–­ãƒ­ã‚°è¿½åŠ 
coordinate-system.js:325    ğŸ”§ dumpState()ãƒ‡ãƒãƒƒã‚°ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
data-models.js:276 âœ… data-models.js (backgroundColorè¿½åŠ ç‰ˆ) loaded
 âœ… batch-api.js (Phase 6: Historyçµ±åˆç‰ˆ) loaded
 âœ… debug-utils.js loaded
    Type: TegakiDebug.help() for available commands
    Quick check: TegakiDebug.fullDiagnostic()
 âœ… popup-manager.js (quick-accessé™¤å¤–å¯¾å¿œç‰ˆ) loaded
 âœ… state-manager.js (Phase 8å®Œå…¨å®Ÿè£…ç‰ˆ) loaded
 âœ… settings-manager.js Phase 2 loaded
    ğŸ”§ exportResolution è¨­å®šé …ç›®è¿½åŠ 
 âœ… layer-transform.js Phase 6 loaded
    ğŸ”§ flipLayer(): confirmTransform()å‰Šé™¤ - åè»¢æ™‚ã®ç”»åƒæ¶ˆå¤±ã‚’è§£æ±º
 âœ… system/checker-utils.js çµ±ä¸€å®Ÿè£…ç‰ˆ loaded
 âœ… layer-system.js Phase 8å®Œæˆç‰ˆ loaded
    âœ… getLayerById() ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
    âœ… LayerModel.id ç¢ºå®Ÿå–å¾—ä¿è¨¼
    âœ… history.js ã¨ã®çµ±åˆå¯¾å¿œå®Œäº†
 âœ… drawing-clipboard.js Phase 1 loaded
    ğŸ”§ cutActiveLayer(): æç”»ã®ã¿å‰Šé™¤ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ä¿æŒï¼‰
    ğŸ¨ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—: ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚³ãƒ”ãƒ¼ã€åˆ‡ã‚Šå–ã‚Š
 âœ… history.js Phase 4 mask snapshotå¯¾å¿œå®Œå…¨ç‰ˆ loaded
    âœ… pushEraseMask() å®Ÿè£…
    âœ… beginAction/endAction/addPoint å®Ÿè£…
 âœ… gl-texture-bridge.js Phase 5å®Œå…¨ç‰ˆ (PixiJS v8å¯¾å¿œ) loaded
    âœ… WebGLTexture â†’ PIXI.Spriteå¤‰æ›å®Ÿè£…å®Œäº†
    âœ… PixiJS v8: Texture.from()ç›´æ¥ä½¿ç”¨ï¼ˆå®šæ•°å•é¡Œè§£æ±ºï¼‰
    âœ… WebGPUäº’æ›API (createSpriteFromGPUTexture) å¯¾å¿œ
 [GLMSDFPipeline] âœ… Phase 1.8 Rollbackä¿®æ­£ç‰ˆ loaded
    âš ï¸ Phase 1.7ã®éå‰°ä¿®æ­£ã‚’å–ã‚Šæ¶ˆã—
    âœ… aPosition: [0, bounds.width/height] â†’ uResolutionã§æ­£è¦åŒ–
 [GLStrokeProcessor] âœ… Singleton instance created
 âœ… webgl2-drawing-layer.js Phase 1 å®Œå…¨ä¿®æ­£ç‰ˆ loaded
    ğŸ“Œ window.WebGLContext (ä¸»è¦)
    ğŸ“Œ window.WebGL2DrawingLayer (äº’æ›)
 âœ… gl-mask-layer.js Phase 6å®Œå…¨ç‰ˆ loaded
    âœ… Circle mask renderingå®Ÿè£…
    âœ… Additive blendå¯¾å¿œ
    âœ… Compose Passçµ±åˆæº–å‚™å®Œäº†
 âœ… pointer-handler.js Phase 1 loaded
    ğŸ”§ pressureæ­£è¦åŒ–ä¿®æ­£ï¼ˆãƒã‚¦ã‚¹=0, ãƒšãƒ³=e.pressureï¼‰
    ğŸ”§ EventEmitteré¢¨APIå®Ÿè£…ï¼ˆ.on / .offï¼‰
 âœ… pressure-handler.js Phase 1 loaded
    ğŸ”§ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æœªç¢ºå®šæ™‚ã«rawå€¤è¿”å´ï¼ˆ0.5å›ºå®šå‰Šé™¤ï¼‰
 âœ… stroke-recorder.js Phase 0 loaded
    âœ“ è‡ªå‹•åˆæœŸåŒ–å®Œäº†ï¼ˆinitialize()ä¸è¦ï¼‰
    âœ“ Localåº§æ¨™è¨˜éŒ²å°‚ç”¨ï¼ˆåº§æ¨™å¤‰æ›ãªã—ï¼‰
    âœ“ PerfectFreehandäº’æ›å½¢å¼å¯¾å¿œ
 âœ… stroke-renderer.js (WebGL2ç§»è¡Œç‰ˆ) loaded
    ğŸ”§ WebGPU â†’ WebGL2 å‚ç…§å¤‰æ›´å®Œäº†
 âœ… thumbnail-system.js (v1.1: çµ±ä¸€ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”å¯¾å¿œ) loaded
 âœ… brush-settings.js (Phase 3-D Clean) loaded
 âœ… BlendMode definitions loaded
 âœ… vector-operations.js Phase 1å®Œå…¨ç‰ˆ loaded
    âœ“ window.VectorOperations.generateStrokePolygon(points, size)
    âœ“ config.js perfectFreehandè¨­å®šè‡ªå‹•é©ç”¨
    ğŸ”¥ PerfectFreehandçµ±åˆåŸºç›¤å®Œæˆ
 âœ… brush-core.js Phase 2.3 åˆæœŸåŒ–çµ±åˆæ”¹å–„ç‰ˆ loaded
    âœ… åˆæœŸåŒ–ã®ä¸€æœ¬åŒ–ï¼ˆé‡è¤‡å‘¼ã³å‡ºã—å¯¾å¿œï¼‰
    âœ… WebGL2ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ›´æ–°ã®åˆ†é›¢
    âœ… Phase 2.2: Spriteã‚¹ã‚±ãƒ¼ãƒ«ä¿®æ­£ç¶™æ‰¿
    âœ… Phase 2.2: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é€æ˜åº¦ä¿®æ­£ç¶™æ‰¿
 âœ… fill-tool.js (WebGPUç«¶åˆä¿®æ­£ç‰ˆ) loaded
    âŒ ç‹¬è‡ªWebGPUåˆæœŸåŒ–ã‚’å‰Šé™¤
    âœ… æ—¢å­˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å‚ç…§ã®ã¿
 âœ… drawing-engine.js v8.14.2 Phase 1.1 åº§æ¨™ã‚ºãƒ¬å®Œå…¨ä¿®æ­£ç‰ˆ loaded
    ğŸ”§ CoordinateSystemåˆæœŸåŒ–è‡ªå‹•ä¿®å¾©æ©Ÿèƒ½è¿½åŠ 
    ğŸ”§ NaN/Infinityæ¤œå‡ºå¼·åŒ–ï¼ˆå…¨ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
    ğŸ”§ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Œå…¨åŒ–
    ğŸ”§ ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰: window.TegakiDebug.drawing.*
 âœ… quick-export-ui.js (ç„¡åŠ¹åŒ–ç‰ˆ) loaded
 âœ… export-manager.js v8.33.0 loaded
    ğŸ”§ PNGâ†’APNGç¶­æŒ / WEBPâ†’WebMè‡ªå‹•åˆ‡æ›¿å¯¾å¿œ
 âœ… png-exporter.js v8.29.0 loaded
    ğŸ”§ generatePreview()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
    ğŸ”§ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
    ğŸ”§ Blobç”Ÿæˆã®ç¢ºå®Ÿæ€§å‘ä¸Š
 âœ… webp-exporter.js v8.33.0 loaded (é™æ­¢ç”»WEBPå°‚ç”¨)
    âš ï¸ è¤‡æ•°ãƒ•ãƒ¬ãƒ¼ãƒ æ™‚ã¯WebMæ¨å¥¨ï¼ˆã‚¢ãƒ«ãƒ•ã‚¡å€¤ç¶­æŒãƒ»è»½é‡ï¼‰
 âœ… psd-exporter.js v8.18.0 loaded (Phase 5: ãƒœã‚¿ãƒ³é…ç½®ç”¨)
    âš ï¸ å®Ÿè£…ã¯å°†æ¥ãƒ•ã‚§ãƒ¼ã‚ºã§è¿½åŠ äºˆå®š
    âœ“ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§é–‹ç™ºä¸­ã‚’é€šçŸ¥
 âœ… apng-exporter.js v8.31.0 loaded
 âœ… mp4-exporter.js (Phase 8å®Œæˆç‰ˆ) loaded
 âœ… dom-builder.js v8.19.0 loaded
    ğŸ”§ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³: PNG/WEBP/PSDï¼ˆGIF/PDFå‰Šé™¤ï¼‰
    âœ“ Systemæƒ…å ±è¡¨ç¤ºï¼ˆWebGPU/GPUæ¤œå‡ºï¼‰
 âœ… slider-utils.js v8.14.0 loaded
    ğŸ”§ PointerEventé…ä¿¡å•é¡Œä¿®æ­£å®Œäº†
 âœ… keyboard-handler.js Phase 6å®Œæˆç‰ˆ loaded
    âœ… BS/DEL: æç”»å‰Šé™¤ãŒæ­£å¸¸å‹•ä½œ
    âœ… Undo/Redo: childrenå‚ç…§ä¿æŒã§å®Œå…¨å¾©å…ƒ
    ğŸ”§ åè»¢å‡¦ç†: ç”»åƒæ¶ˆå¤±å•é¡Œè§£æ±º
 âœ… layer-panel-renderer.js (Phase 5+6å¯¾å¿œç‰ˆ) loaded
    âœ“ layer:panel-update-requested ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
    âœ“ LayerSystemã‹ã‚‰ã®ç›´æ¥å‘¼ã³å‡ºã—å®Œå…¨æ’é™¤
 âœ… ui/status-display-renderer.js å®Œå…¨æ”¹ä¿®ç‰ˆ loaded
 âœ… ui/timeline-thumbnail-utils.js (Phase 3å®Œå…¨ç‰ˆ) loaded
    âœ“ Phase 1: layer:transform-updated è³¼èª­è¿½åŠ 
    âœ“ Phase 3: throttleæœ€é©åŒ–ï¼ˆ100msï¼‰
    âœ“ Phase 3: immediate ãƒ•ãƒ©ã‚°å¯¾å¿œ
    âœ“ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢ã«å³åº§è¿½å¾“
 âœ… timeline-ui.js (Phase 4å®Œäº†: ãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢é€£æºç‰ˆ) loaded
 âœ… album-popup.js (FRAMEæ”¹ä¿®ç‰ˆ) loaded
 âœ… settings-popup.js Phase 1 loaded
    ğŸ”§ ui:open-settings ãƒªã‚¹ãƒŠãƒ¼è¿½åŠ ï¼ˆCtrl+, å¯¾å¿œï¼‰
 âœ… quick-access-popup.js v8.13.17 loaded
 âœ… export-popup.js v8.29.0 loaded
    ğŸ”§ PNGâ†’APNGç¶­æŒ / WEBPâ†’WebMè‡ªå‹•åˆ‡æ›¿UIå¯¾å¿œ
 âœ… ui-panels.js v8.13.15 loaded
    ğŸ¨ ã‚µã‚¤ãƒ‰ãƒãƒ¼è»½é‡ãƒ‡ã‚¶ã‚¤ãƒ³: ã‚ªãƒ¬ãƒ³ã‚¸æ ã®ã¿
    ğŸ¯ SVGè‰²çµ±ä¸€: å¸¸ã«var(--futaba-maroon)
 âœ… core-runtime.js (Phase 5 - UIä¾‹å¤–ä¿®æ­£ç‰ˆ) loaded
 âœ… core-engine.js Phase 5 DrawingEngineåˆæœŸåŒ–çµ±åˆç‰ˆ loaded
    ğŸ”§ DrawingEngine.initialize()å‘¼ã³å‡ºã—è¿½åŠ 
    ğŸ”§ PointerHandlerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆã¨æ¥ç¶š
    ğŸ”§ WebGL2ã‚­ãƒ£ãƒ³ãƒã‚¹å‚ç…§ã®ç¢ºå®Ÿãªå—ã‘æ¸¡ã—
    ğŸ”§ åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼å®Œå…¨çµ±åˆ
    ğŸ”§ Phase 4-C: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çµ±åˆç¶­æŒ
 âœ… core-initializer.js Phase 1.2.2 CoordinateSystemåˆæœŸåŒ–ä¿®æ­£ç‰ˆ loaded
    â­ CoreEngine.initialize()å®Œäº†å¾Œã«CoordinateSystemåˆæœŸåŒ–
    â­ worldContainer.position/scaleæœªå®šç¾©ã‚¨ãƒ©ãƒ¼ã®å›é¿
    â­ å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã®å…¨ãƒ¡ã‚½ãƒƒãƒ‰ãƒ»æ©Ÿèƒ½ã‚’å®Œå…¨ç¶™æ‰¿
 ğŸš€ WebGL2 MSDFç‰ˆ èµ·å‹•ä¸­...
 [CoreEngine] ========================================
 [CoreEngine] Starting initialization sequence...
 [CoreEngine] ========================================
 [CoreEngine] [1/8] Initializing CameraSystem...
 [CoreEngine] âœ… CameraSystem initialized
 [CoreEngine] [2/8] Initializing LayerSystem...
 [CoreEngine] âœ… LayerSystem initialized
 [CoreEngine] [3/8] Initializing ClipboardSystem...
core-engine.js:745 [CoreEngine] âœ… ClipboardSystem initialized
core-engine.js:749 [CoreEngine] [4/8] Initializing ThumbnailSystem...
core-engine.js:752 [CoreEngine] âœ… ThumbnailSystem initialized
core-engine.js:758 [CoreEngine] [5/8] Setting up History...
core-engine.js:761 [CoreEngine] âœ… History linked to LayerSystem
core-engine.js:771 [CoreEngine] [6/8] Checking StrokeRecorder...
core-engine.js:782 [CoreEngine] âœ… StrokeRecorder ready
core-engine.js:785 [CoreEngine] [7/8] Checking StrokeRenderer...
core-engine.js:797 [CoreEngine] âœ… StrokeRenderer ready
core-engine.js:800 [CoreEngine] [8/8] Initializing BrushCore...
brush-core.js:85 [BrushCore] initialize() called, current state: {initialized: false, strokeRecorder: false, layerManager: false}
brush-core.js:110 [BrushCore] Basic dependencies set: {strokeRecorder: true, layerManager: true, eventBus: true}
brush-core.js:136 [BrushCore] Updating WebGL2 components...
brush-core.js:151 [BrushCore] WebGL2 components updated: {glStrokeProcessor: true, glMSDFPipeline: true, textureBridge: true, glMaskLayer: true, msdfAvailable: true,Â â€¦}
brush-core.js:125 [BrushCore] âœ… Initialization complete: {initialized: true, msdfAvailable: true, maskAvailable: false}
core-engine.js:814 [CoreEngine] âœ… BrushCore initialized
core-engine.js:819 [CoreEngine] ========================================
core-engine.js:820 [CoreEngine] [Phase 5] Initializing DrawingEngine...
core-engine.js:821 [CoreEngine] ========================================
core-engine.js:656 [CoreEngine] Initializing DrawingEngine...
core-engine.js:667 [CoreEngine] âœ… WebGL2 canvas found: {width: 1920, height: 1080, id: 'webgl2-canvas'}
core-engine.js:679 [CoreEngine]âš ï¸ CoordinateSystem not initialized yet
_initializeDrawingEngine @ core-engine.js:679
initialize @ core-engine.js:824
initialize @ core-initializer.js:357
await in initialize
initialize @ core-initializer.js:608
ï¼ˆåŒ¿åï¼‰ @ index.html:115
core-engine.js:698 [CoreEngine] âœ… PointerHandler created
drawing-engine.js:137 [DrawingEngine] CoordinateSystem not initialized, attempting auto-fix...
_ensureCoordinateSystemReady @ drawing-engine.js:137
initialize @ drawing-engine.js:107
_initializeDrawingEngine @ core-engine.js:701
initialize @ core-engine.js:824
initialize @ core-initializer.js:357
await in initialize
initialize @ core-initializer.js:608
ï¼ˆåŒ¿åï¼‰ @ index.html:115
coordinate-system.js:43 [CoordinateSystem] initialize() called {canvas: true, worldContainer: true, canvasSize: '1920x1080'}
coordinate-system.js:64 [CoordinateSystem] âœ… Initialized successfully
drawing-engine.js:161 [DrawingEngine] âœ… CoordinateSystem auto-initialized successfully
drawing-engine.js:117 [DrawingEngine] âœ… Initialized v8.14.2 Phase 1.1 {coordSystemReady: true, glCanvasSize: {â€¦}, brushCoreReady: true}
core-engine.js:716 [CoreEngine] âœ… DrawingEngine initialized successfully
core-engine.js:721 [CoreEngine] âœ… BrushSettings linked to DrawingEngine
core-engine.js:825 [CoreEngine] âœ… DrawingEngine initialization complete
core-engine.js:835 [CoreEngine] Initializing AnimationSystem...
core-engine.js:852 [CoreEngine] Initializing BatchAPI...
core-engine.js:858 [CoreEngine] âœ… BatchAPI initialized
core-engine.js:862 [CoreEngine] Initializing UnifiedKeyHandler...
core-engine.js:874 [CoreEngine] âœ… UnifiedKeyHandler initialized
core-engine.js:914 [CoreEngine] ========================================
core-engine.js:915 [CoreEngine] âœ… Initialization complete!
core-engine.js:916 [CoreEngine] ========================================
core-initializer.js:367 [CoreInit] Initializing CoordinateSystem...
coordinate-system.js:43 [CoordinateSystem] initialize() called {canvas: true, worldContainer: true, canvasSize: '1920x1080'}
coordinate-system.js:64 [CoordinateSystem] âœ… Initialized successfully
core-initializer.js:217 [CoreInit] âœ… CoordinateSystem initialized
core-initializer.js:374 [CoreInit] CoordinateSystem state: {initialized: true, canvas: '1920x1080', worldContainer: {â€¦}}
popup-manager.js:16 âœ… PopupManager initialized
popup-manager.js:42 ğŸ“‹ Popup "settings" registered (priority: 1)
popup-manager.js:42 ğŸ“‹ Popup "quickAccess" registered (priority: 2)
popup-manager.js:42 ğŸ“‹ Popup "album" registered (priority: 3)
popup-manager.js:42 ğŸ“‹ Popup "resize" registered (priority: 4)
popup-manager.js:102 ğŸ”§ Initializing all popups...
popup-manager.js:87 âœ… Popup "settings" initialized successfully
popup-manager.js:87 âœ… Popup "quickAccess" initialized successfully
popup-manager.js:87 âœ… Popup "album" initialized successfully
popup-manager.js:87 âœ… Popup "resize" initialized successfully
popup-manager.js:118 ğŸ“Š Popup initialization: 4 ready, 0 deferred
webgl2-drawing-layer.js:94 [WebGL2DrawingLayer] âœ… Initialized {canvasSize: '1920x1080', maxTextureSize: 16384, extensions: Array(3)}
core-initializer.js:244 [WebGL2] Drawing Layer initialized
gl-stroke-processor.js:48 [GLStrokeProcessor] âœ… Initialized (Phase 1.6)
core-initializer.js:253 [WebGL2] GLStrokeProcessor initialized
gl-msdf-pipeline.js:66 [GLMSDFPipeline] âœ… Initialized (Phase 1.8)
core-initializer.js:258 [WebGL2] GLMSDFPipeline initialized
gl-texture-bridge.js:51 [GLTextureBridge] âœ… Initialized (PixiJS v8)
core-initializer.js:266 [WebGL2] GLTextureBridge initialized
gl-mask-layer.js:82 [GLMaskLayer] âœ… Initialized {width: 400, height: 400}
core-initializer.js:278 [WebGL2] GLMaskLayer initialized
stroke-renderer.js:76 [StrokeRenderer] âœ… Initialized (WebGL2 mode)
core-initializer.js:293 [WebGL2] StrokeRenderer initialized
core-initializer.js:295 [WebGL2] âœ… Phase 6 initialization complete
core-initializer.js:419 [App] Re-initializing BrushCore with WebGL2 components
core-initializer.js:455 [App] BrushCore already initialized, components updated
core-initializer.js:458 [App] âœ… BrushCore re-initialized with WebGL2 (Phase 6.1) {msdfAvailable: true, maskAvailable: true, initialized: true}
index.html:116 âœ… WebGL2åˆæœŸåŒ–å®Œäº†
core-engine.js:840 [CoreEngine] Initializing ExportManager...
popup-manager.js:42 ğŸ“‹ Popup "export" registered (priority: 5)
core-engine.js:846 [CoreEngine] Initializing LayerTransform...
popup-manager.js:87 âœ… Popup "export" initialized successfully
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
TegakiDebug.help()
// ãƒ˜ãƒ«ãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK
debug-utils.js:534 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
debug-utils.js:535 ğŸ› ï¸  Tegaki Debug Utils - Available Commands
debug-utils.js:536 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

debug-utils.js:537 TegakiDebug.checkInitialization()  - Check all system initialization
debug-utils.js:538 TegakiDebug.checkDependencies()     - Check required dependencies
debug-utils.js:539 TegakiDebug.testDrawingFlow()       - Test complete drawing flow
debug-utils.js:540 TegakiDebug.testCoordinateTransform(x, y) - Test coordinate conversion
debug-utils.js:541 TegakiDebug.checkEventListeners()   - Check event listener setup
debug-utils.js:542 TegakiDebug.checkWebGL2()           - Check WebGL2 components
debug-utils.js:543 TegakiDebug.fullDiagnostic()        - Run all checks
debug-utils.js:544 TegakiDebug.simulateDrawing()       - Simulate a drawing stroke
debug-utils.js:545 TegakiDebug.help()                  - Show this help

debug-utils.js:546 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
undefined
TegakiDebug.checkInitialization()
debug-utils.js:47 ğŸ” Tegaki Initialization Check
debug-utils.js:123 âœ… CoordinateSystem: OK {exists: true, initialized: true, canvas: true, worldContainer: true}
debug-utils.js:123 âœ… CameraSystem: OK {exists: true, worldContainer: true, canvasContainer: true}
debug-utils.js:123 âœ… LayerManager: OK {exists: true, layers: 2, activeLayer: true}
debug-utils.js:118 âŒ DrawingEngine: isDrawing
checkInitialization @ debug-utils.js:118
ï¼ˆåŒ¿åï¼‰ @ VM333:1
debug-utils.js:119    Details: {exists: true, initialized: true, coordSystem: true, pointerHandler: true, brushCore: true,Â â€¦}
debug-utils.js:118 âŒ PointerHandler: activePointers
checkInitialization @ debug-utils.js:118
ï¼ˆåŒ¿åï¼‰ @ VM333:1
debug-utils.js:119    Details: {exists: true, attached: true, activePointers: 0}
debug-utils.js:118 âŒ BrushCore: isDrawing
checkInitialization @ debug-utils.js:118
ï¼ˆåŒ¿åï¼‰ @ VM333:1
debug-utils.js:119    Details: {exists: true, initialized: true, strokeRecorder: true, layerManager: true, msdfAvailable: true,Â â€¦}
debug-utils.js:118 âŒ StrokeRecorder: isRecording, points
checkInitialization @ debug-utils.js:118
ï¼ˆåŒ¿åï¼‰ @ VM333:1
debug-utils.js:119    Details: {exists: true, initialized: true, isRecording: false, points: 0}
debug-utils.js:123 âœ… WebGL2: OK {canvas: true, DrawingLayer: true, StrokeProcessor: true, MSDFPipeline: true, TextureBridge: true,Â â€¦}
debug-utils.js:118 âŒ EventBus: listenerCount
checkInitialization @ debug-utils.js:118
ï¼ˆåŒ¿åï¼‰ @ VM333:1
debug-utils.js:119    Details: {exists: true, listenerCount: 0}
debug-utils.js:132 âš ï¸ Some systems have issues: (5)Â [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]
checkInitialization @ debug-utils.js:132
ï¼ˆåŒ¿åï¼‰ @ VM333:1
{success: false, issues: Array(5)}
// è©³ç´°è¨ºæ–­å®Ÿè¡Œ
TegakiDebug.fullDiagnostic()
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
debug-utils.js:396 ğŸ” Tegaki WebGL2 Full Diagnostic
debug-utils.js:397 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

debug-utils.js:142 ğŸ”— Dependency Check
debug-utils.js:164 âœ… Available (14/14):
debug-utils.js:165    - PIXI
debug-utils.js:165    - TEGAKI_CONFIG
debug-utils.js:165    - CoordinateSystem
debug-utils.js:165    - TegakiEventBus
debug-utils.js:165    - TegakiCameraSystem
debug-utils.js:165    - TegakiLayerSystem
debug-utils.js:165    - DrawingEngine
debug-utils.js:165    - PointerHandler
debug-utils.js:165    - BrushCore
debug-utils.js:165    - StrokeRecorder
debug-utils.js:165    - WebGL2DrawingLayer
debug-utils.js:165    - GLStrokeProcessor
debug-utils.js:165    - GLMSDFPipeline
debug-utils.js:165    - GLTextureBridge
debug-utils.js:402 

debug-utils.js:47 ğŸ” Tegaki Initialization Check
debug-utils.js:123 âœ… CoordinateSystem: OK {exists: true, initialized: true, canvas: true, worldContainer: true}
debug-utils.js:123 âœ… CameraSystem: OK {exists: true, worldContainer: true, canvasContainer: true}
debug-utils.js:123 âœ… LayerManager: OK {exists: true, layers: 2, activeLayer: true}
debug-utils.js:118 âŒ DrawingEngine: isDrawing
checkInitialization @ debug-utils.js:118
fullDiagnostic @ debug-utils.js:404
ï¼ˆåŒ¿åï¼‰ @ VM337:2
debug-utils.js:119    Details: {exists: true, initialized: true, coordSystem: true, pointerHandler: true, brushCore: true,Â â€¦}
debug-utils.js:118 âŒ PointerHandler: activePointers
checkInitialization @ debug-utils.js:118
fullDiagnostic @ debug-utils.js:404
ï¼ˆåŒ¿åï¼‰ @ VM337:2
debug-utils.js:119    Details: {exists: true, attached: true, activePointers: 0}
debug-utils.js:118 âŒ BrushCore: isDrawing
checkInitialization @ debug-utils.js:118
fullDiagnostic @ debug-utils.js:404
ï¼ˆåŒ¿åï¼‰ @ VM337:2
debug-utils.js:119    Details: {exists: true, initialized: true, strokeRecorder: true, layerManager: true, msdfAvailable: true,Â â€¦}
debug-utils.js:118 âŒ StrokeRecorder: isRecording, points
checkInitialization @ debug-utils.js:118
fullDiagnostic @ debug-utils.js:404
ï¼ˆåŒ¿åï¼‰ @ VM337:2
debug-utils.js:119    Details: {exists: true, initialized: true, isRecording: false, points: 0}
debug-utils.js:123 âœ… WebGL2: OK {canvas: true, DrawingLayer: true, StrokeProcessor: true, MSDFPipeline: true, TextureBridge: true,Â â€¦}
debug-utils.js:118 âŒ EventBus: listenerCount
checkInitialization @ debug-utils.js:118
fullDiagnostic @ debug-utils.js:404
ï¼ˆåŒ¿åï¼‰ @ VM337:2
debug-utils.js:119    Details: {exists: true, listenerCount: 0}
debug-utils.js:132 âš ï¸ Some systems have issues: (5)Â [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]
checkInitialization @ debug-utils.js:132
fullDiagnostic @ debug-utils.js:404
ï¼ˆåŒ¿åï¼‰ @ VM337:2
debug-utils.js:405 

debug-utils.js:333 ğŸ–¼ï¸ WebGL2 State Check
debug-utils.js:342 âœ… Canvas found: {id: 'webgl2-canvas', width: 1920, height: 1080, clientWidth: 1920, clientHeight: 1080}
debug-utils.js:361 âœ… WebGL2 context available
debug-utils.js:362 GL info: {version: 'WebGL 2.0 (OpenGL ES 3.0 Chromium)', vendor: 'WebKit', renderer: 'WebKit WebGL'}
debug-utils.js:382 âœ… WebGL2DrawingLayer loaded
debug-utils.js:382 âœ… GLStrokeProcessor loaded
debug-utils.js:382 âœ… GLMSDFPipeline loaded
debug-utils.js:382 âœ… GLTextureBridge loaded
debug-utils.js:382 âœ… GLMaskLayer loaded
debug-utils.js:408 

debug-utils.js:290 ğŸ‘‚ Event Listeners Check
debug-utils.js:299 âœ… WebGL2 canvas found: <canvas id=â€‹"webgl2-canvas" width=â€‹"1920" height=â€‹"1080" style=â€‹"position:â€‹absolute;â€‹top:â€‹0;â€‹left:â€‹0;â€‹pointer-events:â€‹auto;â€‹touch-action:â€‹none;â€‹z-index:â€‹10;â€‹display:â€‹block;â€‹">â€‹
debug-utils.js:300 Canvas ID: webgl2-canvas
debug-utils.js:301 Canvas size: {width: 1920, height: 1080}
debug-utils.js:305 âœ… PointerHandler attached
debug-utils.js:306 Active pointers: 0
debug-utils.js:315 âœ… EventBus available
debug-utils.js:317 Registered events (0): []
debug-utils.js:322 
ğŸ’¡ To inspect event listeners in Chrome DevTools:
debug-utils.js:323 1. Select the canvas element in Elements tab
debug-utils.js:324 2. Run: getEventListeners($0)
debug-utils.js:411 

debug-utils.js:181 ğŸ¨ Drawing Flow Test
debug-utils.js:196 âœ… Step 1: DrawingEngine OK
debug-utils.js:205 âœ… Step 2: PointerHandler OK
drawing-engine.js:587 [DrawingEngine] Coordinate Transform Test
Container.ts:1734 Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine.testCoordinateTransform (drawing-engine.js:590:25)
    at Object.testDrawingFlow (debug-utils.js:208:49)
    at Object.fullDiagnostic (debug-utils.js:413:40)
    at <anonymous>:2:13
updateTransform @ Container.ts:1734
canvasToWorld @ coordinate-system.js:162
_transformPointerToLocal @ drawing-engine.js:398
testCoordinateTransform @ drawing-engine.js:590
testDrawingFlow @ debug-utils.js:208
fullDiagnostic @ debug-utils.js:413
ï¼ˆåŒ¿åï¼‰ @ VM337:2
TegakiDebug.testDrawingFlow()
debug-utils.js:181 ğŸ¨ Drawing Flow Test
debug-utils.js:196 âœ… Step 1: DrawingEngine OK
debug-utils.js:205 âœ… Step 2: PointerHandler OK
drawing-engine.js:587 [DrawingEngine] Coordinate Transform Test
Container.ts:1734 Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine.testCoordinateTransform (drawing-engine.js:590:25)
    at Object.testDrawingFlow (debug-utils.js:208:49)
    at <anonymous>:1:13
updateTransform @ Container.ts:1734
canvasToWorld @ coordinate-system.js:162
_transformPointerToLocal @ drawing-engine.js:398
testCoordinateTransform @ drawing-engine.js:590
testDrawingFlow @ debug-utils.js:208
ï¼ˆåŒ¿åï¼‰ @ VM341:1
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
// ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
window.drawingEngine.setDebugMode(true)

// å†åº¦æç”»ãƒ†ã‚¹ãƒˆ
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è©³ç´°ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹
drawing-engine.js:580 [DrawingEngine] Debug mode: true
undefined
drawing-engine.js:367 [_transformPointerToLocal] Input: {clientX: 448.5, clientY: 433.5, pressure: 0.5}
drawing-engine.js:382 [_transformPointerToLocal] Canvas: {canvasX: 448.5, canvasY: 433.5}
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
// ãƒã‚¦ã‚¹ä½ç½®ã§ãƒ†ã‚¹ãƒˆï¼ˆä¾‹: x=200, y=200ï¼‰
TegakiDebug.testCoordinateTransform(200, 200)
debug-utils.js:245 ğŸ“ Coordinate Transform Test
debug-utils.js:246 Input: {clientX: 200, clientY: 200}
coordinate-system.js:287 [CoordinateSystem] Full Transform Pipeline
coordinate-system.js:294 Step 1 - Canvas: {canvasX: 200, canvasY: 200}
Container.ts:1734 Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at CoordinateSystem.transformScreenToLocal (coordinate-system.js:296:26)
    at Object.testCoordinateTransform (debug-utils.js:267:52)
    at <anonymous>:2:13
updateTransform @ Container.ts:1734
canvasToWorld @ coordinate-system.js:162
transformScreenToLocal @ coordinate-system.js:296
testCoordinateTransform @ debug-utils.js:267
ï¼ˆåŒ¿åï¼‰ @ VM358:2
drawing-engine.js:367 [_transformPointerToLocal] Input: {clientX: 306.5, clientY: 452, pressure: 0.5}
drawing-engine.js:382 [_transformPointerToLocal] Canvas: {canvasX: 306.5, canvasY: 452}
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèª
document.querySelector('#webgl2-canvas')
// null ã®å ´åˆã€DOMãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„

// åˆ©ç”¨å¯èƒ½ãªcanvasã‚’ç¢ºèª
Array.from(document.querySelectorAll('canvas')).map(c => c.id || c.className)
(2)Â ['webgl2-canvas', '']
// PointerHandlerç¢ºèª
console.log('PointerHandler:', window.drawingEngine?.pointerHandler)

// attachedç¢ºèª
console.log('Attached:', window.drawingEngine?.pointerHandler?.attached)

// ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç¢ºèª
TegakiDebug.checkEventListeners()
VM369:2 PointerHandler: PointerHandlerÂ {element: canvas#webgl2-canvas, options: {â€¦}, activePointers: Map(0), eventHandlers: Map(3), boundListeners: {â€¦},Â â€¦}
VM369:5 Attached: true
debug-utils.js:290 ğŸ‘‚ Event Listeners Check
debug-utils.js:299 âœ… WebGL2 canvas found: <canvas id=â€‹"webgl2-canvas" width=â€‹"1920" height=â€‹"1080" style=â€‹"position:â€‹absolute;â€‹top:â€‹0;â€‹left:â€‹0;â€‹pointer-events:â€‹auto;â€‹touch-action:â€‹none;â€‹z-index:â€‹10;â€‹display:â€‹block;â€‹">â€‹
debug-utils.js:300 Canvas ID: webgl2-canvas
debug-utils.js:301 Canvas size: {width: 1920, height: 1080}
debug-utils.js:305 âœ… PointerHandler attached
debug-utils.js:306 Active pointers: 0
debug-utils.js:315 âœ… EventBus available
debug-utils.js:317 Registered events (0): []
debug-utils.js:322 
ğŸ’¡ To inspect event listeners in Chrome DevTools:
debug-utils.js:323 1. Select the canvas element in Elements tab
debug-utils.js:324 2. Run: getEventListeners($0)
undefined
drawing-engine.js:367 [_transformPointerToLocal] Input: {clientX: 429.5, clientY: 433, pressure: 0.5}
drawing-engine.js:382 [_transformPointerToLocal] Canvas: {canvasX: 429.5, canvasY: 433}
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
// æ‰‹å‹•ã§PointerHandlerãƒ†ã‚¹ãƒˆ
const glCanvas = document.querySelector('#webgl2-canvas')
const testHandler = new window.PointerHandler(glCanvas)
testHandler.on('pointerdown', (e) => console.log('Test pointerdown:', e))
// ã“ã®å¾Œã€ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ­ã‚°ãŒå‡ºã‚‹ã‹ç¢ºèª
undefined
drawing-engine.js:367 [_transformPointerToLocal] Input: {clientX: 423.5, clientY: 441, pressure: 0.5}
drawing-engine.js:382 [_transformPointerToLocal] Canvas: {canvasX: 423.5, canvasY: 441}
pointer-handler.js:81 [PointerHandler] Event handler error (pointerdown): TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:162:22)
    at DrawingEngine._transformPointerToLocal (drawing-engine.js:398:34)
    at DrawingEngine._handlePointerDown (drawing-engine.js:239:25)
    at drawing-engine.js:184:12
    at pointer-handler.js:79:21
    at Set.forEach (<anonymous>)
    at PointerHandler._emit (pointer-handler.js:77:47)
    at HTMLCanvasElement.onPointerDown (pointer-handler.js:146:22)
ï¼ˆåŒ¿åï¼‰ @ pointer-handler.js:81
_emit @ pointer-handler.js:77
onPointerDown @ pointer-handler.js:146
VM376:4 Test pointerdown: {pointerId: 1, pointerType: 'pen', clientX: 423.5, clientY: 441, pressure: 0.5,Â â€¦}
// ä¾å­˜é–¢ä¿‚ç¢ºèª
console.log({
  strokeRecorder: !!window.strokeRecorder,
  layerManager: !!window.layerManager,
  eventBus: !!window.TegakiEventBus
})

// å†åˆæœŸåŒ–è©¦è¡Œ
await window.BrushCore.initialize()
VM383:2 {strokeRecorder: true, layerManager: true, eventBus: true}
brush-core.js:85 [BrushCore] initialize() called, current state: {initialized: true, strokeRecorder: true, layerManager: true}
brush-core.js:93 [BrushCore] Already initialized, updating WebGL2 components only
brush-core.js:136 [BrushCore] Updating WebGL2 components...
brush-core.js:151 [BrushCore] WebGL2 components updated: {glStrokeProcessor: true, glMSDFPipeline: true, textureBridge: true, glMaskLayer: true, msdfAvailable: true,Â â€¦}
undefined
