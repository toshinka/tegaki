// ffmpeg.wasm 0.12.15 - bundled via esbuild

(()=>{var M=Object.defineProperty;var T=a=>{throw TypeError(a)};var N=(a,t,n)=>t in a?M(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var v=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var c=(a,t,n)=>N(a,typeof t!="symbol"?t+"":t,n),S=(a,t,n)=>t.has(a)||T("Cannot "+n);var o=(a,t,n)=>(S(a,t,"read from private field"),n?n.call(a):t.get(a)),f=(a,t,n)=>t.has(a)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,n),F=(a,t,n,u)=>(S(a,t,"write to private field"),u?u.call(a,n):t.set(a,n),n);var P=v((m,L)=>{(function(a,t){typeof m=="object"&&typeof L=="object"?L.exports=t():typeof define=="function"&&define.amd?define([],t):typeof m=="object"?m.FFmpegWASM=t():a.FFmpegWASM=t()})(self,(()=>(()=>{"use strict";var p,l,d,R,g,O,E;var a={m:{},d:(i,e)=>{for(var s in e)a.o(e,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})},u:i=>i+".ffmpeg.js"};a.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),a.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},(()=>{var i;a.g.importScripts&&(i=a.g.location+"");var e=a.g.document;if(!i&&e&&(e.currentScript&&(i=e.currentScript.src),!i)){var s=e.getElementsByTagName("script");if(s.length)for(var r=s.length-1;r>-1&&!i;)i=s[r--].src}if(!i)throw new Error("Automatic publicPath is not supported in this browser");i=i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=i})(),a.b=document.baseURI||self.location.href;var t,n={};a.r(n),a.d(n,{FFFSType:()=>y,FFmpeg:()=>_}),(function(i){i.LOAD="LOAD",i.EXEC="EXEC",i.FFPROBE="FFPROBE",i.WRITE_FILE="WRITE_FILE",i.READ_FILE="READ_FILE",i.DELETE_FILE="DELETE_FILE",i.RENAME="RENAME",i.CREATE_DIR="CREATE_DIR",i.LIST_DIR="LIST_DIR",i.DELETE_DIR="DELETE_DIR",i.ERROR="ERROR",i.DOWNLOAD="DOWNLOAD",i.PROGRESS="PROGRESS",i.LOG="LOG",i.MOUNT="MOUNT",i.UNMOUNT="UNMOUNT"})(t||(t={}));let u=(()=>{let i=0;return()=>i++})(),b=(new Error("unknown message type"),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first")),w=new Error("called FFmpeg.terminate()");new Error("failed to import ffmpeg-core.js");class _{constructor(){f(this,p,null);f(this,l,{});f(this,d,{});f(this,R,[]);f(this,g,[]);c(this,"loaded",!1);f(this,O,()=>{o(this,p)&&(o(this,p).onmessage=({data:{id:e,type:s,data:r}})=>{switch(s){case t.LOAD:this.loaded=!0,o(this,l)[e](r);break;case t.MOUNT:case t.UNMOUNT:case t.EXEC:case t.FFPROBE:case t.WRITE_FILE:case t.READ_FILE:case t.DELETE_FILE:case t.RENAME:case t.CREATE_DIR:case t.LIST_DIR:case t.DELETE_DIR:o(this,l)[e](r);break;case t.LOG:o(this,R).forEach((h=>h(r)));break;case t.PROGRESS:o(this,g).forEach((h=>h(r)));break;case t.ERROR:o(this,d)[e](r)}delete o(this,l)[e],delete o(this,d)[e]})});f(this,E,({type:e,data:s},r=[],h)=>o(this,p)?new Promise(((A,I)=>{let D=u();o(this,p)&&o(this,p).postMessage({id:D,type:e,data:s},r),o(this,l)[D]=A,o(this,d)[D]=I,h?.addEventListener("abort",(()=>{I(new DOMException(`Message # ${D} was aborted`,"AbortError"))}),{once:!0})})):Promise.reject(b));c(this,"load",({classWorkerURL:e,...s}={},{signal:r}={})=>(o(this,p)||(F(this,p,e?new Worker(new URL(e,"file:///Users/focus/Projects/ffmpeg.wasm/packages/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(new URL(a.p+a.u(814),a.b),{type:void 0})),o(this,O).call(this)),o(this,E).call(this,{type:t.LOAD,data:s},void 0,r)));c(this,"exec",(e,s=-1,{signal:r}={})=>o(this,E).call(this,{type:t.EXEC,data:{args:e,timeout:s}},void 0,r));c(this,"ffprobe",(e,s=-1,{signal:r}={})=>o(this,E).call(this,{type:t.FFPROBE,data:{args:e,timeout:s}},void 0,r));c(this,"terminate",()=>{let e=Object.keys(o(this,d));for(let s of e)o(this,d)[s](w),delete o(this,d)[s],delete o(this,l)[s];o(this,p)&&(o(this,p).terminate(),F(this,p,null),this.loaded=!1)});c(this,"writeFile",(e,s,{signal:r}={})=>{let h=[];return s instanceof Uint8Array&&h.push(s.buffer),o(this,E).call(this,{type:t.WRITE_FILE,data:{path:e,data:s}},h,r)});c(this,"mount",(e,s,r)=>o(this,E).call(this,{type:t.MOUNT,data:{fsType:e,options:s,mountPoint:r}},[]));c(this,"unmount",e=>o(this,E).call(this,{type:t.UNMOUNT,data:{mountPoint:e}},[]));c(this,"readFile",(e,s="binary",{signal:r}={})=>o(this,E).call(this,{type:t.READ_FILE,data:{path:e,encoding:s}},void 0,r));c(this,"deleteFile",(e,{signal:s}={})=>o(this,E).call(this,{type:t.DELETE_FILE,data:{path:e}},void 0,s));c(this,"rename",(e,s,{signal:r}={})=>o(this,E).call(this,{type:t.RENAME,data:{oldPath:e,newPath:s}},void 0,r));c(this,"createDir",(e,{signal:s}={})=>o(this,E).call(this,{type:t.CREATE_DIR,data:{path:e}},void 0,s));c(this,"listDir",(e,{signal:s}={})=>o(this,E).call(this,{type:t.LIST_DIR,data:{path:e}},void 0,s));c(this,"deleteDir",(e,{signal:s}={})=>o(this,E).call(this,{type:t.DELETE_DIR,data:{path:e}},void 0,s))}on(e,s){e==="log"?o(this,R).push(s):e==="progress"&&o(this,g).push(s)}off(e,s){e==="log"?F(this,R,o(this,R).filter((r=>r!==s))):e==="progress"&&F(this,g,o(this,g).filter((r=>r!==s)))}}p=new WeakMap,l=new WeakMap,d=new WeakMap,R=new WeakMap,g=new WeakMap,O=new WeakMap,E=new WeakMap;var y;return(function(i){i.MEMFS="MEMFS",i.NODEFS="NODEFS",i.NODERAWFS="NODERAWFS",i.IDBFS="IDBFS",i.WORKERFS="WORKERFS",i.PROXYFS="PROXYFS"})(y||(y={})),n})()))});P();})();
