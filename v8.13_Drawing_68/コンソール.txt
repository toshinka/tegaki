config.js:523 âœ… config.js (Phase 2å®Œå…¨ç‰ˆ) loaded
config.js:524    - BRUSH_DEFAULTSè¿½åŠ å®Œäº†
event-bus.js:143 âœ… system/event-bus.js Phase 2: å„ªå…ˆåº¦æ©Ÿèƒ½è¿½åŠ ç‰ˆ loaded
coordinate-system.js:519 âœ… coordinate-system.js (Phase 2.5å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
coordinate-system.js:520    - Phase 2.5: worldToLocal() ã® pivot/position/rotation/scale è¨ˆç®—é †åºã‚’å®Œå…¨ä¿®æ­£
coordinate-system.js:521    - Phase 2.5: localToWorld() ã‚‚åŒæ§˜ã«ä¿®æ­£ï¼ˆå®Œå…¨ãªé€†å¤‰æ›ã‚’ä¿è¨¼ï¼‰
coordinate-system.js:522    - ã‚µãƒ ãƒã‚¤ãƒ«å•é¡Œã®æ ¹æœ¬åŸå› ã‚’è§£æ±º
coordinate-system.js:601 âœ… Debug commands: TegakiDebug.coord.*
data-models.js:276 âœ… data-models.js (ãƒã‚¹ã‚¯ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆä¸å¯è¦–ç‰ˆ) loaded
batch-api.js:382 âœ… batch-api.js (Phase 6: Historyçµ±åˆç‰ˆ) loaded
popup-manager.js:357 âœ… popup-manager.js (quick-accessé™¤å¤–å¯¾å¿œç‰ˆ) loaded
camera-system.js:704 âœ… camera-system.js (v2.0: ãƒªã‚µã‚¤ã‚ºä¿®æ­£ç‰ˆ) loaded
layer-transform.js:910 âœ… layer-transform.js (Phase 1-5 GSAPçµ±åˆå®Œå…¨ç‰ˆ) loaded
layer-transform.js:911    âœ“ Phase 1-4: ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ãƒ»NaNå¯¾ç­–ãƒ»UIæ•´å‚™ãƒ»åè»¢æ©Ÿèƒ½
layer-transform.js:912    âœ“ Phase 5: GSAPçµ±åˆï¼ˆkillTweensOf + delayedCallï¼‰
layer-transform.js:913    âœ“ GPUåæ˜ ä¿è¨¼: Transformé©ç”¨ã‹ã‚‰1ãƒ•ãƒ¬ãƒ¼ãƒ å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
layer-transform.js:914    âœ“ ã‚µãƒ ãƒã‚¤ãƒ«åŒæœŸ: layer:transform-updated + thumbnail:layer-updated
layer-system.js:1247 âœ… layer-system.js (v2.0.1: åè»¢æ©Ÿèƒ½ä¿®å¾©ç‰ˆ) loaded
drawing-clipboard.js:603 âœ… drawing-clipboard.js Phase4æ”¹ä¿®ç‰ˆ+ç¢ºå®šã‚¤ãƒ™ãƒ³ãƒˆ loaded
drawing-clipboard.js:604    - âœ… CTRL+V behavior: overwrite active layer
drawing-clipboard.js:605    - âœ… Commit events: paste:commit, operation:commit
drawing-clipboard.js:606    - âœ… Thumbnail auto-update on paste
history.js:217 âœ… history.js (Phase 3: Redo nullå‚ç…§ä¿®æ­£ç‰ˆ) loaded
animation-system.js:218 [AnimationSystem] GSAP detected - using synchronized thumbnail generation
animation-system.js:1484 âœ… animation-system.js (GSAPçµ±åˆå®Œå…¨ç‰ˆ) loaded
animation-system.js:1485    âœ“ Phase 1: ãƒ•ãƒ¬ãƒ¼ãƒ åçµ±ä¸€ï¼ˆxFå½¢å¼ï¼‰
animation-system.js:1486    âœ“ Phase 3: Canvas2Då»ƒæ­¢ â†’ ThumbnailSystemçµ±ä¸€
animation-system.js:1487    âœ“ Phase 3-2: init()æ™‚ã«GSAP.delayedCall()ã§åˆå›ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ
animation-system.js:1488    âœ“ generateFrameThumbnail(): PixiJS RenderTextureä½¿ç”¨
animation-system.js:1489    âœ“ frame.thumbnailDataURLä¿å­˜ã§ UIå±¤é€£æº
pressure-handler.js:183 âœ… pressure-handler.js (Phase 3: è·é›¢ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿è¿½åŠ ç‰ˆ) loaded
pressure-handler.js:184    - applyDistanceFilter() è¿½åŠ 
pressure-handler.js:185    - çŸ­è·é›¢: alpha=0.9 (å³åº§åæ˜ )
pressure-handler.js:186    - é•·è·é›¢: alpha=0.3 (ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°å¼·)
curve-interpolator.js:205 âœ… curve-interpolator.js (Phase 3) loaded
curve-interpolator.js:206    - Catmull-Rom ã‚¹ãƒ—ãƒ©ã‚¤ãƒ³è£œé–“
curve-interpolator.js:207    - é©å¿œçš„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å¯¾å¿œ
curve-interpolator.js:208    - tiltX/Y/twist ãƒ‡ãƒ¼ã‚¿è£œé–“å¯¾å¿œ
stroke-renderer.js:247 âœ… system/drawing/stroke-renderer.js loaded (PixiJS v8å®Œå…¨å¯¾å¿œç‰ˆ)
thumbnail-system.js:505 âœ… thumbnail-system.js loaded (Phase 1-3)
brush-settings.js:183 âœ… brush-settings.js (APIçµ±ä¸€ç‰ˆ) loaded
brush-settings.js:184    - âœ… getOpacity() / setOpacity() è¿½åŠ 
brush-settings.js:185    - âœ… brush:opacity-changed ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­è¿½åŠ 
drawing-engine.js:376 âœ… drawing-engine.js (åº§æ¨™ç³»å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
drawing-engine.js:459 âœ… Debug commands: TegakiDebug.drawing.*
quick-export-ui.js:292 âœ… quick-export-ui.js (ç„¡åŠ¹åŒ–ç‰ˆ) loaded
export-manager.js:224 âœ… export-manager.js (CUTâ†’FRAMEå®Œå…¨ä¿®æ­£ç‰ˆ) loaded
png-exporter.js:85 âœ… png-exporter.js (å˜ä¸€ãƒ•ãƒ¬ãƒ¼ãƒ å°‚ç”¨ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œ) loaded
apng-exporter.js:236 âœ… apng-exporter.js (CUTâ†’FRAMEå®Œå…¨ä¿®æ­£ç‰ˆ) loaded
gif-exporter.js:300 âœ… gif-exporter.js (CUTâ†’FRAMEå®Œå…¨ä¿®æ­£ç‰ˆ) loaded
webp-exporter.js:289 âœ… webp-exporter.js (é™æ­¢ç”»ãƒ»å‹•ç”»è‡ªå‹•åˆ¤å®šå¯¾å¿œç‰ˆ) loaded
mp4-exporter.js:30 âœ… mp4-exporter.js (Phase 8å®Œæˆç‰ˆ) loaded
pdf-exporter.js:225 âœ… pdf-exporter.js (CUTâ†’FRAMEå®Œå…¨å¯¾å¿œç‰ˆ) loaded
dom-builder.js:494 âœ… dom-builder.js (IDé‡è¤‡è§£æ¶ˆç‰ˆ) loaded
dom-builder.js:495    - #pen-settings â†’ #legacy-pen-settings ã«å¤‰æ›´
dom-builder.js:496    - pen-size-slider â†’ legacy-pen-size-slider ã«å¤‰æ›´
dom-builder.js:497    - quick-access-popup.jsã¨ã®IDç«¶åˆã‚’å®Œå…¨è§£æ¶ˆ
slider-utils.js:197 âœ… ui/slider-utils.js loaded
slider-utils.js:198    - è²¬å‹™: ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼UIã®çµ±ä¸€å®Ÿè£…
slider-utils.js:199    - DRYåŸå‰‡: settings-popup.js ã¨ ui-panels.js ã§å…±æœ‰
slider-utils.js:200    - API: createSlider() / createSimpleSlider()
keyboard-handler.js:318 âœ… keyboard-handler.js (P/Eã‚µã‚¤ãƒ‰ãƒãƒ¼åŒæœŸç‰ˆ) loaded
resize-popup.js:452 âœ… resize-popup.js (Phase 4å®Œäº†: ãƒ­ã‚¸ãƒƒã‚¯å‰Šæ¸›ç‰ˆ) loaded
layer-panel-renderer.js:471 âœ… ui/layer-panel-renderer.js (Phase 2 ã‚µãƒ ãƒã‚¤ãƒ«æ›´æ–°ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆç‰ˆ) loaded
layer-panel-renderer.js:472    âœ“ Phase 2: layer:transform-updated è³¼èª­ãƒ»å³åº§æ›´æ–°
layer-panel-renderer.js:473    âœ“ GSAP delayedCall ã§ã‚µãƒ ãƒã‚¤ãƒ«æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°åŒæœŸ
layer-panel-renderer.js:474    âœ“ throttle: 50msï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼å€‹åˆ¥ç®¡ç†ï¼‰
layer-panel-renderer.js:475    âœ“ ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¼·åˆ¶ã‚¯ãƒªã‚¢å®Ÿè£…
layer-panel-renderer.js:476    âœ“ immediate ãƒ•ãƒ©ã‚°å¯¾å¿œ
status-display-renderer.js:138 âœ… status-display-renderer.js (Phase 1æ”¹ä¿®ç‰ˆ) loaded
timeline-thumbnail-utils.js:258 âœ… ui/timeline-thumbnail-utils.js (Phase 3å®Œå…¨ç‰ˆ) loaded
timeline-thumbnail-utils.js:259    âœ“ Phase 1: layer:transform-updated è³¼èª­è¿½åŠ 
timeline-thumbnail-utils.js:260    âœ“ Phase 3: throttleæœ€é©åŒ–ï¼ˆ100msï¼‰
timeline-thumbnail-utils.js:261    âœ“ Phase 3: immediate ãƒ•ãƒ©ã‚°å¯¾å¿œ
timeline-thumbnail-utils.js:262    âœ“ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢ã«å³åº§è¿½å¾“
timeline-ui.js:981 âœ… timeline-ui.js (Phase 4å®Œäº†: ãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢é€£æºç‰ˆ) loaded
album-popup.js:473 âœ… album-popup.js (FRAMEæ”¹ä¿®ç‰ˆ) loaded
settings-popup.js:583 âœ… settings-popup.js (å³å¿œæ€§å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
settings-popup.js:584    - CSS transitionå®Œå…¨é™¤å»ï¼ˆ!importantä»˜ãï¼‰
settings-popup.js:585    - DOMæ›´æ–°ã‚’åŒæœŸçš„ã«å³åº§å®Ÿè¡Œ
settings-popup.js:586    - quick-access/resize-popupã¨å®Œå…¨åŒç­‰ã®å‹•ä½œ
quick-access-popup.js:538 âœ… quick-access-popup.js (èƒŒæ™¯ãƒ‰ãƒ©ãƒƒã‚° + é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ç‰ˆ) loaded
quick-access-popup.js:539    - èƒŒæ™¯ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•å¯èƒ½ï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼/ãƒœã‚¿ãƒ³ä»¥å¤–ï¼‰
quick-access-popup.js:540    - å³ä¸ŠÃ—ãƒœã‚¿ãƒ³ã§é–‰ã˜ã‚‹
quick-access-popup.js:541    - ç”»é¢å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ãªã„ï¼ˆå¸¸æ™‚é–‹ãã£ã±ãªã—å¯èƒ½ï¼‰
export-popup.js:423 âœ… export-popup.js (frameInfoä¿®æ­£ç‰ˆï¼‹PDFæœ‰åŠ¹åŒ–) loaded
ui-panels.js:408 âœ… ui-panels.js (ã‚µã‚¤ãƒ‰ãƒãƒ¼åŒæœŸãƒ»è‰²èª¿æ•´ç‰ˆ) loaded
core-runtime.js:713 âœ… core-runtime.js (Phase 1-3å®Œå…¨ç‰ˆ: ThumbnailSystemçµ±åˆ) loaded
core-engine.js:847 âœ… core-engine.js (GSAPçµ±åˆãƒ»åè»¢æ©Ÿèƒ½ä¿®æ­£å®Œå…¨ç‰ˆ) loaded
core-engine.js:848    âœ“ Phase 2: ãƒªã‚µã‚¤ã‚ºæ™‚ãƒ¬ã‚¤ãƒ¤ãƒ¼åº§æ¨™ã‚·ãƒ•ãƒˆ + èƒŒæ™¯è‰²ä¿®æ­£
core-engine.js:849    âœ“ Phase 4: onFlipRequestã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®šï¼ˆVãƒ¢ãƒ¼ãƒ‰åè»¢æ©Ÿèƒ½ä¿®å¾©ï¼‰
core-engine.js:850    âœ“ Phase 5: GSAP Tickerçµ±åˆæº–å‚™å®Œäº†ï¼ˆ_setupGSAPTickerï¼‰
core-engine.js:851    âœ“ destroy()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ï¼ˆGSAPå®Œå…¨åœæ­¢ãƒ»ãƒªãƒ­ãƒ¼ãƒ‰å®‰å®šåŒ–ï¼‰
core-initializer.js:347 âœ… core-initializer.js (å®Œå…¨ä¿®æ­£ç‰ˆãƒ»SettingsManagerï¼‹ExportPopupå¯¾å¿œ) loaded
core-engine.js:352 [CoreEngine] GSAP detected - Tickerçµ±åˆ available
layer-transform.js:46 [LayerTransform] GSAP detected - using synchronized updates
drawing-clipboard.js:19 DrawingClipboard: Initializing...
drawing-clipboard.js:26 âœ… DrawingClipboard initialized (Phase4æ”¹ä¿®ç‰ˆ + ç¢ºå®šã‚¤ãƒ™ãƒ³ãƒˆ)
thumbnail-system.js:50 âœ… ThumbnailSystem initialized (Phase 1-3)
thumbnail-system.js:51    âœ“ RenderTexture pool: max size 10
core-engine.js:757 âœ… ThumbnailSystem initialized in CoreEngine
animation-system.js:218 [AnimationSystem] GSAP detected - using synchronized thumbnail generation
core-engine.js:496 âœ… [CoreEngine] onFlipRequest callback configured
core-initializer.js:63 âœ… SettingsManager initialized
popup-manager.js:16 âœ… PopupManager initialized
popup-manager.js:42 ğŸ“‹ Popup "settings" registered (priority: 1)
popup-manager.js:42 ğŸ“‹ Popup "quickAccess" registered (priority: 2)
popup-manager.js:42 ğŸ“‹ Popup "album" registered (priority: 3)
popup-manager.js:42 ğŸ“‹ Popup "resize" registered (priority: 4)
popup-manager.js:102 ğŸ”§ Initializing all popups...
popup-manager.js:87 âœ… Popup "settings" initialized successfully
popup-manager.js:87 âœ… Popup "quickAccess" initialized successfully
popup-manager.js:87 âœ… Popup "album" initialized successfully
popup-manager.js:87 âœ… Popup "resize" initialized successfully
popup-manager.js:118 ğŸ“Š Popup initialization: 4 ready, 0 deferred
animation-system.js:255 ğŸ¬ Regenerating 0 frame thumbnails...
animation-system.js:265 âœ… All frame thumbnails regenerated
popup-manager.js:42 ğŸ“‹ Popup "export" registered (priority: 5)
popup-manager.js:87 âœ… Popup "export" initialized successfully
core-initializer.js:245 âœ… ExportPopup registered and initialized
animation-system.js:777 ğŸ¬ Generating frame thumbnail: index=0, id=frame_1761798304482_jig1g6bjw
animation-system.js:794 âœ“ Frame thumbnail saved: frame_1761798304482_jig1g6bjw
animation-system.js:800 âœ“ Frame thumbnail dataURL generated
animation-system.js:812 âœ… Frame 0 thumbnail generation complete
// ================================================================================
// ç°¡æ˜“ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰ - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œ
// ================================================================================

// ========== åŸºæœ¬ç¢ºèª ==========
console.log('=== ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ ===');
console.log('ThumbnailSystem:', typeof window.ThumbnailSystem, window.ThumbnailSystem?.isInitialized);
console.log('AnimationSystem:', typeof window.animationSystem);
console.log('LayerManager:', typeof window.layerManager);
console.log('GSAP:', typeof gsap);

// ========== è¨ºæ–­ã‚³ãƒãƒ³ãƒ‰ ==========
window.checkThumb = function() {
    if (!window.ThumbnailSystem) {
        console.error('âŒ ThumbnailSystem not found');
        return;
    }
    
    console.log('ThumbnailSystemçŠ¶æ…‹:');
    console.log('  initialized:', window.ThumbnailSystem.isInitialized);
    console.log('  app:', !!window.ThumbnailSystem.app);
    console.log('  renderer:', !!window.ThumbnailSystem.app?.renderer);
    console.log('  eventBus:', !!window.ThumbnailSystem.eventBus);
    
    const info = window.ThumbnailSystem.getDebugInfo();
    console.log('  layer cache:', info.layerCacheSize);
    console.log('  frame cache:', info.frameCacheSize);
    console.log('  pending:', info.pendingVModeRefreshCount);
};

// æ‰‹å‹•åˆæœŸåŒ–
window.fixThumb = function() {
    if (!window.ThumbnailSystem) {
        console.error('âŒ ThumbnailSystem not found');
        return;
    }
    
    if (!window.ThumbnailSystem.app) {
        window.ThumbnailSystem.app = window.app;
        console.log('âœ… app assigned');
    }
    
    if (!window.ThumbnailSystem.isInitialized) {
        window.ThumbnailSystem.init(window.TegakiEventBus);
        console.log('âœ… initialized');
    }
    
    window.checkThumb();
};

// onFlipRequestä¿®å¾©
window.fixFlip = function() {
    const layerMgr = window.layerManager;
    if (!layerMgr?.transform) {
        console.error('âŒ LayerTransform not found');
        return;
    }
    
    layerMgr.transform.onFlipRequest = (direction) => {
        console.log(`ğŸ”„ Flip: ${direction}`);
        const layer = layerMgr.getActiveLayer();
        if (!layer) return;
        
        layerMgr.transform.flipLayer(layer, direction);
        
        if (window.TegakiEventBus) {
            window.TegakiEventBus.emit('thumbnail:layer-updated', {
                component: 'fix',
                action: 'flip',
                data: { 
                    layerIndex: layerMgr.activeLayerIndex, 
                    layerId: layer.layerData.id, 
                    immediate: true 
                }
            });
        }
    };
    
    console.log('âœ… onFlipRequest fixed');
};

// å…¨ä¿®å¾©
window.fixAll = function() {
    console.log('=== å…¨ä¿®å¾© ===');
    window.fixThumb();
    window.fixFlip();
    console.log('âœ… å®Œäº†');
};

// â˜…â˜…â˜… æ–°è¦: ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ â˜…â˜…â˜…
window.testThumbGeneration = async function() {
    console.log('=== ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ ===');
    
    const layerMgr = window.layerManager;
    if (!layerMgr) {
        console.error('âŒ LayerManager not found');
        return;
    }
    
    const layers = layerMgr.getLayers();
    console.log(`ğŸ“‹ Total layers: ${layers.length}`);
    
    for (let i = 0; i < layers.length; i++) {
        const layer = layers[i];
        const layerId = layer.layerData?.id;
        
        if (layer.layerData?.isBackground) {
            console.log(`â­ï¸  Layer ${i} (${layerId}): Background - skipped`);
            continue;
        }
        
        console.log(`ğŸ¬ Layer ${i} (${layerId}): Generating...`);
        
        const thumb = await window.ThumbnailSystem.generateLayerThumbnail(layer, 64, 64);
        
        if (thumb) {
            console.log(`  âœ… Generated: ${thumb.width}x${thumb.height}`);
        } else {
            console.log(`  âŒ Failed`);
        }
        
        await new Promise(r => setTimeout(r, 50));
    }
    
    console.log('\nğŸ“Š Final cache state:');
    window.checkThumb();
};

// â˜…â˜…â˜… æ–°è¦: UIå±¤ã‹ã‚‰å¼·åˆ¶æ›´æ–° â˜…â˜…â˜…
window.forceUIUpdate = async function() {
    console.log('=== UIå±¤å¼·åˆ¶æ›´æ–° ===');
    
    // LayerPanelRendererå–å¾—
    const layerPanel = window.TegakiUI?.layerPanelRenderer || 
                      window.CoreRuntime?.internal?.layerPanelRenderer;
    
    if (!layerPanel) {
        console.error('âŒ LayerPanelRenderer not found');
        return;
    }
    
    console.log('ğŸ”„ Calling updateAllThumbnails()...');
    await layerPanel.updateAllThumbnails();
    
    console.log('\nğŸ“Š Cache state after update:');
    window.checkThumb();
};

// â˜…â˜…â˜… æ–°è¦: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ â˜…â˜…â˜…
window.testTimelineThumb = async function() {
    console.log('=== ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ ===');
    
    const animSys = window.animationSystem;
    if (!animSys) {
        console.error('âŒ AnimationSystem not found');
        return;
    }
    
    const frames = animSys.getAllFrames();
    console.log(`ğŸ“‹ Total frames: ${frames.length}`);
    
    for (let i = 0; i < frames.length; i++) {
        const frame = frames[i];
        
        console.log(`ğŸ¬ Frame ${i} (${frame.id}): Generating...`);
        
        const thumb = await window.ThumbnailSystem.generateFrameThumbnail(frame.container, 150, 150);
        
        if (thumb) {
            console.log(`  âœ… Generated: ${thumb.width}x${thumb.height}`);
        } else {
            console.log(`  âŒ Failed`);
        }
        
        await new Promise(r => setTimeout(r, 50));
    }
    
    console.log('\nğŸ“Š Final cache state:');
    window.checkThumb();
};

// ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚µãƒ ãƒã‚¤ãƒ«å¼·åˆ¶æ›´æ–°
window.refreshLayer = function(index = 0) {
    const layerMgr = window.layerManager;
    if (!layerMgr) return;
    
    const layers = layerMgr.getLayers();
    const layer = layers[index];
    if (!layer) return;
    
    const layerId = layer.layerData?.id;
    console.log(`ğŸ”„ Refreshing layer ${index} (${layerId})`);
    
    if (window.ThumbnailSystem) {
        window.ThumbnailSystem._invalidateLayerCacheByLayerId(layerId);
    }
    
    if (window.TegakiEventBus) {
        window.TegakiEventBus.emit('thumbnail:layer-updated', {
            component: 'manual',
            action: 'refresh',
            data: { layerIndex: index, layerId, immediate: true }
        });
    }
};

console.log('\nâœ… ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰æº–å‚™å®Œäº†');
console.log('\nğŸ“‹ ä½¿ã„æ–¹:');
console.log('  window.checkThumb()         - çŠ¶æ…‹ç¢ºèª');
console.log('  window.fixAll()             - å…¨ä¿®å¾©');
console.log('  window.testThumbGeneration()- ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ');
console.log('  window.testTimelineThumb()  - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ');
console.log('  window.forceUIUpdate()      - UIå±¤ã‹ã‚‰å¼·åˆ¶æ›´æ–°');
console.log('  window.refreshLayer(0)      - ãƒ¬ã‚¤ãƒ¤ãƒ¼0æ›´æ–°');

// è‡ªå‹•è¨ºæ–­å®Ÿè¡Œ
console.log('\n=== è‡ªå‹•è¨ºæ–­ ===');
window.checkThumb();
VM539:6 === ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ ===
VM539:7 ThumbnailSystem: object true
VM539:8 AnimationSystem: object
VM539:9 LayerManager: object
VM539:10 GSAP: object
VM539:207 
âœ… ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰æº–å‚™å®Œäº†
VM539:208 
ğŸ“‹ ä½¿ã„æ–¹:
VM539:209   window.checkThumb()         - çŠ¶æ…‹ç¢ºèª
VM539:210   window.fixAll()             - å…¨ä¿®å¾©
VM539:211   window.testThumbGeneration()- ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ
VM539:212   window.testTimelineThumb()  - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆãƒ†ã‚¹ãƒˆ
VM539:213   window.forceUIUpdate()      - UIå±¤ã‹ã‚‰å¼·åˆ¶æ›´æ–°
VM539:214   window.refreshLayer(0)      - ãƒ¬ã‚¤ãƒ¤ãƒ¼0æ›´æ–°
VM539:217 
=== è‡ªå‹•è¨ºæ–­ ===
VM539:19 ThumbnailSystemçŠ¶æ…‹:
VM539:20   initialized: true
VM539:21   app: true
VM539:22   renderer: true
VM539:23   eventBus: true
VM539:26   layer cache: 0
VM539:27   frame cache: 1
VM539:28   pending: 0
undefined
