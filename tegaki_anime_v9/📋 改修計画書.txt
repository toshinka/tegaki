📋 改修計画書
Phase 1: 座標系の統一

CanvasManagerに座標変換の責務を集約
World座標系の導入準備（将来の拡張用）

Phase 2: レイヤー合成ロジックの修正

LayerManager.getCompositeImageData()を正しいアルファ合成に修正
一時キャンバスでの段階的合成に変更

Phase 3: 描画フローの整理

レイヤーデータの保存/復元タイミングを明確化
描画開始→描画中→描画終了の各段階でのデータ同期を確実に

Phase 4: サムネイル更新の統一

全てのデータ変更点で適切なサムネイル更新を保証