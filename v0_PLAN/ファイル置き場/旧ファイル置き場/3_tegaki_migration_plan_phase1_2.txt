# ğŸ¨ ãµãŸã°â˜†ã¡ã‚ƒã‚“ã­ã‚‹é¢¨ãŠçµµæããƒ„ãƒ¼ãƒ« ç§»è¡Œè¨ˆç”»æ›¸ Phase1-2ç‰ˆ
## HTMLå˜ä½“ â†’ node_modulesåˆ†å‰² â†’ æç”»æ©Ÿèƒ½å®Œæˆæˆ¦ç•¥

### ğŸ“‹ è¨ˆç”»æ¦‚è¦
**ç§»è¡Œæˆ¦ç•¥**: HTMLå˜ä½“ â†’ node_modulesåˆ†å‰² â†’ v8ç§»è¡Œã®æ®µéšæˆ¦ç•¥
**åŸºæœ¬æ–¹é‡**: ãƒ­ãƒ¼ã‚«ãƒ«ä¾å­˜ãƒ»CORSåˆ¶é™å›é¿ãƒ»AIå”åƒé–‹ç™ºæœ€é©åŒ–ãƒ»éç ´å£Šå“è³ªä¿è¨¼
**Phase1-2ç›®æ¨™**: åˆ†å‰²åŸºç›¤æ§‹ç¯‰â†’æç”»æ©Ÿèƒ½å®Œæˆï¼ˆv7å®Œæˆç‰ˆï¼‰

### ğŸ¯ Phase3-4äºˆå‘Šãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆ
- **Phase3**: GIFã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»ã‚ªãƒ‹ã‚ªãƒ³ã‚¹ã‚­ãƒ³ï¼ˆv7æœ€çµ‚ç‰ˆï¼‰
- **Phase4**: PixiJS v8ç§»è¡Œãƒ»WebGPUãƒ»120FPSãƒ»SPINEçµ±åˆï¼ˆæ¬¡ä¸–ä»£ç‰ˆï¼‰

---

## ğŸ—ï¸ Phase1: HTMLå˜ä½“â†’node_modulesåˆ†å‰²ç§»è¡Œ

### Phase1.1: åŸºç›¤åˆ†å‰²ï¼ˆvector-drawing-tool.html â†’ åˆ†å‰²æ§‹æˆï¼‰
**æœŸé–“**: 1-2é€±é–“  
**ç›®æ¨™**: æ—¢å­˜HTMLå˜ä½“ãƒ•ã‚¡ã‚¤ãƒ«ã®node_modulesåˆ†å‰²ãƒ»CORSåˆ¶é™å›é¿

#### åˆ†å‰²å¯¾è±¡ãƒ»æ‰‹é †
**Step1: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆä½œæˆ**
```
vector-drawing-tool.htmlï¼ˆ1000è¡Œè¶…ï¼‰
â†“ åˆ†å‰²
â”œâ”€ index.htmlï¼ˆnode_modulesçµ±åˆãƒ»100è¡Œä»¥ä¸‹ï¼‰
â”œâ”€ package.jsonï¼ˆä¾å­˜é–¢ä¿‚ç®¡ç†ï¼‰
â”œâ”€ node_modules/ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
â”œâ”€ css/styles.cssï¼ˆãµãŸã°é¢¨ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»300è¡Œä»¥ä¸‹ï¼‰
â”œâ”€ libs/pixi-extensions.jsï¼ˆæ‹¡å¼µçµ±åˆãƒ»300è¡Œä»¥ä¸‹ï¼‰
â””â”€ js/main.jsï¼ˆåˆæœŸåŒ–ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆãƒ»100è¡Œä»¥ä¸‹ï¼‰
```

**Step2: node_modulesä¾å­˜é–¢ä¿‚æ§‹ç¯‰**
```bash
# package.jsonä½œæˆï¼ˆæ—¢å­˜æ´»ç”¨ï¼‰
npm install

# ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç¢ºèª
pixi.js@^7.4.3
@pixi/ui@^1.2.4
@pixi/layers@^2.1.0
@pixi/gif@^2.1.1
gsap@^3.13.0
lodash@^4.17.21
hammerjs@^2.0.8
@tabler/icons-react": "^3.34.1
```

**Step3: HTMLåˆ†é›¢å®Ÿè£…**
```html
<!-- index.html: node_modulesçµ±åˆç‰ˆ -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <title>ğŸ¨ ãµãŸã°â˜†ã¡ã‚ƒã‚“ã­ã‚‹é¢¨ãƒ™ã‚¯ã‚¿ãƒ¼ãŠçµµæããƒ„ãƒ¼ãƒ« v1.0</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- node_modulesçµ±åˆãƒ»ãƒ­ãƒ¼ã‚«ãƒ«èª­ã¿è¾¼ã¿ -->
    <script src="./node_modules/pixi.js/dist/pixi.js"></script>
    <script src="./node_modules/@pixi/ui/dist/pixi-ui.js"></script>
    <script src="./node_modules/@pixi/layers/dist/pixi-layers.js"></script>
    <script src="./node_modules/@pixi/gif/dist/pixi-gif.js"></script>
    <script src="./node_modules/gsap/dist/gsap.js"></script>
    <script src="./node_modules/lodash/lodash.js"></script>
    <script src="./node_modules/hammerjs/hammer.min.js"></script>
    
    <!-- PixiJSæ‹¡å¼µçµ±åˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <script src="libs/pixi-extensions.js"></script>
    
    <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“ -->
    <script src="js/main.js"></script>
    
    <div id="app-root"></div>
</body>
</html>
```

**Step4: libs/pixi-extensions.jså®Ÿè£…**
```javascript
// libs/pixi-extensions.js - æ‹¡å¼µçµ±åˆåŸºç›¤ï¼ˆ300è¡Œä»¥ä¸‹ï¼‰
class PixiExtensionsManager {
    constructor() {
        this.extensions = new Map();
        this.initialized = false;
    }
    
    async initialize() {
        console.log('ğŸ”§ PixiJSæ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆé–‹å§‹...');
        
        // åŸºæœ¬æ¤œè¨¼
        this.validateCoreLibraries();
        
        // æ‹¡å¼µçµ±åˆ
        this.integrateExtensions();
        
        this.initialized = true;
        console.log('âœ… PixiJSæ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆå®Œäº†');
    }
    
    validateCoreLibraries() {
        if (!window.PIXI) throw new Error('PixiJS ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
        console.log(`âœ… PixiJS v${PIXI.VERSION} æ¤œå‡º`);
    }
    
    integrateExtensions() {
        // @pixi/uiçµ±åˆ
        if (window.PIXI?.UI) {
            this.extensions.set('ui', { available: true, components: window.PIXI.UI });
            console.log('âœ… @pixi/ui çµ±åˆå®Œäº†');
        }
        
        // @pixi/layersçµ±åˆ
        if (window.PIXI?.display) {
            this.extensions.set('layers', { available: true, Layer: window.PIXI.display.Layer });
            console.log('âœ… @pixi/layers çµ±åˆå®Œäº†');
        }
        
        // ãã®ä»–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ...
    }
    
    hasFeature(feature) {
        return this.extensions.get(feature)?.available || false;
    }
}

window.PixiExtensions = new PixiExtensionsManager();
```

**Step5: JavaScriptæ©Ÿèƒ½åˆ†å‰²**
```
<script>éƒ¨åˆ†ï¼ˆ800è¡Œè¶…ï¼‰
â†“ æ©Ÿèƒ½åˆ¥åˆ†å‰²
â”œâ”€ js/app-core.jsï¼ˆPixiJSåŸºç›¤ãƒ»300è¡Œä»¥ä¸‹ï¼‰
â”œâ”€ js/managers/ï¼ˆçµ±æ‹¬ç®¡ç†å±¤ï¼‰
â”‚  â”œâ”€ ui-manager.jsï¼ˆUIçµ±æ‹¬ãƒ»400è¡Œä»¥ä¸‹ï¼‰
â”‚  â”œâ”€ tool-manager.jsï¼ˆãƒ„ãƒ¼ãƒ«çµ±æ‹¬ãƒ»300è¡Œä»¥ä¸‹ï¼‰
â”‚  â””â”€ canvas-manager.jsï¼ˆã‚­ãƒ£ãƒ³ãƒã‚¹åˆ¶å¾¡ãƒ»300è¡Œä»¥ä¸‹ï¼‰
â”œâ”€ js/tools/ï¼ˆãƒ„ãƒ¼ãƒ«ç¾¤ãƒ»å„300è¡Œä»¥ä¸‹ï¼‰
â”‚  â”œâ”€ pen-tool.jsï¼ˆãƒšãƒ³å°‚ç”¨ï¼‰
â”‚  â””â”€ eraser-tool.jsï¼ˆæ¶ˆã—ã‚´ãƒ å°‚ç”¨ï¼‰
â””â”€ js/ui/ï¼ˆUIç¾¤ãƒ»å„200è¡Œä»¥ä¸‹ï¼‰
   â”œâ”€ popup-manager.jsï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼‰
   â””â”€ slider-manager.jsï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼‰
```

#### ç§»è¡Œå“è³ªåŸºæº–
- [ ] æ—¢å­˜HTMLæ©Ÿèƒ½100%å†ç¾
- [ ] node_modulesãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ­£å¸¸å‹•ä½œç¢ºèª
- [ ] CORSåˆ¶é™å›é¿ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œç¢ºèª
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™éµå®ˆï¼ˆå„500è¡Œä»¥ä¸‹ï¼‰
- [ ] AIåˆ†æ¥­é–‹ç™ºãƒ†ã‚¹ãƒˆæˆåŠŸ

### Phase1.2: AIåˆ†æ¥­é–‹ç™ºåŸºç›¤æ§‹ç¯‰
**æœŸé–“**: 1é€±é–“  
**ç›®æ¨™**: AIå”åƒé–‹ç™ºãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºç«‹ãƒ»å¿…è¦æœ€å°é™ãƒ•ã‚¡ã‚¤ãƒ«ç‰¹å®š

#### åˆ†æ¥­ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…
**ãƒ‘ã‚¿ãƒ¼ãƒ³A: ãƒšãƒ³ãƒ„ãƒ¼ãƒ«æ”¹ä¿®**
```javascript
// ğŸ¯ å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆAIæ·»ä»˜å¯¾è±¡ï¼‰:
files: [
    'libs/pixi-extensions.js',        // æ‹¡å¼µçµ±åˆåŸºç›¤
    'js/main.js',                     // åˆæœŸåŒ–
    'js/app-core.js',                 // PixiJSåŸºç›¤
    'js/managers/tool-manager.js',    // ãƒ„ãƒ¼ãƒ«çµ±æ‹¬
    'js/tools/pen-tool.js'            // ãƒšãƒ³å°‚ç”¨ï¼ˆæ”¹ä¿®å¯¾è±¡ï¼‰
]
// ğŸ¯ é™¤å¤–å¯èƒ½: ui/*.js, layers/*.js, animation/*.js
```

**ãƒ‘ã‚¿ãƒ¼ãƒ³B: UIæ”¹ä¿®**
```javascript
// ğŸ¯ å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆAIæ·»ä»˜å¯¾è±¡ï¼‰:
files: [
    'libs/pixi-extensions.js',        // æ‹¡å¼µçµ±åˆåŸºç›¤
    'js/main.js',                     // åˆæœŸåŒ–
    'js/app-core.js',                 // PixiJSåŸºç›¤
    'js/managers/ui-manager.js',      // UIçµ±æ‹¬
    'js/ui/popup-manager.js'          // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆæ”¹ä¿®å¯¾è±¡ï¼‰
]
// ğŸ¯ é™¤å¤–å¯èƒ½: tools/*.js, layers/*.js, animation/*.js
```

#### AIåˆ†æ¥­è­˜åˆ¥ã‚·ã‚¹ãƒ†ãƒ 
å„ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã«åˆ†æ¥­æƒ…å ±åŸ‹ã‚è¾¼ã¿ï¼š
```javascript
/**
 * ğŸ¨ ãµãŸã°â˜†ã¡ã‚ƒã‚“ã­ã‚‹é¢¨ãƒ™ã‚¯ã‚¿ãƒ¼ãŠçµµæããƒ„ãƒ¼ãƒ« v1.0
 * ğŸ¯ AI_WORK_SCOPE: ãƒšãƒ³ãƒ„ãƒ¼ãƒ«å°‚ç”¨ãƒ•ã‚¡ã‚¤ãƒ«
 * ğŸ¯ DEPENDENCIES: main.js, app-core.js, managers/tool-manager.js
 * ğŸ¯ NODE_MODULES: pixi.jsï¼ˆæœ¬ä½“ã®ã¿ï¼‰
 * ğŸ¯ PIXI_EXTENSIONS: ãªã—
 * ğŸ¯ ISOLATION_TEST: âœ… å˜ä½“ãƒ†ã‚¹ãƒˆå¯èƒ½
 * ğŸ¯ SPLIT_THRESHOLD: 300è¡Œè¶…éæ™‚ â†’ pen-settings.jsåˆ†å‰²
 */
```

### Phase1.3: éç ´å£Šå¤‰å½¢åŸºç›¤å®Ÿè£…
**æœŸé–“**: 2é€±é–“  
**ç›®æ¨™**: ãƒ™ã‚¯ã‚¿ãƒ¼å¤‰å½¢ã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚¢ãƒ‹ãƒ¡åˆ¶ä½œå“è³ªä¿è¨¼

#### éç ´å£Šå¤‰å½¢ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
```javascript
// js/transform/vector-transform.js
class VectorTransform {
    applyTransform(layer, transform) {
        // âœ… ãƒ™ã‚¯ã‚¿ãƒ¼å¤‰å½¢ï¼ˆéç ´å£Šï¼‰
        layer.transform.setFromMatrix(transform);
        
        // âœ… å±¥æ­´è¨˜éŒ²ï¼ˆå®Œå…¨å¾©å…ƒå¯èƒ½ï¼‰
        MemoryManager.record('transform', {
            layerId: layer.id,
            transform: transform.clone(),
            beforeState: layer.getOriginalState()
        });
    }
    
    // å“è³ªä¿è¨¼ãƒ¡ã‚½ãƒƒãƒ‰
    validateVectorQuality(graphics) {
        return graphics instanceof PIXI.Graphics && 
               graphics.geometry.points.length > 0;
    }
}
```

#### å¤‰å½¢å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ 
- **å›è»¢å“è³ª**: 360åº¦å›è»¢å¾Œã®å®Œå…¨å¾©å…ƒç¢ºèª
- **æ‹¡ç¸®å“è³ª**: æ‹¡å¤§ãƒ»ç¸®å°ã§ã®å“è³ªåŠ£åŒ–é˜²æ­¢
- **å±¥æ­´å“è³ª**: ã‚¢ãƒ³ãƒ‰ã‚¥ãƒ»ãƒªãƒ‰ã‚¥ã§ã®å®Œå…¨å¾©å…ƒç¢ºèª
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: å¤‰å½¢å±¥æ­´ã®ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–

---

## ğŸ¨ Phase2: æç”»æ©Ÿèƒ½å®Œæˆï¼ˆv7å®Œæˆç‰ˆï¼‰

### Phase2.1: ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å®Œå…¨å®Ÿè£…
**æœŸé–“**: 3é€±é–“  
**ç›®æ¨™**: ãƒ—ãƒ­ç´šãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½ãƒ»ã‚¢ãƒ‹ãƒ¡åˆ¶ä½œæº–å‚™å®Œäº†

#### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½è¦ä»¶
```javascript
// js/layers/layer-manager.jsï¼ˆ500è¡Œä»¥ä¸‹ï¼‰
class LayerManager {
    constructor() {
        this.layers = [];
        this.currentLayer = null;
        this.hasPixiLayers = window.PixiExtensions.hasFeature('layers');
    }
    
    createLayer(options = {}) {
        const layer = {
            id: generateId(),
            name: options.name || `Layer ${this.layers.length + 1}`,
            opacity: options.opacity || 1.0,
            blendMode: options.blendMode || 'normal',
            visible: true,
            locked: false,
            container: this.createLayerContainer()
        };
        
        // éç ´å£Šå¤‰å½¢å¯¾å¿œ
        layer.originalTransform = new PIXI.Matrix();
        this.layers.push(layer);
        return layer;
    }
    
    createLayerContainer() {
        if (this.hasPixiLayers) {
            // @pixi/layersä½¿ç”¨
            const Layer = window.PixiExtensions.getComponent('layers', 'Layer');
            return new Layer();
        } else {
            // åŸºæœ¬Containerä½¿ç”¨
            return new PIXI.Container();
        }
    }
    
    // ãƒ•ã‚©ãƒ«ãƒ€æ©Ÿèƒ½
    createLayerFolder(name) {
        return {
            id: generateId(),
            name,
            type: 'folder',
            children: [],
            collapsed: false
        };
    }
    
    moveLayerToFolder(layer, folder) {
        folder.children.push(layer.id);
        layer.parentFolder = folder.id;
    }
    
    setLayerOpacity(layer, opacity) {
        layer.opacity = Math.max(0, Math.min(1, opacity));
        layer.container.alpha = layer.opacity;
    }
}
```

#### ãƒ¬ã‚¤ãƒ¤ãƒ¼UIå®Ÿè£…
```javascript
// js/layers/layer-ui.jsï¼ˆ400è¡Œä»¥ä¸‹ï¼‰
class LayerUI {
    constructor(layerManager) {
        this.layerManager = layerManager;
        this.hasPixiUI = window.PixiExtensions.hasFeature('ui');
        this.setupUI();
    }
    
    setupUI() {
        if (this.hasPixiUI) {
            // @pixi/uiä½¿ç”¨
            this.createPixiUIComponents();
        } else {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…
            this.createBasicUIComponents();
        }
    }
    
    createPixiUIComponents() {
        // @pixi/ui.Buttonæ´»ç”¨
        const Button = window.PixiExtensions.getComponent('ui', 'Button');
        
        this.addLayerButton = new Button({
            text: 'ãƒ¬ã‚¤ãƒ¤ãƒ¼è¿½åŠ ',
            backgroundColor: 0x4CAF50
        });
        
        this.addLayerButton.onPress.connect(() => {
            this.layerManager.createLayer();
        });
    }
    
    createBasicUIComponents() {
        // åŸºæœ¬PIXI.Graphicsä½¿ç”¨
        this.addLayerButton = new PIXI.Graphics();
        this.addLayerButton.beginFill(0x4CAF50);
        this.addLayerButton.drawRoundedRect(0, 0, 120, 30, 5);
        this.addLayerButton.endFill();
        this.addLayerButton.interactive = true;
        
        this.addLayerButton.on('pointertap', () => {
            this.layerManager.createLayer();
        });
    }
}
```

### Phase2.2: é«˜åº¦æç”»ãƒ„ãƒ¼ãƒ«å®Ÿè£…
**æœŸé–“**: 3é€±é–“  
**ç›®æ¨™**: ãƒ—ãƒ­ç´šæç”»ãƒ„ãƒ¼ãƒ«ç¾¤å®Œæˆ

#### ãƒã‚±ãƒ„ãƒ„ãƒ¼ãƒ«å®Ÿè£…
```javascript
// js/tools/bucket-tool.jsï¼ˆ400è¡Œä»¥ä¸‹ï¼‰
class BucketTool {
    constructor(toolManager) {
        this.toolManager = toolManager;
        this.tolerance = 32; // è‰²ã®è¨±å®¹ç¯„å›²
        this.hasLodash = window.PixiExtensions.hasFeature('lodash');
    }
    
    async fill(x, y, color) {
        // å¯¾è±¡ãƒ”ã‚¯ã‚»ãƒ«å–å¾—
        const targetPixels = await this.getTargetPixels(x, y);
        
        if (this.hasLodash) {
            // Lodashæ´»ç”¨ã§ãƒ”ã‚¯ã‚»ãƒ«å‡¦ç†æœ€é©åŒ–
            const _ = window.PixiExtensions.getComponent('lodash', '_');
            const fillQueue = _.cloneDeep(targetPixels);
            
            // åŠ¹ç‡çš„ãªé‡è¤‡é™¤å»ãƒ»å‡¦ç†
            const uniquePixels = _.uniqBy(fillQueue, pixel => `${pixel.x}-${pixel.y}`);
            return this.createFillGraphics(uniquePixels, color);
        } else {
            // åŸºæœ¬å®Ÿè£…
            return this.basicFill(targetPixels, color);
        }
    }
    
    createFillGraphics(pixels, color) {
        // éç ´å£Šãƒ•ã‚£ãƒ«å®Ÿè£…
        const fillGraphics = new PIXI.Graphics();
        fillGraphics.beginFill(color);
        
        // ãƒ•ãƒ©ãƒƒãƒ‰ãƒ•ã‚£ãƒ« ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
        pixels.forEach(pixel => {
            fillGraphics.drawRect(pixel.x, pixel.y, 1, 1);
        });
        
        fillGraphics.endFill();
        return fillGraphics;
    }
}
```

#### é¸æŠãƒ„ãƒ¼ãƒ«å®Ÿè£…
```javascript
// js/tools/selection-tool.jsï¼ˆ500è¡Œä»¥ä¸‹ï¼‰
class SelectionTool {
    constructor(toolManager) {
        this.toolManager = toolManager;
        this.selectionType = 'rectangular'; // rectangular, lasso, magic
    }
    
    createRectangularSelection(startX, startY, endX, endY) {
        const selection = {
            type: 'rectangular',
            bounds: new PIXI.Rectangle(startX, startY, endX - startX, endY - startY),
            graphics: this.createSelectionGraphics(startX, startY, endX, endY)
        };
        
        return selection;
    }
    
    createSelectionGraphics(x1, y1, x2, y2) {
        const graphics = new PIXI.Graphics();
        
        // é¸æŠç¯„å›²ã®ç‚¹ç·šæ æç”»
        graphics.lineStyle(2, 0x000000, 1);
        graphics.setLineDash([5, 5]);
        graphics.drawRect(x1, y1, x2 - x1, y2 - y1);
        
        return graphics;
    }
    
    // ãƒã‚¸ãƒƒã‚¯é¸æŠï¼ˆè‰²ã«ã‚ˆã‚‹è‡ªå‹•é¸æŠï¼‰
    createMagicSelection(x, y, tolerance = 32) {
        const targetColor = this.getPixelColor(x, y);
        const selectedPixels = this.findSimilarPixels(targetColor, tolerance);
        
        return {
            type: 'magic',
            pixels: selectedPixels,
            graphics: this.createMagicSelectionGraphics(selectedPixels)
        };
    }
}
```

### Phase2.3: ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå®Œå…¨å®Ÿè£…
**æœŸé–“**: 1é€±é–“  
**ç›®æ¨™**: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ»ã‚¿ãƒƒãƒæ“ä½œå®Œå…¨å¯¾å¿œ

#### ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå®Ÿè£…
```javascript
// js/managers/input-manager.jsï¼ˆ400è¡Œä»¥ä¸‹ï¼‰
class InputManager {
    constructor(appCore) {
        this.appCore = appCore;
        this.hasHammer = window.PixiExtensions.hasFeature('hammer');
        this.setupKeyboardShortcuts();
        this.setupTouchGestures();
    }
    
    setupKeyboardShortcuts() {
        const shortcuts = {
            'Ctrl+Z': () => this.undo(),
            'Ctrl+Y': () => this.redo(),
            'Ctrl+A': () => this.selectAll(),
            '[': () => this.decreaseBrushSize(),
            ']': () => this.increaseBrushSize(),
            'Space': () => this.togglePanMode(),
            'Delete': () => this.deleteSelected(),
            'Ctrl+C': () => this.copy(),
            'Ctrl+V': () => this.paste(),
            'Ctrl+S': () => this.save()
        };
        
        document.addEventListener('keydown', (e) => {
            const key = this.getShortcutKey(e);
            if (shortcuts[key]) {
                e.preventDefault();
                shortcuts[key]();
            }
        });
    }
    
    setupTouchGestures() {
        if (!this.hasHammer) return;
        
        // Hammer.jsæ´»ç”¨
        const Hammer = window.PixiExtensions.getComponent('hammer', 'Hammer');
        const hammer = new Hammer(this.appCore.app.view);
        
        // ãƒ”ãƒ³ãƒã‚ºãƒ¼ãƒ 
        hammer.get('pinch').set({ enable: true });
        hammer.on('pinchstart pinch', (e) => {
            this.handlePinchZoom(e);
        });
        
        // 2æœ¬æŒ‡ãƒ‘ãƒ³
        hammer.get('pan').set({ fingers: 2 });
        hammer.on('panstart pan', (e) => {
            this.handleTwoFingerPan(e);
        });
        
        // ãƒ­ãƒ³ã‚°ã‚¿ãƒƒãƒ—ï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ç›¸å½“ï¼‰
        hammer.get('press').set({ time: 500 });
        hammer.on('press', (e) => {
            this.handleContextMenu(e);
        });
    }
    
    handlePinchZoom(e) {
        // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚ºãƒ¼ãƒ åˆ¶å¾¡
        const currentScale = this.appCore.viewport?.scale?.x || 1;
        const newScale = currentScale * e.scale;
        
        if (this.appCore.viewport) {
            this.appCore.viewport.scale.set(
                Math.max(0.1, Math.min(5.0, newScale))
            );
        }
    }
    
    handleTwoFingerPan(e) {
        // 2æœ¬æŒ‡ãƒ‘ãƒ³åˆ¶å¾¡
        if (this.appCore.viewport) {
            this.appCore.viewport.x += e.deltaX;
            this.appCore.viewport.y += e.deltaY;
        }
    }
}
```

---

## ğŸ“Š Phaseåˆ¥ãƒ†ã‚¹ãƒˆæ‰‹é †ãƒ»å“è³ªä¿è¨¼

### Phase1ãƒ†ã‚¹ãƒˆ: HTMLâ†’node_modulesåˆ†å‰²
**åŸºæº–**: æ—¢å­˜æ©Ÿèƒ½100%å†ç¾ãƒ»æ‹¡å¼µçµ±åˆãƒ»AIåˆ†æ¥­ãƒ†ã‚¹ãƒˆ
```javascript
// è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹
class Phase1TestSuite {
    async runTests() {
        console.log('ğŸ§ª Phase1ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹');
        
        // node_modulesãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿ç¢ºèª
        await this.testNodeModulesLoading();
        
        // æ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆç¢ºèª
        await this.testExtensionsIntegration();
        
        // AIåˆ†æ¥­ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½“å‹•ä½œ
        await this.testAICollaborationPatterns();
        
        // æ—¢å­˜æ©Ÿèƒ½å†ç¾ç¢ºèª
        await this.testFeatureReproduction();
        
        console.log('âœ… Phase1ãƒ†ã‚¹ãƒˆå®Œäº†');
    }
    
    async testNodeModulesLoading() {
        const requiredLibraries = [
            'PIXI', 'gsap', '_', 'Hammer'
        ];
        
        for (const lib of requiredLibraries) {
            if (!window[lib]) {
                throw new Error(`node_modules ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ${lib} ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“`);
            }
        }
        
        console.log('âœ… node_modulesèª­ã¿è¾¼ã¿ç¢ºèªå®Œäº†');
    }
    
    async testExtensionsIntegration() {
        await window.PixiExtensions.initialize();
        
        const stats = window.PixiExtensions.getStats();
        if (stats.available < 3) {
            throw new Error('æ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆãŒä¸å®Œå…¨ã§ã™');
        }
        
        console.log(`âœ… æ‹¡å¼µçµ±åˆç¢ºèªå®Œäº†: ${stats.available}/${stats.total}`);
    }
    
    async testAICollaborationPatterns() {
        // ãƒšãƒ³ãƒ„ãƒ¼ãƒ«å˜ä½“ãƒ†ã‚¹ãƒˆ
        const minimalFiles = [
            'libs/pixi-extensions.js',
            'js/main.js', 
            'js/app-core.js', 
            'js/managers/tool-manager.js', 
            'js/tools/pen-tool.js'
        ];
        
        const result = await this.runMinimalConfiguration(minimalFiles);
        if (!result.success) {
            throw new Error('AIåˆ†æ¥­ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        console.log('âœ… AIåˆ†æ¥­ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèªå®Œäº†');
    }
    
    async testFeatureReproduction() {
        // æç”»æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        const drawingTest = await this.testDrawingFeatures();
        
        // UIæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        const uiTest = await this.testUIFeatures();
        
        if (!drawingTest || !uiTest) {
            throw new Error('æ—¢å­˜æ©Ÿèƒ½å†ç¾ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        console.log('âœ… æ—¢å­˜æ©Ÿèƒ½å†ç¾ç¢ºèªå®Œäº†');
    }
}
```

### Phase2ãƒ†ã‚¹ãƒˆ: æç”»æ©Ÿèƒ½å®Œæˆ
**åŸºæº–**: ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½ãƒ»æç”»ãƒ„ãƒ¼ãƒ«ãƒ»ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå®Œå…¨å‹•ä½œ
```javascript
class Phase2TestSuite {
    async runTests() {
        console.log('ğŸ§ª Phase2ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹');
        
        // éç ´å£Šå¤‰å½¢å“è³ªãƒ†ã‚¹ãƒˆ
        await this.testNonDestructiveTransform();
        
        // ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½å®Œå…¨æ€§ãƒ†ã‚¹ãƒˆ
        await this.testLayerFunctionality();
        
        // æç”»ãƒ„ãƒ¼ãƒ«å“è³ªãƒ†ã‚¹ãƒˆ
        await this.testDrawingTools();
        
        // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå‹•ä½œãƒ†ã‚¹ãƒˆ
        await this.testShortcuts();
        
        console.log('âœ… Phase2ãƒ†ã‚¹ãƒˆå®Œäº†');
    }
    
    async testNonDestructiveTransform() {
        const layer = LayerManager.createLayer();
        const originalPoints = layer.graphics.geometry.points.slice();
        
        // 360åº¦å›è»¢ãƒ†ã‚¹ãƒˆ
        VectorTransform.rotate(layer, 2 * Math.PI);
        
        // å“è³ªç¢ºèª
        const currentPoints = layer.graphics.geometry.points;
        if (!this.arraysEqual(originalPoints, currentPoints)) {
            throw new Error('éç ´å£Šå¤‰å½¢å“è³ªãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        // ã‚¢ãƒ³ãƒ‰ã‚¥ãƒ†ã‚¹ãƒˆ
        MemoryManager.undo();
        if (layer.transform.rotation !== 0) {
            throw new Error('ã‚¢ãƒ³ãƒ‰ã‚¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        console.log('âœ… éç ´å£Šå¤‰å½¢å“è³ªç¢ºèªå®Œäº†');
    }
    
    async testLayerFunctionality() {
        const layer1 = LayerManager.createLayer({ name: 'Layer 1' });
        const layer2 = LayerManager.createLayer({ name: 'Layer 2' });
        const folder = LayerManager.createLayerFolder('Folder 1');
        
        // ãƒ•ã‚©ãƒ«ãƒ€æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        LayerManager.moveLayerToFolder(layer1, folder);
        if (!folder.children.includes(layer1.id)) {
            throw new Error('ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ•ã‚©ãƒ«ãƒ€æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        // é€æ˜åº¦æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
        LayerManager.setLayerOpacity(layer2, 0.5);
        if (layer2.opacity !== 0.5) {
            throw new Error('ãƒ¬ã‚¤ãƒ¤ãƒ¼é€æ˜åº¦æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        // å¯è¦–æ€§åˆ¶å¾¡ãƒ†ã‚¹ãƒˆ
        LayerManager.setLayerVisibility(layer1, false);
        if (layer1.visible !== false) {
            throw new Error('ãƒ¬ã‚¤ãƒ¤ãƒ¼å¯è¦–æ€§åˆ¶å¾¡ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        console.log('âœ… ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½ç¢ºèªå®Œäº†');
    }
    
    async testDrawingTools() {
        // ãƒšãƒ³ãƒ„ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
        const penTool = new PenTool();
        penTool.startDrawing(100, 100);
        penTool.continueDrawing(150, 150);
        penTool.stopDrawing();
        
        if (!penTool.currentPath || penTool.currentPath.points.length === 0) {
            throw new Error('ãƒšãƒ³ãƒ„ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        // ãƒã‚±ãƒ„ãƒ„ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
        const bucketTool = new BucketTool();
        const fillResult = await bucketTool.fill(200, 200, 0xFF0000);
        
        if (!fillResult || !(fillResult instanceof PIXI.Graphics)) {
            throw new Error('ãƒã‚±ãƒ„ãƒ„ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        // é¸æŠãƒ„ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ
        const selectionTool = new SelectionTool();
        const selection = selectionTool.createRectangularSelection(0, 0, 100, 100);
        
        if (!selection || !selection.bounds) {
            throw new Error('é¸æŠãƒ„ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆå¤±æ•—');
        }
        
        console.log('âœ… æç”»ãƒ„ãƒ¼ãƒ«å“è³ªç¢ºèªå®Œäº†');
    }
    
    async testShortcuts() {
        const inputManager = new InputManager();
        
        // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆç™»éŒ²ç¢ºèª
        const shortcuts = inputManager.getRegisteredShortcuts();
        const expectedShortcuts = ['Ctrl+Z', 'Ctrl+Y', 'Ctrl+A', '[', ']', 'Space'];
        
        for (const shortcut of expectedShortcuts) {
            if (!shortcuts.includes(shortcut)) {
                throw new Error(`ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ ${shortcut} ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“`);
            }
        }
        
        // ã‚¿ãƒƒãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ç¢ºèªï¼ˆHammer.jsä½¿ç”¨æ™‚ï¼‰
        if (window.PixiExtensions.hasFeature('hammer')) {
            const gestures = inputManager.getRegisteredGestures();
            if (!gestures.includes('pinch') || !gestures.includes('pan')) {
                throw new Error('ã‚¿ãƒƒãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ç™»éŒ²å¤±æ•—');
            }
        }
        
        console.log('âœ… ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ»ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ç¢ºèªå®Œäº†');
    }
}
```

---

## ğŸ¯ é€²æ—ç®¡ç†ãƒ»ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### Phase1ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
- **ğŸ—ï¸ åŸºç›¤åˆ†å‰²å®Œäº†**: HTMLâ†’node_modulesåˆ†å‰²ãƒ»CORSåˆ¶é™å›é¿å®Œæˆ
- **ğŸ¤– AIåˆ†æ¥­åŸºç›¤å®Œæˆ**: å¿…è¦æœ€å°é™ãƒ•ã‚¡ã‚¤ãƒ«ç‰¹å®šãƒ»åˆ†æ¥­ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºç«‹
- **ğŸ”§ æ‹¡å¼µçµ±åˆå®Œäº†**: libs/pixi-extensions.jsçµ±åˆãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½å®Œæˆ

### Phase2ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³  
- **ğŸ“š ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ**: ãƒ—ãƒ­ç´šãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ãƒ»é€æ˜åº¦å®Œæˆ
- **ğŸ¨ æç”»ãƒ„ãƒ¼ãƒ«å®Œæˆ**: ãƒšãƒ³ãƒ»æ¶ˆã—ã‚´ãƒ ãƒ»ãƒã‚±ãƒ„ãƒ»é¸æŠãƒ„ãƒ¼ãƒ«å®Œæˆ
- **âŒ¨ï¸ æ“ä½œç³»çµ±å®Œæˆ**: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ»ã‚¿ãƒƒãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å®Œæˆ

### å“è³ªæŒ‡æ¨™ãƒ»KPI

**Phase1 KPI**:
- [ ] node_modulesãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆç‡: 100%ï¼ˆ7/7ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
- [ ] AIåˆ†æ¥­åŠ¹ç‡: å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«æ•°50%å‰Šæ¸›é”æˆ
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™: 500è¡Œä»¥ä¸‹100%éµå®ˆ
- [ ] æ©Ÿèƒ½å†ç¾ç‡: æ—¢å­˜HTMLæ©Ÿèƒ½100%å†ç¾
- [ ] CORSåˆ¶é™å›é¿: ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œ100%æˆåŠŸ

**Phase2 KPI**:
- [ ] éç ´å£Šå¤‰å½¢å“è³ª: 360åº¦å›è»¢å¾©å…ƒç‡100%
- [ ] ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½å®Œæˆåº¦: 15é …ç›®æ©Ÿèƒ½100%å®Ÿè£…
- [ ] ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¯¾å¿œç‡: 10ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ100%å¯¾å¿œ
- [ ] æç”»ãƒ„ãƒ¼ãƒ«å®Œæˆåº¦: 4ãƒ„ãƒ¼ãƒ«100%å®Ÿè£…
- [ ] æ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ´»ç”¨ç‡: 80%ä»¥ä¸Šã®æ©Ÿèƒ½ã§æ´»ç”¨

---

## ğŸ”§ å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ»æŠ€è¡“è©³ç´°

### node_modulesçµ±åˆå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// å®Ÿè£…ç¢ºèªç”¨ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
class NodeModulesIntegrationChecker {
    checkIntegration() {
        const results = [];
        
        // 1. PixiJSæœ¬ä½“ç¢ºèª
        results.push(this.checkLibrary('PIXI', './node_modules/pixi.js/dist/pixi.min.js'));
        
        // 2. @pixi/uiç¢ºèª
        results.push(this.checkLibrary('PIXI.UI', './node_modules/@pixi/ui/dist/ui.min.js'));
        
        // 3. @pixi/layersç¢ºèª
        results.push(this.checkLibrary('PIXI.display', './node_modules/@pixi/layers/dist/layers.min.js'));
        
        // 4. ãã®ä»–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç¢ºèª
        results.push(this.checkLibrary('gsap', './node_modules/gsap/dist/gsap.min.js'));
        results.push(this.checkLibrary('_', './node_modules/lodash/lodash.min.js'));
        results.push(this.checkLibrary('Hammer', './node_modules/hammerjs/hammer.min.js'));
        
        return results;
    }
    
    checkLibrary(globalName, expectedPath) {
        const available = !!window[globalName];
        return {
            name: globalName,
            path: expectedPath,
            available: available,
            version: available ? this.getVersion(globalName) : null
        };
    }
    
    getVersion(globalName) {
        const lib = window[globalName];
        return lib?.VERSION || lib?.version || 'unknown';
    }
}
```

### AIåˆ†æ¥­é–‹ç™ºå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// AIåˆ†æ¥­æƒ…å ±ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆæ¨™æº–åŒ–ï¼‰
/**
 * ğŸ¨ ãµãŸã°â˜†ã¡ã‚ƒã‚“ã­ã‚‹é¢¨ãƒ™ã‚¯ã‚¿ãƒ¼ãŠçµµæããƒ„ãƒ¼ãƒ« v1.0
 * 
 * ğŸ¯ AI_WORK_SCOPE: [å…·ä½“çš„æ©Ÿèƒ½èª¬æ˜]
 * ğŸ¯ DEPENDENCIES: [å¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ] 
 * ğŸ¯ NODE_MODULES: [ä½¿ç”¨node_modulesãƒ©ã‚¤ãƒ–ãƒ©ãƒª]
 * ğŸ¯ PIXI_EXTENSIONS: [ä½¿ç”¨æ‹¡å¼µæ©Ÿèƒ½]
 * ğŸ¯ ISOLATION_TEST: [å˜ä½“ãƒ†ã‚¹ãƒˆå¯å¦]
 * ğŸ¯ SPLIT_THRESHOLD: [åˆ†å‰²åŸºæº–ãƒ»åˆ†å‰²å…ˆ]
 * 
 * ğŸ“‹ PHASE_TARGET: Phase[1|2] 
 * ğŸ“‹ V8_MIGRATION: [v8ç§»è¡Œæ™‚ã®å¯¾å¿œå†…å®¹]
 * ğŸ“‹ PERFORMANCE_TARGET: [æ€§èƒ½ç›®æ¨™]
 */

// ä½¿ç”¨ä¾‹ï¼šãƒšãƒ³ãƒ„ãƒ¼ãƒ«
/**
 * ğŸ¯ AI_WORK_SCOPE: ãƒ™ã‚¯ã‚¿ãƒ¼ãƒšãƒ³æç”»æ©Ÿèƒ½ãƒ»ç­†åœ§å¯¾å¿œãƒ»è¨­å®šç®¡ç†
 * ğŸ¯ DEPENDENCIES: libs/pixi-extensions.js, js/main.js, js/app-core.js, js/managers/tool-manager.js
 * ğŸ¯ NODE_MODULES: pixi.jsï¼ˆGraphics, Containerä½¿ç”¨ï¼‰
 * ğŸ¯ PIXI_EXTENSIONS: ãªã—ï¼ˆåŸºæœ¬PIXIæ©Ÿèƒ½ã®ã¿ï¼‰
 * ğŸ¯ ISOLATION_TEST: âœ… å˜ä½“ãƒ†ã‚¹ãƒˆå¯èƒ½
 * ğŸ¯ SPLIT_THRESHOLD: 300è¡Œè¶…éæ™‚ â†’ pen-settings.jsåˆ†å‰²
 * 
 * ğŸ“‹ PHASE_TARGET: Phase1
 * ğŸ“‹ V8_MIGRATION: Graphics APIå¤‰æ›´å¯¾å¿œäºˆå®š
 * ğŸ“‹ PERFORMANCE_TARGET: 60FPSå®‰å®šæç”»
 */
```

### æ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// çµ±ä¸€çš„ãªæ‹¡å¼µãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
class ExtensionUsagePattern {
    constructor() {
        this.extensions = window.PixiExtensions;
    }
    
    // ãƒ‘ã‚¿ãƒ¼ãƒ³1: æ¡ä»¶ä»˜ãä½¿ç”¨
    createUI() {
        if (this.extensions.hasFeature('ui')) {chrome://vivaldi-webui/startpage?section=Speed-dials&background-color=#f7f7f7
            // @pixi/uiä½¿ç”¨
            return this.createPixiUIComponents();
        } else {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…
            return this.createBasicUIComponents();
        }
    }
    
    // ãƒ‘ã‚¿ãƒ¼ãƒ³2: æ€§èƒ½æœ€é©åŒ–
    optimizeProcessing(data) {
        if (this.extensions.hasFeature('lodash')) {
            // Lodashä½¿ç”¨ã§é«˜é€ŸåŒ–
            const _ = this.extensions.getComponent('lodash', '_');
            return _.chunk(data, 1000);
        } else {
            // åŸºæœ¬å®Ÿè£…
            return this.basicChunk(data, 1000);
        }
    }
    
    // ãƒ‘ã‚¿ãƒ¼ãƒ³3: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–
    createAnimation(target) {
        if (this.extensions.hasFeature('gsap')) {
            // GSAPä½¿ç”¨ã§ã‚¹ãƒ ãƒ¼ã‚ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const gsap = this.extensions.getComponent('gsap', 'gsap');
            return gsap.to(target, { duration: 1, alpha: 0 });
        } else {
            // åŸºæœ¬PIXI Tickerã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            return this.basicAnimation(target);
        }
    }
}
```

---

## ğŸ“ æ¬¡ã‚¹ãƒ†ãƒƒãƒ—ãƒ»å®Ÿè£…é–‹å§‹æ‰‹é †

### å³æ™‚é–‹å§‹å¯èƒ½ã‚¿ã‚¹ã‚¯ï¼ˆPhase1.1ï¼‰

1. **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆä½œæˆ**ï¼ˆé–‹å§‹å¯èƒ½ï¼‰
   ```bash
   # åŸºæœ¬æ§‹æˆä½œæˆ
   mkdir -p tegaki/{css,libs,js/{managers,tools,ui,utils,transform,layers}}
   
   # package.jsonç¢ºèªï¼ˆæ—¢å­˜æ´»ç”¨ï¼‰
   npm install  # ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   ```

2. **index.htmlä½œæˆ**ï¼ˆé–‹å§‹å¯èƒ½ï¼‰
   ```html
   <!-- node_modulesçµ±åˆç‰ˆä½œæˆ -->
   <!-- CDNâ†’./node_modules/ ãƒ‘ã‚¹å¤‰æ›´ -->
   <!-- libs/pixi-extensions.jsè¿½åŠ  -->
   ```

3. **libs/pixi-extensions.jså®Ÿè£…**ï¼ˆé–‹å§‹å¯èƒ½ï¼‰
   ```javascript
   // æ‹¡å¼µçµ±åˆåŸºç›¤å®Ÿè£…ï¼ˆ300è¡Œä»¥ä¸‹ï¼‰
   // ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ¤œå‡ºãƒ»çµ±åˆãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
   ```

### Phase1å®Ÿè£…é †åºï¼ˆæ¨å¥¨ï¼‰

**Week 1**: åŸºç›¤åˆ†å‰²ãƒ»node_modulesçµ±åˆ
- [ ] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆä½œæˆãƒ»package.jsonæ´»ç”¨
- [ ] index.htmlï¼ˆnode_modulesçµ±åˆç‰ˆï¼‰ä½œæˆ
- [ ] css/styles.cssåˆ†é›¢ãƒ»æ•´ç†
- [ ] libs/pixi-extensions.jsï¼ˆæ‹¡å¼µçµ±åˆåŸºç›¤ï¼‰å®Ÿè£…

**Week 2**: JavaScriptæ©Ÿèƒ½åˆ†å‰²ãƒ»Manageréšå±¤
- [ ] js/main.jsï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼‰ä½œæˆ
- [ ] js/app-core.jsï¼ˆPixiJSåŸºç›¤ï¼‰åˆ†é›¢
- [ ] js/managers/ui-manager.jså®Ÿè£…
- [ ] js/managers/tool-manager.jså®Ÿè£…

**Week 3**: AIåˆ†æ¥­åŸºç›¤ãƒ»ãƒ†ã‚¹ãƒˆå®Ÿè£…
- [ ] AIåˆ†æ¥­ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ
- [ ] js/tools/pen-tool.jsåˆ†é›¢ãƒ»æ‹¡å¼µçµ±åˆ
- [ ] Phase1å“è³ªãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ»å®Ÿè¡Œ

### å„ªå…ˆåº¦ãƒ»ä¾å­˜é–¢ä¿‚

**æœ€å„ªå…ˆå®Ÿè£…**ï¼ˆPhase1åŸºç›¤ï¼‰:
1. package.jsonæ´»ç”¨ãƒ»node_modulesç¢ºèª
2. libs/pixi-extensions.jsï¼ˆæ‹¡å¼µçµ±åˆåŸºç›¤ï¼‰
3. index.htmlï¼ˆnode_modulesçµ±åˆç‰ˆï¼‰
4. js/main.jsï¼ˆåˆæœŸåŒ–ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼‰

**æ¬¡å„ªå…ˆå®Ÿè£…**ï¼ˆPhase1æ©Ÿèƒ½ï¼‰:
1. js/app-core.jsï¼ˆPixiJSåŸºç›¤ï¼‰
2. js/managers/ï¼ˆçµ±æ‹¬ç®¡ç†å±¤ï¼‰
3. js/tools/pen-tool.jsï¼ˆAIåˆ†æ¥­ãƒ†ã‚¹ãƒˆå¯¾è±¡ï¼‰

**å¾Œç¶šå®Ÿè£…**ï¼ˆPhase2æº–å‚™ï¼‰:
1. js/layers/layer-manager.jsåŸºç›¤
2. js/transform/vector-transform.jsåŸºç›¤
3. éç ´å£Šå¤‰å½¢ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤

---

## ğŸ¬ Phase3-4äºˆå‘Šãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆ

### Phase3: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆv7æœ€çµ‚ç‰ˆï¼‰
**æœŸé–“**: 6é€±é–“ãƒ»ç›®æ¨™: GIFã‚¢ãƒ‹ãƒ¡åˆ¶ä½œç’°å¢ƒå®Œæˆ

#### ä¸»è¦æ©Ÿèƒ½
- **ãƒ•ãƒ¬ãƒ¼ãƒ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ è¤‡è£½ãƒ»ã‚µãƒ ãƒã‚¤ãƒ«
- **ã‚ªãƒ‹ã‚ªãƒ³ã‚¹ã‚­ãƒ³æ©Ÿèƒ½**: å‰å¾Œãƒ•ãƒ¬ãƒ¼ãƒ åŠé€æ˜è¡¨ç¤ºãƒ»è‰²åˆ†ã‘è¡¨ç¤º
- **GIFã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: é«˜å“è³ªGIFå‡ºåŠ›ãƒ»åœ§ç¸®æœ€é©åŒ–ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å†ç”Ÿãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆèª¿æ•´

#### æŠ€è¡“è¦ç´ 
- **@pixi/gifæ´»ç”¨**: GIFã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ±åˆï¼ˆåˆ©ç”¨å¯èƒ½æ™‚ï¼‰
- **GSAPçµ±åˆ**: ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ“ä½œãƒ»ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°æ©Ÿèƒ½
- **ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–**: å¤§é‡ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†ãƒ»ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æœ€é©åŒ–

### Phase4: PixiJS v8ç§»è¡Œï¼ˆæ¬¡ä¸–ä»£ç‰ˆï¼‰
**æœŸé–“**: 8é€±é–“ãƒ»ç›®æ¨™: WebGPUãƒ»120FPSãƒ»SPINEçµ±åˆ

#### ä¸»è¦æ©Ÿèƒ½
- **v8å®Œå…¨ç§»è¡Œ**: æ–°APIå¯¾å¿œãƒ»äº’æ›æ€§ãƒ¬ã‚¤ãƒ¤ãƒ¼å®Œæˆ
- **WebGPU Renderer**: GPUæ´»ç”¨ãƒ»æç”»æ€§èƒ½å‘ä¸Š
- **120FPSæç”»**: é«˜å‘¨æ³¢æ•°æç”»ãƒ»VSyncåˆ¶å¾¡
- **SPINEçµ±åˆ**: ãƒœãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»Live2Dæº–å‚™

#### æŠ€è¡“è¦ç´ 
- **WebGPUæœ€é©åŒ–**: Compute Shaderæ´»ç”¨ãƒ»ãƒãƒƒãƒå‡¦ç†æœ€é©åŒ–
- **Chrome Scheduling API**: é«˜å„ªå…ˆåº¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ åˆ¶å¾¡
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–**: WebGPU Bufferç®¡ç†ãƒ»ãƒªã‚½ãƒ¼ã‚¹æœ€é©åŒ–

---

*ğŸ¨ ãµãŸã°â˜†ã¡ã‚ƒã‚“ã­ã‚‹é¢¨ãŠçµµæããƒ„ãƒ¼ãƒ« ç§»è¡Œè¨ˆç”»æ›¸ Phase1-2ç‰ˆ*  
*ä½œæˆæ—¥: 2025å¹´8æœˆ15æ—¥*  
*å¯¾å¿œæŠ€è¡“: HTMLå˜ä½“â†’node_modulesåˆ†å‰²â†’æç”»æ©Ÿèƒ½å®Œæˆ*  
*åŸºæœ¬æ–¹é‡: ãƒ­ãƒ¼ã‚«ãƒ«ä¾å­˜ãƒ»CORSåˆ¶é™å›é¿ãƒ»AIå”åƒé–‹ç™ºãƒ»éç ´å£Šå“è³ªä¿è¨¼*