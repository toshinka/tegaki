# ğŸ¨ Tegaki ã‚·ãƒ³ãƒœãƒ«è¾å…¸ v13 - è²¬ä»»åˆ†ç•Œãƒ»åŒ…æ‹¬çµ±åˆç‰ˆ

## ğŸ“‹ å½¹å‰²å®šç¾©ï¼ˆè²¬ä»»åˆ†ç•Œï¼‰

### ğŸ“š ã“ã®è¾å…¸ã®å½¹å‰²
- **ç”¨èªãƒ»è¨˜å·ãƒ»APIã®çµ±ä¸€çš„å®šç¾©ã¨æ„å‘³ä»˜ã‘ã‚’ç®¡ç†**
- **å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚³ãƒ¼ãƒ‰ã§ã®ä¸€è²«æ€§ã‚’ä¿è¨¼**
- **Claudeæ”¹ä¿®æ™‚ã®å‚ç…§åŸºæº–ã¨ã—ã¦æ©Ÿèƒ½**

### ğŸ”„ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®è²¬ä»»åˆ†ç•Œ
```markdown
ğŸ“– Rulebookï¼ˆæŒ‡é‡ç­–å®šï¼‰
â”œâ”€â”€ æ§‹é€ ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»å“è³ªåŸºæº–
â”œâ”€â”€ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡ãƒ»ç§»è¡Œæˆ¦ç•¥
â””â”€â”€ é–‹ç™ºæ–¹é‡ãƒ»è¨­è¨ˆæ€æƒ³

ğŸ“‹ ã‚·ãƒ³ãƒœãƒ«è¾å…¸ï¼ˆç”¨èªçµ±ä¸€ï¼‰â† æœ¬æ–‡æ›¸
â”œâ”€â”€ ç”¨èªãƒ»è¨˜å·ãƒ»APIã®çµ±ä¸€å®šç¾©
â”œâ”€â”€ ä¸€è²«æ€§ä¿è¨¼ãƒ»æ„å‘³ä»˜ã‘ç®¡ç†
â””â”€â”€ Claudeæ”¹ä¿®æ™‚ã®å‚ç…§åŸºæº–

ğŸ“‘ è¨ˆç”»æ›¸ï¼ˆå®Ÿè£…æ‰‹é †ï¼‰
â”œâ”€â”€ å…·ä½“çš„æ‰‹é †ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥è©³ç´°
â”œâ”€â”€ å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆæ‰‹é †
â””â”€â”€ æ®µéšçš„æ”¹ä¿®ãƒ—ãƒ­ã‚»ã‚¹
```

---

## ğŸ—‚ï¸ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ãƒ„ãƒªãƒ¼ï¼ˆPhase1.5å¯¾å¿œï¼‰

### ğŸ“ ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
```
ğŸ“¦ Tegaki v2_Phase1.5/
â”œâ”€â”€ ğŸ“„ index.html                     # HTMLæ§‹é€ å®šç¾©å°‚é–€
â”œâ”€â”€ ğŸ“„ package.json                   # Node.jsä¾å­˜é–¢ä¿‚å®šç¾©
â”œâ”€â”€ ğŸ“„ package-lock.json              # ä¾å­˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š
â”œâ”€â”€ ğŸ“ css/
â”‚   â””â”€â”€ ğŸ“„ styles.css                 # çµ±åˆã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†å°‚é–€
â”œâ”€â”€ ğŸ“ js/
â”‚   â”œâ”€â”€ ğŸ“„ bootstrap.js               # ä¾å­˜é–¢ä¿‚ç®¡ç†å°‚é–€
â”‚   â”œâ”€â”€ ğŸ“„ main.js                    # åˆæœŸåŒ–çµ±åˆå°‚é–€
â”‚   â”œâ”€â”€ ğŸ“„ app-core.js                # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµ±åˆç®¡ç†
â”‚   â””â”€â”€ ğŸ“ utils/                     # åŸºç›¤ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ç¾¤
â”‚       â”œâ”€â”€ ğŸ“„ config-manager.js      # è¨­å®šç®¡ç†çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
â”‚       â”œâ”€â”€ ğŸ“„ error-manager.js       # ã‚¨ãƒ©ãƒ¼å‡¦ç†çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
â”‚       â”œâ”€â”€ ğŸ“„ state-manager.js       # çŠ¶æ…‹ç®¡ç†çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
â”‚       â”œâ”€â”€ ğŸ“„ event-bus.js           # ã‚¤ãƒ™ãƒ³ãƒˆé€šä¿¡çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
â”‚       â”œâ”€â”€ ğŸ“„ coordinate-manager.js  # åº§æ¨™å¤‰æ›çµ±åˆç®¡ç†
â”‚       â”œâ”€â”€ ğŸ“„ icon-manager.js        # ã‚¢ã‚¤ã‚³ãƒ³ç®¡ç†
â”‚       â””â”€â”€ ğŸ“„ performance.js         # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
â”œâ”€â”€ ğŸ“ managers/                      # å°‚é–€ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ç¾¤
â”‚   â”œâ”€â”€ ğŸ“„ canvas-manager.js          # ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹ç®¡ç†å°‚é–€
â”‚   â”œâ”€â”€ ğŸ“„ tool-manager.js            # ãƒ„ãƒ¼ãƒ«çµ±åˆç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ ui-manager.js              # UIçŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ memory-manager.js          # ãƒ¡ãƒ¢ãƒªãƒ»ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ settings-manager.js        # è¨­å®šUIç®¡ç†
â”‚   â””â”€â”€ ğŸ“„ boundary-manager.js        # å¢ƒç•Œãƒ»åˆ¶é™ç®¡ç†
â”œâ”€â”€ ğŸ“ tools/                         # æç”»ãƒ„ãƒ¼ãƒ«ç¾¤
â”‚   â”œâ”€â”€ ğŸ“„ abstract-tool.js           # åŸºåº•ãƒ„ãƒ¼ãƒ«ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ ğŸ“„ pen-tool.js                # ãƒšãƒ³ãƒ„ãƒ¼ãƒ«å®Ÿè£…
â”‚   â””â”€â”€ ğŸ“„ eraser-tool.js             # æ¶ˆã—ã‚´ãƒ ãƒ„ãƒ¼ãƒ«å®Ÿè£…
â”œâ”€â”€ ğŸ“ js/ui/                         # UIå°‚é–€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ğŸ“„ popup-manager.js           # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ç®¡ç†
â”‚   â””â”€â”€ ğŸ“„ slider-manager.js          # ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ç®¡ç†
â””â”€â”€ ğŸ“ libs/                          # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ‹¡å¼µ
    â””â”€â”€ ğŸ“„ pixi-extensions.js         # PixiJSæ‹¡å¼µæ©Ÿèƒ½
```

---

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ åˆ†é¡ãƒ»è²¬ä»»å¢ƒç•Œå®šç¾©

### ğŸš€ Phase1.5 REVç³»è²¬ä»»åˆ†ç•Œ

#### ğŸ“ æ§‹é€ ãƒ»è¡¨ç¤ºè²¬ä»»ï¼ˆHTML/CSSï¼‰
```javascript
// HTMLæ§‹é€ å®šç¾©å°‚é–€
index.html {
  RESPONSIBILITY: "DOMæ§‹é€ å®šç¾©ã®ã¿"
  PROHIBITED: "ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»JavaScriptãƒ»åˆæœŸåŒ–å‡¦ç†"
  ALLOWED: "åŸºæœ¬HTMLè¦ç´ ãƒ»ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ§‹é€ ãƒ»å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹å‚ç…§"
}

// CSSçµ±åˆç®¡ç†å°‚é–€  
styles.css {
  RESPONSIBILITY: "ã‚¹ã‚¿ã‚¤ãƒ«çµ±åˆãƒ»ãƒ†ãƒ¼ãƒç®¡ç†"
  PROHIBITED: "JavaScriptå‡¦ç†ãƒ»åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯"
  ALLOWED: "CSSå¤‰æ•°ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒ†ãƒ¼ãƒ"
}
```

#### ğŸš€ Bootstrapç³»è²¬ä»»ï¼ˆä¾å­˜é–¢ä¿‚ç®¡ç†å°‚é–€ï¼‰
```javascript
// ä¾å­˜é–¢ä¿‚ç®¡ç†å°‚é–€ãƒ•ã‚¡ã‚¤ãƒ«
js/bootstrap.js {
  RESPONSIBILITY: "ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾å­˜é–¢ä¿‚é †åºç®¡ç†ãƒ»main.jså§”è­²"
  PROHIBITED: "UIå‡¦ç†ãƒ»ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãƒ»åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯ãƒ»æç”»å‡¦ç†"
  ALLOWED: "ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ãƒ»é †åºåˆ¶å¾¡ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ãƒ»PIXIç¢ºèª"
  
  // ä¸»è¦API
  loadScript(src): Promise             // å˜ä¸€ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿
  loadDependencies(): Promise          // å…¨ä¾å­˜é–¢ä¿‚é †æ¬¡èª­ã¿è¾¼ã¿
  checkPixiAndStart(): void            // PIXIç¢ºèªãƒ»é–‹å§‹åˆ¶å¾¡
  
  // ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
  'tegaki:dependencies:loaded'         // ä¾å­˜é–¢ä¿‚èª­ã¿è¾¼ã¿å®Œäº†
  'tegaki:dependencies:error'          // ä¾å­˜é–¢ä¿‚èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼
}
```

#### ğŸ”§ MainåˆæœŸåŒ–ç³»è²¬ä»»ï¼ˆçµ±åˆå°‚é–€ï¼‰
```javascript
// åˆæœŸåŒ–çµ±åˆå°‚é–€ãƒ•ã‚¡ã‚¤ãƒ«  
js/main.js {
  RESPONSIBILITY: "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–çµ±åˆãƒ»çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ å§”è­²"
  PROHIBITED: "ç›´æ¥æç”»ãƒ»UIæ“ä½œãƒ»ã‚¹ã‚¿ã‚¤ãƒ«å‡¦ç†ãƒ»ä¾å­˜é–¢ä¿‚ç®¡ç†"
  ALLOWED: "åˆæœŸåŒ–åˆ¶å¾¡ãƒ»AppCoreå§”è­²ãƒ»çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ»è¨ºæ–­æ©Ÿèƒ½"
  
  // ä¸»è¦API  
  TegakiApplication.initialize(): Promise    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
  setupBootstrapListeners(): void           // Bootstrapä¾å­˜é–¢ä¿‚å¾…æ©Ÿ
  checkCanvasContainerReady(): boolean      // ã‚­ãƒ£ãƒ³ãƒã‚¹è¦ç´ ç¢ºå®Ÿæ€§ç¢ºèª
  tryInitialize(): Promise                  // åˆæœŸåŒ–æ¡ä»¶ç¢ºèªãƒ»å®Ÿè¡Œ
  executeInitializationRegistry(): void     // åˆæœŸåŒ–ãƒ¬ã‚¸ã‚¹ãƒˆãƒªå®Ÿè¡Œ
  initializeAppCore(): Promise              // AppCoreåˆæœŸåŒ–å§”è­²
  getApplicationStatus(): object            // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹å–å¾—
  healthCheck(): object                     // å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯
}
```

---

## ğŸ—ï¸ çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ  APIå®šç¾©ï¼ˆ4åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ï¼‰

### ğŸ”§ ConfigManager - è¨­å®šç®¡ç†çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
```javascript
window.Tegaki.ConfigManagerInstance {
  RESPONSIBILITY: "å…¨è¨­å®šã®çµ±ä¸€ç®¡ç†ãƒ»ãƒ†ãƒ¼ãƒãƒ»ç’°å¢ƒè¨­å®š"
  
  // åŸºæœ¬è¨­å®šAPI
  get(key): any                       // è¨­å®šå€¤å–å¾—
  set(key, value): void               // è¨­å®šå€¤è¨­å®š
  has(key): boolean                   // è¨­å®šå­˜åœ¨ç¢ºèª
  save(): void                        // è¨­å®šæ°¸ç¶šåŒ–
  load(): void                        // è¨­å®šèª­ã¿è¾¼ã¿
  
  // å°‚é–€è¨­å®šAPI
  getCanvasConfig(): object           // ã‚­ãƒ£ãƒ³ãƒã‚¹è¨­å®šå–å¾—
  getPixiConfig(): object             // PixiJSè¨­å®šå–å¾—
  getToolConfig(toolId): object       // ãƒ„ãƒ¼ãƒ«è¨­å®šå–å¾—
  getThemeConfig(): object            // ãƒ†ãƒ¼ãƒè¨­å®šå–å¾—
  getUIConfig(): object               // UIè¨­å®šå–å¾—
  
  // ãƒ†ãƒ¼ãƒãƒ»è‰²å½©API
  getFutabaTheme(): object            // ãµãŸã°â˜†ã¡ã‚ƒã‚“ã­ã‚‹é¢¨ãƒ†ãƒ¼ãƒ
  getColorPalette(): array            // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆå–å¾—
  getDarkMode(): boolean              // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ¤å®š
}
```

### ğŸš¨ ErrorManager - ã‚¨ãƒ©ãƒ¼å‡¦ç†çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ   
```javascript
window.Tegaki.ErrorManagerInstance {
  RESPONSIBILITY: "å…¨ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥ãƒ»ãƒ­ã‚°ç®¡ç†"
  
  // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºAPI
  showError(type, message, options): void    // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
  showWarning(message, options): void        // è­¦å‘Šè¡¨ç¤º  
  showInfo(message, options): void           // æƒ…å ±è¡¨ç¤º
  showSuccess(message, options): void        // æˆåŠŸè¡¨ç¤º
  
  // ã‚¨ãƒ©ãƒ¼åˆ†é¡API
  classifyError(error): string               // ã‚¨ãƒ©ãƒ¼åˆ†é¡
  isRecoverableError(error): boolean         // å›å¾©å¯èƒ½åˆ¤å®š
  shouldShowToUser(error): boolean           // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡¨ç¤ºåˆ¤å®š
  
  // ãƒ­ã‚°ç®¡ç†API
  logError(error, context): void             // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨˜éŒ²
  getErrorHistory(): array                   // ã‚¨ãƒ©ãƒ¼å±¥æ­´å–å¾—
  clearErrorHistory(): void                  // ã‚¨ãƒ©ãƒ¼å±¥æ­´ã‚¯ãƒªã‚¢
}
```

### ğŸ“Š StateManager - çŠ¶æ…‹ç®¡ç†çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
```javascript  
window.Tegaki.StateManagerInstance {
  RESPONSIBILITY: "å…¨çŠ¶æ…‹ãƒ»å±¥æ­´ãƒ»Undo/Redoç®¡ç†"
  
  // çŠ¶æ…‹ç®¡ç†API
  updateComponentState(component, key, value): void  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçŠ¶æ…‹æ›´æ–°
  getComponentState(component, key): any             // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçŠ¶æ…‹å–å¾—  
  hasComponentState(component, key): boolean         // çŠ¶æ…‹å­˜åœ¨ç¢ºèª
  
  // å±¥æ­´ç®¡ç†API
  pushState(state): void                    // çŠ¶æ…‹å±¥æ­´è¿½åŠ 
  popState(): object                        // çŠ¶æ…‹å±¥æ­´å–å¾—
  canUndo(): boolean                        // Undoå¯èƒ½åˆ¤å®š
  canRedo(): boolean                        // Redoå¯èƒ½åˆ¤å®š
  undo(): boolean                           // Undoå®Ÿè¡Œ
  redo(): boolean                           // Redoå®Ÿè¡Œ
  
  // æç”»å±¥æ­´APIï¼ˆPhase2æº–å‚™ï¼‰
  recordStroke(strokeData): void            // æç”»å±¥æ­´è¨˜éŒ²
  getStrokeHistory(): array                 // æç”»å±¥æ­´å–å¾—
  clearStrokeHistory(): void                // æç”»å±¥æ­´ã‚¯ãƒªã‚¢
}
```

### ğŸ”„ EventBus - ã‚¤ãƒ™ãƒ³ãƒˆé€šä¿¡çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ 
```javascript
window.Tegaki.EventBusInstance {
  RESPONSIBILITY: "å…¨ã‚¤ãƒ™ãƒ³ãƒˆé€šä¿¡ãƒ»ç–çµåˆåˆ¶å¾¡"
  
  // åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆAPI
  on(eventType, callback): void             // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
  off(eventType, callback): void            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼å‰Šé™¤
  emit(eventType, data): void               // ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
  safeEmit(eventType, data): void           // å®‰å…¨ãªã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
  
  // ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†API
  hasListeners(eventType): boolean          // ãƒªã‚¹ãƒŠãƒ¼å­˜åœ¨ç¢ºèª
  getListenerCount(eventType): number       // ãƒªã‚¹ãƒŠãƒ¼æ•°å–å¾—
  clearListeners(eventType): void           // ãƒªã‚¹ãƒŠãƒ¼ã™ã¹ã¦å‰Šé™¤
  
  // æ¨™æº–ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
  'app:initialized'                         // ã‚¢ãƒ—ãƒªåˆæœŸåŒ–å®Œäº†
  'canvas:initialized'                      // ã‚­ãƒ£ãƒ³ãƒã‚¹åˆæœŸåŒ–å®Œäº†
  'tool:changed'                           // ãƒ„ãƒ¼ãƒ«å¤‰æ›´
  'drawing:started'                        // æç”»é–‹å§‹  
  'drawing:ended'                          // æç”»çµ‚äº†
  'error:occurred'                         // ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
}
```

---

## ğŸ¨ å°‚é–€ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  APIå®šç¾©

### ğŸ“ CoordinateManager - åº§æ¨™å¤‰æ›çµ±åˆç®¡ç†
```javascript
window.Tegaki.CoordinateManagerInstance {
  RESPONSIBILITY: "å…¨åº§æ¨™å¤‰æ›ãƒ»ç”»é¢åº§æ¨™ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹åº§æ¨™å¤‰æ›"
  
  // åº§æ¨™å¤‰æ›APIï¼ˆçµ±ä¸€ãƒ»é‡è¤‡æ’é™¤ï¼‰
  extractPointerCoordinates(event, rect, pixiApp): object  // ãƒã‚¤ãƒ³ã‚¿ãƒ¼åº§æ¨™æŠ½å‡º
  screenToCanvas(x, y): object                             // ç”»é¢â†’ã‚­ãƒ£ãƒ³ãƒã‚¹åº§æ¨™
  canvasToScreen(x, y): object                             // ã‚­ãƒ£ãƒ³ãƒã‚¹â†’ç”»é¢åº§æ¨™
  
  // ã‚­ãƒ£ãƒ³ãƒã‚¹æƒ…å ±API
  updateCanvasSize(width, height): void     // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºæ›´æ–°
  getCanvasSize(): object                   // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºå–å¾—
  
  // å¢ƒç•Œãƒ»åˆ¶é™API
  isWithinBounds(x, y): boolean             // å¢ƒç•Œå†…åˆ¤å®š
  clampToCanvas(x, y): object               // ã‚­ãƒ£ãƒ³ãƒã‚¹å†…åˆ¶é™
}
```

### ğŸ¨ CanvasManager - ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹ç®¡ç†å°‚é–€
```javascript  
window.Tegaki.CanvasManagerInstance {
  RESPONSIBILITY: "ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹é…ç½®ãƒ»PixiJS Applicationç®¡ç†"
  PROHIBITED: "ç›´æ¥æç”»å‡¦ç†ãƒ»ãƒ„ãƒ¼ãƒ«å‡¦ç†ãƒ»åº§æ¨™å¤‰æ›"
  
  // åˆæœŸåŒ–API
  initialize(options): Promise<boolean>     // CanvasManageråˆæœŸåŒ–
  
  // ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†APIï¼ˆä¸»è²¬å‹™ï¼‰
  addLayer(layerId, type, options): PIXI.Container     // ãƒ¬ã‚¤ãƒ¤ãƒ¼è¿½åŠ 
  getLayer(layerId): PIXI.Container                    // ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
  removeLayer(layerId): boolean                        // ãƒ¬ã‚¤ãƒ¤ãƒ¼å‰Šé™¤
  addGraphicsToLayer(graphics, layerId): boolean       // Graphicsé…ç½®
  
  // ã‚­ãƒ£ãƒ³ãƒã‚¹ç®¡ç†API
  getPixiApp(): PIXI.Application            // PIXI Applicationå–å¾—
  getStage(): PIXI.Container                // ã‚¹ãƒ†ãƒ¼ã‚¸å–å¾—
  resize(width, height): boolean            // ãƒªã‚µã‚¤ã‚ºå‡¦ç†
  clear(): void                             // å…¨ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒªã‚¢
  
  // è¨ºæ–­API
  getDiagnosticInfo(): object               // è¨ºæ–­æƒ…å ±å–å¾—
  getCoordinateIntegrationState(): object   // åº§æ¨™çµ±åˆçŠ¶æ…‹å–å¾—
}
```

### ğŸ”§ ToolManager - ãƒ„ãƒ¼ãƒ«çµ±åˆç®¡ç†
```javascript
window.Tegaki.ToolManagerInstance {
  RESPONSIBILITY: "ãƒ„ãƒ¼ãƒ«åˆ‡ã‚Šæ›¿ãˆãƒ»ç®¡ç†ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡"
  PROHIBITED: "ç›´æ¥æç”»å‡¦ç†ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹æ“ä½œãƒ»åº§æ¨™è¨ˆç®—"
  
  // ãƒ„ãƒ¼ãƒ«ç®¡ç†API
  registerTool(toolId, tool): void          // ãƒ„ãƒ¼ãƒ«ç™»éŒ²
  setTool(toolId): boolean                  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ„ãƒ¼ãƒ«è¨­å®š
  getTool(toolId): AbstractTool             // ãƒ„ãƒ¼ãƒ«å–å¾—
  getCurrentTool(): AbstractTool            // ç¾åœ¨ãƒ„ãƒ¼ãƒ«å–å¾—
  
  // ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡API
  handlePointerDown(event): void            // ãƒã‚¤ãƒ³ã‚¿ãƒ¼æŠ¼ä¸‹é…ä¿¡
  handlePointerMove(event): void            // ãƒã‚¤ãƒ³ã‚¿ãƒ¼ç§»å‹•é…ä¿¡
  handlePointerUp(event): void              // ãƒã‚¤ãƒ³ã‚¿ãƒ¼é›¢ä¸Šé…ä¿¡
}
```

---

## ğŸª UIç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  APIå®šç¾©

### ğŸ¨ UIManager - UIçŠ¶æ…‹ç®¡ç†
```javascript
window.Tegaki.UIManagerInstance {
  RESPONSIBILITY: "UIçŠ¶æ…‹ç®¡ç†ãƒ»ãƒœã‚¿ãƒ³çŠ¶æ…‹ãƒ»ãƒ‘ãƒãƒ«åˆ¶å¾¡"
  
  // UIçŠ¶æ…‹API
  updateToolButton(toolId, active): void    // ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³çŠ¶æ…‹æ›´æ–°
  updateStatusBar(info): void               // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼æ›´æ–°
  showPanel(panelId): void                  // ãƒ‘ãƒãƒ«è¡¨ç¤º
  hidePanel(panelId): void                  // ãƒ‘ãƒãƒ«éè¡¨ç¤º
  
  // è¨­å®šUIé€£æºAPI
  syncWithSettings(): void                  // è¨­å®šã¨ã®åŒæœŸ
  applyTheme(theme): void                   // ãƒ†ãƒ¼ãƒé©ç”¨
}
```

### ğŸª PopupManager - ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ç®¡ç†å°‚é–€
```javascript
window.Tegaki.PopupManagerInstance {
  RESPONSIBILITY: "ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ»ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ»é€šçŸ¥ç®¡ç†"
  
  // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—API
  showPopup(type, content, options): void   // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
  hidePopup(popupId): void                  // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—éè¡¨ç¤º
  hideAllPopups(): void                     // å…¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—éè¡¨ç¤º
  
  // é€šçŸ¥APIï¼ˆErrorManageré€£æºï¼‰
  showNotification(message, type, duration): void  // é€šçŸ¥è¡¨ç¤º
}
```

---

## ğŸ› ï¸ ãƒ„ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ  APIå®šç¾©

### ğŸ¨ AbstractTool - åŸºåº•ãƒ„ãƒ¼ãƒ«ã‚¯ãƒ©ã‚¹
```javascript
window.Tegaki.AbstractTool {
  RESPONSIBILITY: "ãƒ„ãƒ¼ãƒ«å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»åº§æ¨™å‡¦ç†å§”è­²"
  
  // çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆç¶™æ‰¿å¿…é ˆï¼‰
  onPointerDown(event, canvasManager, coordinateManager): void
  onPointerMove(event, canvasManager, coordinateManager): void  
  onPointerUp(event, canvasManager, coordinateManager): void
  
  // å…±é€šå‡¦ç†API
  extractCoordinates(event, coordinateManager): object    // åº§æ¨™å–å¾—å§”è­²
  createStrokeGraphics(options): PIXI.Graphics           // Graphicsç”Ÿæˆ
  
  // ãƒ„ãƒ¼ãƒ«è¨­å®šAPI
  configure(config): void               // ãƒ„ãƒ¼ãƒ«è¨­å®š
  getConfig(): object                   // ãƒ„ãƒ¼ãƒ«è¨­å®šå–å¾—
  reset(): void                         // ãƒ„ãƒ¼ãƒ«çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
}
```

### âœï¸ PenTool - ãƒšãƒ³ãƒ„ãƒ¼ãƒ«å®Ÿè£…
```javascript  
window.Tegaki.PenTool extends AbstractTool {
  RESPONSIBILITY: "ãƒšãƒ³æç”»ãƒ»ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ç”Ÿæˆ"
  
  // ãƒšãƒ³å°‚ç”¨API
  setStrokeWidth(width): void           // ç·šå¹…è¨­å®š
  setStrokeColor(color): void           // ç·šè‰²è¨­å®š
  startStroke(x, y): void               // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯é–‹å§‹
  continueStroke(x, y): void            // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ç¶™ç¶š
  endStroke(): void                     // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯çµ‚äº†
  
  // Graphicsä½œæˆAPI
  createStrokeGraphics(): PIXI.Graphics      // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ç”¨Graphicsä½œæˆ
  applyStrokeStyle(graphics): void           // ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨
}
```

### ğŸ§¹ EraserTool - æ¶ˆã—ã‚´ãƒ ãƒ„ãƒ¼ãƒ«å®Ÿè£…
```javascript
window.Tegaki.EraserTool extends AbstractTool {
  RESPONSIBILITY: "æ¶ˆå»å‡¦ç†ãƒ»Graphicså‰Šé™¤"
  
  // æ¶ˆå»å°‚ç”¨API
  setEraserSize(size): void             // æ¶ˆã—ã‚´ãƒ ã‚µã‚¤ã‚ºè¨­å®š
  erase(x, y): void                     // æ¶ˆå»å®Ÿè¡Œ
  getErasedGraphics(x, y): array        // æ¶ˆå»å¯¾è±¡Graphicså–å¾—
}
```

---

## ğŸ”§ æ‹¡å¼µãƒ»è£œåŠ©ã‚·ã‚¹ãƒ†ãƒ  APIå®šç¾©

### ğŸ“Š PerformanceManager - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```javascript
window.Tegaki.PerformanceManagerInstance {
  RESPONSIBILITY: "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ»æœ€é©åŒ–ãƒ»ç›£è¦–"
  
  // æ¸¬å®šAPI
  measureDrawingPerformance(callback): number     // æç”»æ€§èƒ½æ¸¬å®š
  measureMemoryUsage(): object                    // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æ¸¬å®š
  getFPS(): number                                // FPSå–å¾—
  
  // æœ€é©åŒ–API
  optimizeGraphics(graphics): void                // Graphicsæœ€é©åŒ–
  cleanupMemory(): void                           // ãƒ¡ãƒ¢ãƒªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
}
```

### ğŸ¨ IconManager - ã‚¢ã‚¤ã‚³ãƒ³ç®¡ç†
```javascript
window.Tegaki.IconManagerInstance {
  RESPONSIBILITY: "SVGã‚¢ã‚¤ã‚³ãƒ³ç®¡ç†ãƒ»å‹•çš„ç”Ÿæˆ"
  
  // ã‚¢ã‚¤ã‚³ãƒ³API
  getIcon(iconId): string               // SVGã‚¢ã‚¤ã‚³ãƒ³å–å¾—
  createToolIcon(toolId, active): string        // ãƒ„ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆ
  updateIconState(iconId, state): void           // ã‚¢ã‚¤ã‚³ãƒ³çŠ¶æ…‹æ›´æ–°
}
```

---

## ğŸš¨ å•é¡Œç™ºè¦‹ãƒ»ä¿®æ­£ãŒå¿…è¦ãªé …ç›®

### âŒ é‡è¤‡ãƒ»çŸ›ç›¾APIï¼ˆä¿®æ­£å¿…è¦ï¼‰
```javascript
// 1. åº§æ¨™å¤‰æ›ã®é‡è¤‡ï¼ˆè¦çµ±ä¸€ï¼‰
CoordinateManager.extractPointerCoordinates()  âœ… æ­£çµ±API
vs
PenToolå†…ã§ã®ç›´æ¥åº§æ¨™è¨ˆç®—                    âŒ å‰Šé™¤å¿…è¦

// 2. åˆæœŸåŒ–å‡¦ç†ã®é‡è¤‡ï¼ˆè¦çµ±ä¸€ï¼‰  
AppCore.initialize()                         âœ… æ­£çµ±API
vs  
CanvasManagerå†…ã§ã®ç‹¬ç«‹åˆæœŸåŒ–                âŒ å§”è­²å¿…é ˆ

// 3. ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®åˆ†æ•£ï¼ˆè¦çµ±ä¸€ï¼‰
ErrorManager.showError()                     âœ… æ­£çµ±API
vs
å„Managerå†…ã§ã®console.error()ç›´æ¥å®Ÿè¡Œ       âŒ å§”è­²å¿…é ˆ
```

### ğŸ”„ è²¬ä»»å¢ƒç•Œé•åï¼ˆä¿®æ­£å¿…è¦ï¼‰
```javascript
// 1. CanvasManagerå†…ã®æç”»å‡¦ç†ï¼ˆå‰Šé™¤å¿…è¦ï¼‰
CanvasManager.startDrawing()                 âŒ Toolè²¬å‹™
CanvasManager.continueDrawing()              âŒ Toolè²¬å‹™
â†’ Tool.onPointerDown/Move/Up()ã«å§”è­²         âœ… æ­£ã—ã„è²¬å‹™

// 2. bootstrap.jså†…ã®UIå‡¦ç†ï¼ˆå‰Šé™¤å¿…è¦ï¼‰
bootstrap.jsã§ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤º                   âŒ ErrorManagerè²¬å‹™
â†’ main.jsçµŒç”±ã§ErrorManagerå§”è­²              âœ… æ­£ã—ã„è²¬å‹™

// 3. main.jså†…ã®ç›´æ¥æç”»ï¼ˆå‰Šé™¤å¿…è¦ï¼‰
main.jså†…ã§ã®Canvasæ“ä½œ                      âŒ CanvasManagerè²¬å‹™
â†’ CanvasManagerçµŒç”±ã§ã®æ“ä½œ                  âœ… æ­£ã—ã„è²¬å‹™
```

### ğŸ“ å‘½åãƒ»å®šç¾©ã®æ›–æ˜§æ€§ï¼ˆæ˜ç¢ºåŒ–å¿…è¦ï¼‰
```javascript
// 1. initialize()ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ä¸çµ±ä¸€
CanvasManager.initialize(options)            âœ… çµ±ä¸€å½¢å¼
vs
ä»–Manager.initialize(param1, param2)        âŒ ä¸çµ±ä¸€

// 2. çŠ¶æ…‹å–å¾—ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘½åä¸çµ±ä¸€
getStatus() vs getState() vs getInfo()      âŒ ä¸çµ±ä¸€
â†’ getDiagnosticInfo()ã«çµ±ä¸€                  âœ… çµ±ä¸€å½¢å¼

// 3. ã‚¤ãƒ™ãƒ³ãƒˆå‘½åã®ä¸çµ±ä¸€
'canvas.initialized' vs 'canvas:initialized' âŒ ä¸çµ±ä¸€
â†’ ':' ã‚³ãƒ­ãƒ³å½¢å¼ã«çµ±ä¸€                       âœ… çµ±ä¸€å½¢å¼
```

---

## ğŸ“‹ Phase2ç§»è¡Œæº–å‚™ãƒã‚§ãƒƒã‚¯é …ç›®

### âœ… å®Œäº†å¿…é ˆé …ç›®
```javascript
// åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ 100%æº–å‚™
â–¡ 4çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ ï¼ˆConfig/Error/State/EventBusï¼‰å®Œå…¨å‹•ä½œ
â–¡ åº§æ¨™å¤‰æ›çµ±åˆï¼ˆCoordinateManagerï¼‰100%å§”è­²
â–¡ ã‚­ãƒ£ãƒ³ãƒã‚¹è¡¨ç¤ºå•é¡Œ100%è§£æ±º

// è²¬ä»»åˆ†ç•Œ100%éµå®ˆ  
â–¡ CanvasManager: ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†å°‚é–€åŒ–å®Œäº†
â–¡ Toolç³»: æç”»å‡¦ç†å®Œå…¨é›†ç´„
â–¡ UIç³»: è¡¨ç¤ºãƒ»çŠ¶æ…‹ç®¡ç†å°‚é–€åŒ–å®Œäº†
â–¡ é‡è¤‡APIãƒ»è²¬ä»»é•å0ä»¶

// ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æº–å‚™å®Œäº†
â–¡ AbstractToolç¶™æ‰¿ä½“ç³»å®Œæˆ
â–¡ ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤å®Œæˆ  
â–¡ EventBusç–çµåˆä½“ç³»å®Œæˆ
â–¡ æ‹¡å¼µæ€§åŸºç›¤100%æº–å‚™
```

### ğŸ¯ å“è³ªç›®æ¨™
```javascript
TARGET_CANVAS_DISPLAY_SUCCESS: 100%      // ã‚­ãƒ£ãƒ³ãƒã‚¹è¡¨ç¤ºæˆåŠŸç‡
TARGET_API_CONSISTENCY: 100%             // APIä¸€è²«æ€§
TARGET_RESPONSIBILITY_SEPARATION: 100%   // è²¬ä»»åˆ†é›¢éµå®ˆç‡
TARGET_COORDINATE_INTEGRATION: 100%      // åº§æ¨™çµ±åˆç‡
TARGET_ERROR_HANDLING_UNIFICATION: 100%  // ã‚¨ãƒ©ãƒ¼å‡¦ç†çµ±ä¸€ç‡
```

---

## ğŸ”§ è¨ºæ–­ãƒ»ãƒ‡ãƒãƒƒã‚°APIçµ±åˆ

### ğŸ” çµ±åˆè¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ 
```javascript
// å…¨ä½“è¨ºæ–­API
window.checkTegakiHealth(): object       // å…¨ä½“å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯
window.checkCoordinateIntegration(): object  // åº§æ¨™çµ±åˆãƒã‚§ãƒƒã‚¯  
window.checkPhase2Readiness(): object    // Phase2æº–å‚™åº¦ãƒã‚§ãƒƒã‚¯
window.debugREVSystem(): object          // REVç³»çµ±åˆãƒ‡ãƒãƒƒã‚°

// å€‹åˆ¥è¨ºæ–­API  
AppCore.getDiagnosticInfo(): object      // AppCoreè¨ºæ–­
CanvasManager.getDiagnosticInfo(): object    // CanvasManagerè¨ºæ–­
å„Manager.getDiagnosticInfo(): object    // å„Managerè¨ºæ–­
```

---

## ğŸ“š ç¶™ç¶šãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¦ç´„

### ğŸ”„ ã‚·ãƒ³ãƒœãƒ«è¾å…¸æ›´æ–°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
```javascript
IMMEDIATE_UPDATE:     é‡è¤‡APIç™ºè¦‹ãƒ»è²¬ä»»é•åä¿®æ­£æ™‚
WEEKLY_UPDATE:        æ–°APIè¿½åŠ ãƒ»æ—¢å­˜APIå¤‰æ›´æ™‚  
PHASE_TRANSITION:     Phaseç§»è¡Œæ™‚ãƒ»å¤§è¦æ¨¡æ”¹ä¿®æ™‚
MAJOR_REVISION:       ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰æ›´æ™‚
```

### ğŸ¯ å“è³ªç¶­æŒè²¬ä»»
```javascript
API_CONSISTENCY:      å…¨APIã®å‘½åãƒ»å¼•æ•°ãƒ»æˆ»ã‚Šå€¤çµ±ä¸€
RESPONSIBILITY_GUARD: è²¬ä»»å¢ƒç•Œé•åã®ç›£è¦–ãƒ»ä¿®æ­£
INTEGRATION_QUALITY:  çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨ç‡100%ç¶­æŒ
DOCUMENTATION_SYNC:   ã‚³ãƒ¼ãƒ‰ãƒ»è¾å…¸ãƒ»è¨ˆç”»æ›¸ã®ä¸€è‡´ä¿è¨¼
```

---

*ğŸ¨ ã‚·ãƒ³ãƒœãƒ«è¾å…¸ v13 - è²¬ä»»åˆ†ç•Œãƒ»åŒ…æ‹¬çµ±åˆç‰ˆ*  
*ç­–å®šæ—¥: 2025å¹´8æœˆ24æ—¥*  
*å¯¾è±¡: Phase1.5å®Œäº†ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹è¡¨ç¤ºå•é¡Œè§£æ±ºãƒ»Phase2ç§»è¡Œæº–å‚™*  
*ç›®çš„: APIçµ±ä¸€ãƒ»è²¬ä»»åˆ†ç•Œãƒ»é‡è¤‡æ’é™¤ãƒ»Claudeæ”¹ä¿®æ”¯æ´*