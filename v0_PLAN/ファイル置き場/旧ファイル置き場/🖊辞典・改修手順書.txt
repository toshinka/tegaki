ğŸ“ ã‚·ãƒ³ãƒœãƒ«ãƒ¡ã‚½ãƒƒãƒ‰è¾å…¸ï¼ˆPhase1.4stepEX ç”¨ï¼‰
utils å±¤
ãƒ•ã‚¡ã‚¤ãƒ«	ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹	ä¸»ãªå½¹å‰²	ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
error-manager.js	window.ErrorManager	ã‚¨ãƒ©ãƒ¼å‡¦ç†é›†ä¸­ç®¡ç†	handle(error), _logToConsole(msg), capture(error)
config-manager.js	window.ConfigManager	è¨­å®šãƒ»ãƒ‡ãƒãƒƒã‚°æƒ…å ±ç®¡ç†	get(key), set(key, val), getDebugInfo()
state-manager.js	window.StateManager	ã‚¢ãƒ—ãƒªçŠ¶æ…‹ä¿æŒ	getState(key), setState(key, val), reset()
event-bus.js	window.EventBus	ç™ºè¡Œ/è³¼èª­ã‚¤ãƒ™ãƒ³ãƒˆåˆ¶å¾¡	on(event, cb), off(event, cb), emit(event, data)
coordinate-manager.js	window.CoordinateManager	Pixiåº§æ¨™å¤‰æ›ç®¡ç†	toCanvas(x,y), toScreen(x,y)
icon-manager.js	window.IconManager	UIã‚¢ã‚¤ã‚³ãƒ³ãƒ­ãƒ¼ãƒ‰	load(name), get(name)
performance.js	window.PerformanceManager	FPS, ãƒ¡ãƒ¢ãƒªç›£è¦–	startMonitor(), getStats()

managers å±¤
ãƒ•ã‚¡ã‚¤ãƒ«	ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹	ä¸»ãªå½¹å‰²	ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
canvas-manager.js	window.CanvasManager	PixiJS ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¸ç®¡ç†	initialize(container), addLayer(name), getLayer(name)
tool-manager.js	window.ToolManager	ç¾åœ¨ã® Tool åˆ‡æ›¿ãƒ»ç®¡ç†	setTool(name), getTool(), apply(event)
memory-manager.js	window.MemoryManager	undo/redo ãƒãƒƒãƒ•ã‚¡ç®¡ç†	push(state), undo(), redo()
settings-manager.js	window.SettingsManager	UI è¨­å®šä¿æŒ	get(key), set(key,val)
boundary-manager.js	window.BoundaryManager	æç”»ç¯„å›²åˆ¶å¾¡	isInside(x,y)
ui-manager.js	window.UIManager	UIè¦ç´ ã®ç”Ÿæˆãƒ»æ“ä½œ	initializeUI(), updateToolbar()

tools å±¤
ãƒ•ã‚¡ã‚¤ãƒ«	ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹	ä¸»ãªå½¹å‰²	ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
abstract-tool.js	window.AbstractTool	å…±é€š Tool åŸºåº•ã‚¯ãƒ©ã‚¹	onPointerDown(), onPointerMove(), onPointerUp()
pen-tool.js	window.PenTool	ãƒšãƒ³ãƒ„ãƒ¼ãƒ«	onPointerDown(), onPointerMove(), onPointerUp(), drawLine()
eraser-tool.js	window.EraserTool	æ¶ˆã—ã‚´ãƒ ãƒ„ãƒ¼ãƒ«	ä¸Šè¨˜ã¨åŒç­‰æ§‹é€ ã€ã‚¢ãƒ«ãƒ•ã‚¡é™¤å»

UI å±¤
ãƒ•ã‚¡ã‚¤ãƒ«	ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹	ä¸»ãªå½¹å‰²	ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
popup-manager.js	window.PopupManager	UIãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—åˆ¶å¾¡	open(id), close(id)
slider-manager.js	window.SliderManager	UIã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åˆ¶å¾¡	initialize(), setValue(), getValue()

ã‚¢ãƒ—ãƒªæœ¬ä½“
ãƒ•ã‚¡ã‚¤ãƒ«	ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹	ä¸»ãªå½¹å‰²	ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
app-core.js	window.AppCore	ã‚¢ãƒ—ãƒªåˆæœŸåŒ–åŸºç›¤	boot(), shutdown()
main.js	window.TegakiApplication	åˆæœŸåŒ–ãƒ»ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ	initialize(), initializeCanvasSystem(), registerTools(), bindEvents()


âš’ï¸ æ”¹ä¿®æ‰‹é †æ›¸ï¼ˆã‚¨ãƒ©ãƒ¼ä¿®æ­£è¾¼ã¿ï¼‰
1. æ§‹æ–‡ä¿®æ­£

abstract-tool.js ã® catch {} â†’ catch (e) {} ã«ä¿®æ­£ã€‚

2. index.html ã®ä¿®æ­£

<div id="canvas-container"></div> ã‚’ body å†…ã«å¿…ãšé…ç½®ã€‚

script ã®èª­ã¿è¾¼ã¿é †åºã‚’ä»¥ä¸‹ã«å›ºå®šï¼š

utils/

managers/

tools/ (abstract-tool.js â†’ pen-tool.js â†’ eraser-tool.js)

app-core.js â†’ main.js

3. å„ãƒãƒãƒ¼ã‚¸ãƒ£ã‚’ window ã«å…¬é–‹

ä¾‹ï¼š
// error-manager.js
class ErrorManager {
  handle(error) { console.error("[ErrorManager]", error); }
  getLastError() { return this.lastError; }
}
window.ErrorManager = new ErrorManager();

// config-manager.js
class ConfigManager {
  getDebugInfo() { return { version: "Phase1.4EX", mode: "dev" }; }
}
window.ConfigManager = new ConfigManager();

4. Tool ã®ä¾å­˜é †åºã‚’å³å®ˆ

pen-tool.js / eraser-tool.js ã¯ abstract-tool.js ã‚’ å¿…ãšèª­ã¿è¾¼ã¿æ¸ˆã¿ã«ã—ã¦ã‹ã‚‰å®Ÿè¡Œã€‚

ãã†ã—ãªã„ã¨ extends AbstractTool ã§ undefined å‚ç…§ãŒç™ºç”Ÿã™ã‚‹ã€‚

5. main.js å´ã®åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼å¯¾å¿œ

TegakiApplication.initializeCanvasSystem() ã§ #canvas-container ãŒå¿…ãšå­˜åœ¨ã™ã‚‹å‰æã«ã™ã‚‹ã€‚

ErrorManager.handle() / ConfigManager.getDebugInfo() ã‚’å‘¼ã¶ç®‡æ‰€ã¯ã€å…¬é–‹æ¸ˆã¿ã® window ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åˆ©ç”¨ã€‚

ğŸ¯ å®Ÿè£…ãƒ•ãƒ­ãƒ¼ã¾ã¨ã‚ï¼ˆä½œæ¥­é †åºï¼‰

utils ä¿®æ­£ï¼š

ErrorManager, ConfigManager ã‚’ window.* ã«å…¬é–‹ã€‚

catch æ–‡ä¿®æ­£ã€‚

index.html æ•´å‚™ï¼š

#canvas-container ã‚’ body ã«è¨­ç½®ã€‚

script ã®ãƒ­ãƒ¼ãƒ‰é †ã‚’æ•´ç†ã€‚

tools æ•´å‚™ï¼š

abstract-tool.js â†’ pen-tool.js â†’ eraser-tool.js ã®é †ã«èª­ã¿è¾¼ã‚€ã€‚

managers æ•´å‚™ï¼š

CanvasManager.initialize(container) ã§ PixiJS Application ã‚’ç”Ÿæˆã€‚

ToolManager.setTool("pen") â†’ PenTool å‹•ä½œç¢ºèªã€‚

main.js ç¢ºèªï¼š

TegakiApplication.initialize() â†’ ä¾‹å¤–æ™‚ã¯ window.ErrorManager.handle(error) ã¸é€å‡ºã€‚

ã“ã‚Œã§ ã€Œå‹•ãæœ€å°ä¿®æ­£ã€ï¼‹ã€Œã‚·ãƒ³ãƒœãƒ«è¾å…¸ã§ä¸€ç›®ã§ä¾å­˜é–¢ä¿‚ãŒè¦‹ãˆã‚‹ã€ å½¢ã«ãªã‚Šã¾ã™ã€‚


