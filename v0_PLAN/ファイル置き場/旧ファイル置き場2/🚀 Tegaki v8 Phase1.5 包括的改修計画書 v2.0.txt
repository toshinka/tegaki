# ğŸš€ Tegaki v8 Phase1.5 åŒ…æ‹¬çš„æ”¹ä¿®è¨ˆç”»æ›¸ v2.0
## ğŸ“Š ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—ãƒ»åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼å®Œå…¨ç‰ˆãƒ»æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰æ’²æ»…

### ğŸ¯ ç¾åœ¨ã®çŠ¶æ³ï¼ˆ2025-09-01 æ›´æ–°ï¼‰

#### âœ… è§£æ±ºæ¸ˆã¿å•é¡Œ
1. **ToolManager æ§‹æ–‡ã‚¨ãƒ©ãƒ¼** â†’ å®Œå…¨ä¿®æ­£æ¸ˆã¿
2. **`Tegaki.ToolManager` ç™»éŒ²** â†’ ã‚°ãƒ­ãƒ¼ãƒãƒ«ç™»éŒ²å®Œäº†
3. **CoordinateManager ä¾å­˜ãƒ¡ã‚½ãƒƒãƒ‰ä¸åœ¨** â†’ `CanvasManager.getApplication()` è¿½åŠ æ¸ˆã¿

#### âŒ ç¾åœ¨ã®å•é¡Œ
1. **CanvasManager åˆæœŸåŒ–é †åºå•é¡Œ** - `getDrawContainer()` å‘¼ã³å‡ºã—æ™‚ã« `isReady()` = false
2. **Manager é–“ã®åˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°ä¸æ•´åˆ** - ä¾å­˜é–¢ä¿‚ãŒæº€ãŸã•ã‚Œã‚‹å‰ã«ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
3. **æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ãƒªã‚¹ã‚¯** - ãƒ•ã‚¡ã‚¤ãƒ«é–“ã®å®Ÿè£…çŠ¶æ³ç¢ºèªä¸è¶³

---

## ğŸ“‹ ãƒ•ã‚¡ã‚¤ãƒ«é–“ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—ï¼ˆå®Œå…¨ç‰ˆï¼‰

### ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£éšå±¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ® UI Layer                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  assets/icons.js (EventBus 'app:ready' å¾…æ©Ÿ)           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ EventBus('app:ready')
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸ¯ Application Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  TegakiApplication  â”‚  â”‚         AppCore                 â”‚ â”‚
â”‚  â”‚  - initialize()     â”‚â—„â”€â”¤  - initializeV8Managers()     â”‚ â”‚
â”‚  â”‚  - createCanvasV8() â”‚  â”‚  - createCanvasV8()            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ ManageråˆæœŸåŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸ“¦ Manager Layer                             â”‚
â”‚                                                             â”‚
â”‚  ğŸ¨ CanvasManager (åŸºå¹¹)                                    â”‚
â”‚  â”œâ”€â”€ PROVIDES: getApplication(), getDrawContainer()         â”‚
â”‚  â”œâ”€â”€ REQUIRES: PixiJS Application                           â”‚
â”‚  â””â”€â”€ STATUS: configure â†’ attach â†’ init â†’ initializeV8App   â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ CoordinateManager                                       â”‚
â”‚  â”œâ”€â”€ PROVIDES: clientToWorld(), screenToCanvas()           â”‚
â”‚  â”œâ”€â”€ REQUIRES: CanvasManager.getApplication()              â”‚
â”‚  â””â”€â”€ STATUS: configure â†’ attach â†’ init                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ”§ ToolManager                                             â”‚
â”‚  â”œâ”€â”€ PROVIDES: setActiveTool(), onPointerXxx()             â”‚
â”‚  â”œâ”€â”€ REQUIRES: CanvasManager.getDrawContainer()            â”‚
â”‚  â””â”€â”€ STATUS: configure â†’ attach â†’ init â†’ setManagers       â”‚
â”‚                                                             â”‚
â”‚  ğŸ”„ Other Managers                                          â”‚
â”‚  â”œâ”€â”€ EventBus (ç‹¬ç«‹)                                       â”‚
â”‚  â”œâ”€â”€ RecordManager (ç‹¬ç«‹)                                  â”‚
â”‚  â””â”€â”€ NavigationManager (CanvasManagerä¾å­˜)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Toolæ³¨å…¥
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸ› ï¸ Tool Layer                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PenTool       â”‚  â”‚        EraserTool                   â”‚ â”‚
â”‚  â”‚ - onPointerXxx()â”‚  â”‚  - onPointerXxx()                  â”‚ â”‚
â”‚  â”‚ - setManagers() â”‚  â”‚  - setManagers()                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                        â”‚                           â”‚
â”‚         â–¼ extends                 â–¼ extends                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                AbstractTool                             â”‚ â”‚
â”‚  â”‚  - setManagersObject() â† çµ±ä¸€Manageræ³¨å…¥API             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”— å…·ä½“çš„ä¾å­˜é–¢ä¿‚

#### Manager â†’ Manager ä¾å­˜
```
CanvasManager (åŸºå¹¹)
â”œâ”€â”€ ä¾å­˜ãªã— (PixiJS ã®ã¿)
â””â”€â”€ æä¾›: getApplication(), getDrawContainer()

CoordinateManager
â”œâ”€â”€ ä¾å­˜: CanvasManager.getApplication()
â”œâ”€â”€ ä¾å­˜: CanvasManager.getCanvasElement()
â””â”€â”€ æä¾›: clientToWorld(), screenToCanvas()

ToolManager  
â”œâ”€â”€ ä¾å­˜: CanvasManager.getDrawContainer()
â””â”€â”€ æä¾›: setActiveTool(), getCurrentTool()

RecordManager
â”œâ”€â”€ ä¾å­˜ãªã— (ç‹¬ç«‹)
â””â”€â”€ æä¾›: addStroke()

NavigationManager
â”œâ”€â”€ ä¾å­˜: CanvasManager.getApplication()
â””â”€â”€ æä¾›: pan(), zoom()

EventBus
â”œâ”€â”€ ä¾å­˜ãªã— (ç‹¬ç«‹)
â””â”€â”€ æä¾›: emit(), on()
```

#### Tool â†’ Manager ä¾å­˜
```
AbstractTool
â”œâ”€â”€ ä¾å­˜: Managerçµ±ä¸€æ³¨å…¥ (setManagersObject)
â””â”€â”€ æä¾›: åŸºåº•æ©Ÿèƒ½

PenTool extends AbstractTool
â”œâ”€â”€ ä¾å­˜: CanvasManager.getDrawContainer()
â”œâ”€â”€ ä¾å­˜: CanvasManager.createStrokeGraphics()
â”œâ”€â”€ ä¾å­˜: CoordinateManager.clientToWorld()
â””â”€â”€ ä¾å­˜: RecordManager.addStroke()

EraserTool extends AbstractTool
â”œâ”€â”€ ä¾å­˜: CanvasManager.getDrawContainer()
â”œâ”€â”€ ä¾å­˜: CoordinateManager.clientToWorld()
â””â”€â”€ ä¾å­˜: RecordManager.addStroke()
```

---

## âš¡ æ­£ã—ã„åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼ï¼ˆä¿®æ­£ç‰ˆï¼‰

### ğŸ“‹ Phase 1: åŸºå¹¹ã‚·ã‚¹ãƒ†ãƒ æº–å‚™
```javascript
// 1. Bootstrapèµ·å‹•
bootstrap.js:start()
â””â”€â”€ initializeTegakiApplication()
    â””â”€â”€ new TegakiApplication()
        â””â”€â”€ TegakiApplication.initialize()

// 2. TegakiApplicationåˆæœŸåŒ–
TegakiApplication.initialize() {
    await this.createCanvasV8();              // Canvasä½œæˆ
    await this.initializeV8Managers();        // Managerç¾¤åˆæœŸåŒ–
}
```

### ğŸ“‹ Phase 2: Canvasä½œæˆãƒ»PixiJSæº–å‚™
```javascript
// 3. Canvasä½œæˆ (TegakiApplication â†’ AppCore)
TegakiApplication.createCanvasV8()
â””â”€â”€ AppCore.createCanvasV8()
    â”œâ”€â”€ createV8Application()                 // PixiJS Applicationä½œæˆ
    â”œâ”€â”€ setupV8Canvas()                       // DOMé…ç½®
    â””â”€â”€ return pixiApp

// 4. PixiJS Applicationä½œæˆå®Œäº†
pixiApp = new PIXI.Application({...})        // PixiJS v8æº–æ‹ 
```

### ğŸ“‹ Phase 3: Managerç¾¤åˆæœŸåŒ–ï¼ˆä¾å­˜é †åºå³å®ˆï¼‰
```javascript
// 5. ManageråˆæœŸåŒ– (TegakiApplication â†’ AppCore)
TegakiApplication.initializeV8Managers()
â””â”€â”€ AppCore.initializeV8Managers()
    â”‚
    // Step 1: åŸºå¹¹Manager (ä¾å­˜ãªã—)
    â”œâ”€â”€ ConfigManager.configure(config)
    â”œâ”€â”€ EventBus.attach(context) â†’ EventBus.init()
    â”‚
    // Step 2: CanvasåŸºå¹¹ (PixiJSä¾å­˜)
    â”œâ”€â”€ CanvasManager.configure(config)
    â”œâ”€â”€ CanvasManager.attach({pixiApp})
    â”œâ”€â”€ CanvasManager.init()
    â”œâ”€â”€ CanvasManager.initializeV8Application(pixiApp)  // ã“ã“ãŒé‡è¦ï¼
    â”‚   â””â”€â”€ isReady() = true ã«ãªã‚‹
    â”‚
    // Step 3: Canvasä¾å­˜Managerç¾¤
    â”œâ”€â”€ CoordinateManager.configure(config)
    â”œâ”€â”€ CoordinateManager.attach({canvas: canvasManager})
    â”œâ”€â”€ CoordinateManager.init()               // getApplication()ä½¿ç”¨
    â”‚
    â”œâ”€â”€ NavigationManager.configure(config)
    â”œâ”€â”€ NavigationManager.attach({canvas: canvasManager})
    â”œâ”€â”€ NavigationManager.init()
    â”‚
    â”œâ”€â”€ RecordManager.configure(config)
    â”œâ”€â”€ RecordManager.attach(context)
    â”œâ”€â”€ RecordManager.init()
    â”‚
    // Step 4: å…¨Managerçµ±åˆ
    â”œâ”€â”€ ToolManager.configure(config)
    â”œâ”€â”€ ToolManager.attach(context)
    â”œâ”€â”€ ToolManager.init()
    â”œâ”€â”€ ToolManager.setManagers(managersMap)    // çµ±ä¸€æ³¨å…¥
    â”œâ”€â”€ ToolManager.verifyInjection()          // getDrawContainer()ä½¿ç”¨
    â”œâ”€â”€ ToolManager.initializeV8Tools()        // Toolä½œæˆ
    â””â”€â”€ ToolManager.setActiveTool('pen')       // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
```

### ğŸ“‹ Phase 4: UIæº–å‚™ãƒ»å®Œäº†é€šçŸ¥
```javascript
// 6. åˆæœŸåŒ–å®Œäº†é€šçŸ¥
AppCore.emitAppReady()
â””â”€â”€ EventBus.emit('app:ready')
    â””â”€â”€ assets/icons.js èµ·å‹•
        â””â”€â”€ ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ»UIè¡¨ç¤º
```

---

## ğŸš¨ ç¾åœ¨ã®å•é¡Œã¨è§£æ±ºç­–

### âŒ å•é¡Œ1: CanvasManageråˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°
**ç—‡çŠ¶**: `getDrawContainer()` å‘¼ã³å‡ºã—æ™‚ã« `isReady()` = false
**åŸå› **: `initializeV8Application()` ãŒå®Œäº†ã™ã‚‹å‰ã« `getDrawContainer()` ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹

**è§£æ±ºç­–**:
```javascript
// AppCore.initializeV8Managers() ä¿®æ­£è¦
async initializeV8Managers() {
    // CanvasManagerå®Œå…¨åˆæœŸåŒ–ç¢ºå®ŸåŒ–
    await this.canvasManager.init();
    await this.canvasManager.initializeV8Application(this.pixiApp);
    
    // isReady()ç¢ºèªå¿…é ˆ
    if (!this.canvasManager.isReady()) {
        throw new Error('CanvasManager initialization verification failed');
    }
    
    // ä»–ManageråˆæœŸåŒ–ç¶šè¡Œ
    // ...
}
```

### âŒ å•é¡Œ2: æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—é˜²æ­¢ã‚·ã‚¹ãƒ†ãƒ 
**å¯¾ç­–**: å®Ÿè£…çŠ¶æ³ç¢ºèªæ©Ÿèƒ½

```javascript
// å„Managerãƒ»Toolã«å®Ÿè£…çŠ¶æ³ç¢ºèªãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
class CanvasManager {
    static getProvidedMethods() {
        return [
            'configure', 'attach', 'init', 'isReady', 'dispose',
            'getApplication', 'getDrawContainer', 'createStrokeGraphics',
            'getCanvasElement', 'getTransformCoefficients'
        ];
    }
    
    verifyMethodExists(methodName) {
        if (typeof this[methodName] !== 'function') {
            throw new Error(`Method ${methodName} not implemented in ${this.constructor.name}`);
        }
        return true;
    }
}

// å‘¼ã³å‡ºã—å‰ç¢ºèªã®ä¾‹
if (canvasManager.verifyMethodExists('getDrawContainer')) {
    const drawContainer = canvasManager.getDrawContainer();
}
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥å®Ÿè£…ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… å®Œäº†ãƒ•ã‚¡ã‚¤ãƒ«
- [x] `managers/tool-manager.js` - æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ä¿®æ­£ãƒ»çµ±ä¸€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«å®Ÿè£…
- [x] `managers/canvas-manager.js` - getApplication()è¿½åŠ ãƒ»CoordinateManageré€£æº
- [ ] `js/app-core.js` - ManageråˆæœŸåŒ–é †åºä¿®æ­£ âš ï¸è¦ä¿®æ­£
- [ ] `js/tegaki-application.js` - Canvasä½œæˆãƒ»ManageråˆæœŸåŒ–é€£æº âš ï¸è¦ä¿®æ­£

### ğŸ“‹ å®Ÿè£…ç¢ºèªãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«
```
utils/coordinate-manager.js
â”œâ”€â”€ REQUIRES: CanvasManager.getApplication()
â”œâ”€â”€ REQUIRES: CanvasManager.getCanvasElement()
â””â”€â”€ STATUS: å®Ÿè£…ç¢ºèªè¦

utils/record-manager.js  
â”œâ”€â”€ REQUIRES: ç‹¬ç«‹å‹•ä½œ
â””â”€â”€ STATUS: å®Ÿè£…ç¢ºèªè¦

tools/pen-tool.js
â”œâ”€â”€ REQUIRES: setManagersObject()
â”œâ”€â”€ REQUIRES: onPointerDown/Move/Up()
â””â”€â”€ STATUS: å®Ÿè£…ç¢ºèªè¦

tools/eraser-tool.js
â”œâ”€â”€ REQUIRES: setManagersObject()
â”œâ”€â”€ REQUIRES: onPointerDown/Move/Up()  
â””â”€â”€ STATUS: å®Ÿè£…ç¢ºèªè¦
```

---

## ğŸ¯ ç·Šæ€¥ä¿®æ­£å„ªå…ˆé †ä½

### ğŸ”¥ Priority 1: ManageråˆæœŸåŒ–é †åºä¿®æ­£ (15åˆ†)
1. **AppCore.initializeV8Managers()** ä¿®æ­£
   - CanvasManagerå®Œå…¨åˆæœŸåŒ–ç¢ºèª
   - isReady()æ¤œè¨¼è¿½åŠ 
   - ä¾å­˜é †åºå³æ ¼åŒ–

2. **TegakiApplication.initializeV8Managers()** ä¿®æ­£
   - AppCoreé€£æºå¼·åŒ–
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„

### âš¡ Priority 2: æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰æ’²æ»…ã‚·ã‚¹ãƒ†ãƒ  (10åˆ†)
1. **ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…ç¢ºèªæ©Ÿèƒ½** è¿½åŠ 
2. **å‘¼ã³å‡ºã—å‰æ¤œè¨¼** ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
3. **ä¾å­˜é–¢ä¿‚æ¤œè¨¼** è‡ªå‹•åŒ–

### ğŸ“Š Priority 3: å‹•ä½œæ¤œè¨¼ãƒ»ãƒ†ã‚¹ãƒˆ (10åˆ†)
1. **ManageråˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ**
2. **Toolå‹•ä½œãƒ†ã‚¹ãƒˆ** 
3. **æç”»ãƒ»æ¶ˆå»ãƒ†ã‚¹ãƒˆ**

---

## ğŸ’¡ æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰æ’²æ»…æˆ¦ç•¥

### ğŸ›¡ï¸ é˜²å¾¡ç­–1: å®Ÿè£…ç¢ºèªã‚·ã‚¹ãƒ†ãƒ 
```javascript
// çµ±ä¸€ãƒ¡ã‚½ãƒƒãƒ‰å­˜åœ¨ç¢ºèª
function verifyManagerMethods(manager, requiredMethods) {
    const missing = requiredMethods.filter(method => 
        typeof manager[method] !== 'function'
    );
    
    if (missing.length > 0) {
        throw new Error(`Missing methods in ${manager.constructor.name}: ${missing.join(', ')}`);
    }
    
    return true;
}

// ä½¿ç”¨ä¾‹
verifyManagerMethods(canvasManager, ['getApplication', 'getDrawContainer']);
verifyManagerMethods(toolManager, ['setActiveTool', 'getCurrentTool']);
```

### ğŸ›¡ï¸ é˜²å¾¡ç­–2: Managerå¥‘ç´„å®šç¾©
```javascript
// Managerå¥‘ç´„ã‚¤ãƒ³ã‚¿ãƒ¼face
const ManagerContract = {
    Lifecycle: ['configure', 'attach', 'init', 'isReady', 'dispose'],
    CanvasManager: ['getApplication', 'getDrawContainer', 'createStrokeGraphics'],
    ToolManager: ['setActiveTool', 'getCurrentTool', 'initializeV8Tools'],
    CoordinateManager: ['clientToWorld', 'screenToCanvas']
};
```

### ğŸ›¡ï¸ é˜²å¾¡ç­–3: æ®µéšçš„ç¢ºèª
```javascript
// æ®µéšçš„Managerç¢ºèª
async function safeManagerInitialization(managers) {
    // Step 1: åŸºæœ¬ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç¢ºèª
    for (const [name, manager] of managers) {
        verifyManagerMethods(manager, ManagerContract.Lifecycle);
    }
    
    // Step 2: å°‚ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ç¢ºèª  
    verifyManagerMethods(managers.get('canvas'), ManagerContract.CanvasManager);
    verifyManagerMethods(managers.get('tool'), ManagerContract.ToolManager);
    
    // Step 3: åˆæœŸåŒ–å®Ÿè¡Œ
    // ä¾å­˜é †åºã§å®Ÿè¡Œ...
}
```

---

## ğŸš€ æœŸå¾…ã•ã‚Œã‚‹çµæœ

### âœ… ä¿®æ­£å¾Œã®çŠ¶æ…‹
1. **CanvasManager**: `getDrawContainer()` æ­£å¸¸å‹•ä½œ
2. **CoordinateManager**: åˆæœŸåŒ–æˆåŠŸãƒ»åº§æ¨™å¤‰æ›å‹•ä½œ
3. **ToolManager**: Toolåˆ‡ã‚Šæ›¿ãˆãƒ»æç”»ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†æˆåŠŸ
4. **PenTool**: æç”»å‹•ä½œãƒ»åº§æ¨™(0,0)æ­£ç¢ºè¡¨ç¤º
5. **EraserTool**: æ¶ˆå»å‹•ä½œå¾©æ´»
6. **UI**: ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ»ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º

### ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
- **åˆæœŸåŒ–æ™‚é–“**: < 1ç§’
- **æç”»å¿œç­”**: < 16ms (60fps)
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨**: å®‰å®šãƒ»ãƒªãƒ¼ã‚¯ç„¡ã—
- **ã‚¨ãƒ©ãƒ¼ç‡**: 0% (æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—æ’²æ»…)

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **AppCore.initializeV8Managers()** ç·Šæ€¥ä¿®æ­£å®Ÿæ–½
2. **æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ** å®Ÿè£…
3. **å‹•ä½œæ¤œè¨¼** å®Ÿæ–½
4. **Phase2æº–å‚™**: ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆæ©Ÿèƒ½æº–å‚™

---

**ğŸ“¢ é‡è¦**: ã“ã®è¨ˆç”»æ›¸ã«å¾“ã£ã¦é †æ¬¡å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€Manageré–“ã®ä¾å­˜é–¢ä¿‚æ··ä¹±ã¨æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—å•é¡Œã‚’æ ¹æœ¬çš„ã«è§£æ±ºã—ã€Tegaki v8 Phase1.5ã®å®Œå…¨å®‰å®šå‹•ä½œã‚’å®Ÿç¾ã—ã¾ã™ã€‚