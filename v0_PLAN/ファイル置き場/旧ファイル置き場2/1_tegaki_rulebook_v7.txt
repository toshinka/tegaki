# ğŸ“ Tegaki Rulebook v7 - PixiJS v8å¯¾å¿œå‰›ç›´åŸºæœ¬æ–¹é‡

> **éª¨å¤ªã§å‰›ç›´ãªé–‹ç™ºæ–¹é‡** - ã‚¨ãƒ©ãƒ¼ã‚’éš ã™ãªã€æ§‹é€ ã‚’é€ã‘ã•ã›ã‚ã€ç´ äººãŒèª­ã‚ã‚‹æ§‹é€ ã«ã—ã‚  
> **v8ç§»è¡Œæ–¹é‡**: GPT5ææ¡ˆã‚’å—ã‘ãŸPixiJS v8åŒ–ã«ã‚ˆã‚‹æ ¹æœ¬çš„æ€§èƒ½æ”¹å–„

## ğŸš« çµ¶å¯¾ä¸å¤‰åŸå‰‡ï¼ˆæ”¹å®šãƒ»å‰Šé™¤ç¦æ­¢ï¼‰

### ğŸ’€ é‡å¤§é•åäº‹é …ï¼ˆä¾‹å¤–ãªã—ï¼‰
1. **try/catch ã§ã®æ¡ã‚Šã¤ã¶ã—ç¦æ­¢** - å¿…ãš `throw` ã‹ `console.error` + è©³ç´°ãƒ­ã‚°
2. **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•ç¦æ­¢** - æ­£ã—ã„æ§‹é€ ã§ã®ã¿å‹•ä½œã•ã›ã‚‹
3. **æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ç¦æ­¢** - å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ãª
4. **äºŒé‡è²¬å‹™ç¦æ­¢** - 1ãƒ•ã‚¡ã‚¤ãƒ«ï¼1è²¬å‹™ã€ä¼¼ãŸå‡¦ç†ã®ã‚³ãƒ”ãƒšç¦æ­¢
5. **ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹åŒ–ç¦æ­¢** - å…¨å‡¦ç†ã«æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆ
6. **v7/v8 ä¸¡å¯¾å¿œã§äºŒé‡ç®¡ç†ã®ç¦æ­¢

### âœ… å¿…é ˆéµå®ˆäº‹é …ï¼ˆå…¨Phaseå…±é€šï¼‰
1. **ã‚¨ãƒ©ãƒ¼ã¯ ErrorManager çµŒç”±ã®ã¿** - ä»–ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ç›´æ¥é€šçŸ¥ç¦æ­¢
2. **åå‰ç©ºé–“çµ±ä¸€** - å…¨ã¦ `window.Tegaki.*` ã«å…¬é–‹
3. **åˆæœŸåŒ–é †åºå³å®ˆ** - HTMLèª­ã¿è¾¼ã¿é †åºé€šã‚Šã®ä¾å­˜é–¢ä¿‚
4. **æ§‹æ–‡å®Œæ•´æ€§ç¢ºä¿** - ES2023æº–æ‹ ã€å¾Œæ–¹äº’æ›è€ƒæ…®ãªã—
5. **è»Šè¼ªã®å†ç™ºæ˜ç¦æ­¢** - PixiJSæ¨™æº–æ©Ÿèƒ½ã‚’æœ€å¤§æ´»ç”¨

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸºæœ¬åŸå‰‡

### ğŸ“¦ è²¬å‹™åˆ†é›¢åŸå‰‡ï¼ˆSOLIDåŸºç›¤ï¼‰
```javascript
// âœ… æ­£ã—ã„ï¼šå˜ä¸€è²¬å‹™
class CanvasManager {
    // PixiJSç®¡ç†ã®ã¿
    async initializeV8(options) { /* PixiJS v8è¨­å®š */ }
    createLayer(id) { /* ãƒ¬ã‚¤ãƒ¤ãƒ¼ä½œæˆ */ }
}

// âŒ é–“é•ã„ï¼šå¤šé‡è²¬å‹™
class SuperManager {
    // NGï¼šPixiJSç®¡ç† + æç”»å‡¦ç† + UIç®¡ç† + ã‚¨ãƒ©ãƒ¼å‡¦ç†
    initializeV8() { /* */ }
    drawLine() { /* */ }
    showDialog() { /* */ }
    handleError() { /* */ }
}
```

### ğŸ”— ä¾å­˜æ€§ç®¡ç†åŸå‰‡
```javascript
// âœ… æ­£ã—ã„ï¼šä¾å­˜æ€§æ³¨å…¥
class ToolManager {
    setCanvasManager(canvasManager) {
        this.canvasManager = canvasManager; // å¤–éƒ¨ã‹ã‚‰æ³¨å…¥
    }
}

// âŒ é–“é•ã„ï¼šå†…éƒ¨ä¾å­˜
class ToolManager {
    constructor() {
        this.canvasManager = new CanvasManager(); // å†…éƒ¨ã§ç›´æ¥ä½œæˆï¼ˆçµåˆåº¦é«˜ï¼‰
    }
}
```

### ğŸ”„ DRYåŸå‰‡ï¼ˆDon't Repeat Yourselfï¼‰
```javascript
// âœ… æ­£ã—ã„ï¼šå…±é€šåŒ–
class ToolBase {
    validateCanvas() {
        if (!this.canvasManager) {
            throw new Error('CanvasManager not set');
        }
    }
}

// âŒ é–“é•ã„ï¼šé‡è¤‡ã‚³ãƒ¼ãƒ‰
class PenTool {
    onPointerDown(x, y) {
        if (!this.canvasManager) {
            throw new Error('CanvasManager not set'); // é‡è¤‡
        }
    }
}
class EraserTool {
    onPointerDown(x, y) {
        if (!this.canvasManager) {
            throw new Error('CanvasManager not set'); // é‡è¤‡
        }
    }
}
```

## ğŸš¨ ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒãƒªã‚·ãƒ¼ï¼ˆå‰›ç›´ç‰ˆï¼‰

### âœ… æ¨å¥¨ã‚¨ãƒ©ãƒ¼å‡¦ç†
```javascript
// âœ… æ­£ã—ã„ï¼šErrorManagerçµŒç”±
if (!requiredData) {
    throw new Error('Required data not available');  // ä¸Šä½ã§ã‚­ãƒ£ãƒƒãƒã—ã¦ErrorManagerã¸
}

// âœ… æ­£ã—ã„ï¼šè©³ç´°ãƒ­ã‚°ä»˜ãthrow
try {
    riskyOperation();
} catch (error) {
    console.error('âŒ Operation failed:', error, { context: 'MyClass.method' });
    throw error; // éš è”½ã—ãªã„
}
```

### ğŸ’€ ç¦æ­¢ã‚¨ãƒ©ãƒ¼å‡¦ç†ï¼ˆçµ¶å¯¾ç¦æ­¢ï¼‰
```javascript
// âŒ çµ¶å¯¾ç¦æ­¢ï¼šæ¡ã‚Šã¤ã¶ã—
try {
    riskyOperation();  
} catch (e) {
    // ä½•ã‚‚ã—ãªã„ - æ¡ã‚Šã¤ã¶ã—
}

// âŒ çµ¶å¯¾ç¦æ­¢ï¼šæ›–æ˜§ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
const data = getData() || getDefaultData() || {};

// âŒ çµ¶å¯¾ç¦æ­¢ï¼šç›´æ¥UIé€šçŸ¥ï¼ˆErrorManagerä»¥å¤–ï¼‰
catch (error) {
    alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'); // NGï¼šErrorManagerã‚’é€šã›
    console.error(error); // NGï¼šthrowã—ã¦ä¸Šä½ã«å§”è­²
}
```

### ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥ã‚¨ãƒ©ãƒ¼å‡¦ç†æ–¹é‡
- **ğŸš¨ error-manager.js** - ã‚¨ãƒ©ãƒ¼å‡¦ç†å°‚ä»»ãƒ»UIé€šçŸ¥ãƒ»ãƒ­ã‚°ãƒ»è¨˜éŒ²
- **ğŸ¨ managers/\*.js** - ä¾‹å¤–throwå°‚é–€ãƒ»ç›´æ¥é€šçŸ¥ç¦æ­¢
- **ğŸ–Šï¸ tools/\*.js** - ä¾‹å¤–throwå°‚é–€ãƒ»ä¸Šä½å§”è­²
- **âš™ï¸ js/utils/\*.js** - ä¾‹å¤–throwãƒ»console.errorã‚„UIå‘¼ã³å‡ºã—ç¦æ­¢

## ğŸ“ ã‚³ãƒ¡ãƒ³ãƒˆè¦å‰‡ï¼ˆãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ’²æ»…ï¼‰

### âœ… å¿…é ˆã‚³ãƒ¡ãƒ³ãƒˆ
```javascript
/**
 * ğŸ¨ ClassName - å½¹å‰²ç°¡æ½”èª¬æ˜
 * ğŸ“‹ RESPONSIBILITY: ã“ã®ã‚¯ãƒ©ã‚¹ã®è²¬å‹™
 * ğŸš« PROHIBITION: ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨
 * âœ… PERMISSION: ã‚„ã£ã¦ã‚‚è‰¯ã„ã“ã¨
 * 
 * ğŸ“ DESIGN_PRINCIPLE: è¨­è¨ˆæ€æƒ³
 * ğŸ”„ INTEGRATION: ä»–ã‚¯ãƒ©ã‚¹ã¨ã®é€£æºæ–¹æ³•
 * ğŸ¯ V8_MIGRATION: v8å¯¾å¿œçŠ¶æ³ãƒ»å¤‰æ›´ç‚¹
 */
class MyClass {
    /**
     * ãƒ¡ã‚½ãƒƒãƒ‰ã®ç›®çš„èª¬æ˜ï¼ˆä½•ã‚’ãƒ»ãªãœï¼‰
     * @param {type} param - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¬æ˜
     * @returns {type} - æˆ»ã‚Šå€¤èª¬æ˜
     * @throws {Error} - ä¾‹å¤–èª¬æ˜
     * @v8 - v8å›ºæœ‰ã®å¤‰æ›´ãƒ»æ³¨æ„ç‚¹
     */
    myMethod(param) {
        // å‡¦ç†ã®æ„å›³ã‚’æ—¥æœ¬èªã§èª¬æ˜
        const result = complexOperation(param);
        
        // ãªãœã“ã®åˆ¤å®šãŒå¿…è¦ã‹ã‚’èª¬æ˜
        if (!result.isValid) {
            throw new Error('Validation failed: invalid result');
        }
        
        return result;
    }
}
```

### ğŸš« ä¸è¦ãªã‚³ãƒ¡ãƒ³ãƒˆï¼ˆæ›¸ããªï¼‰
```javascript
// âŒ ä¸è¦ï¼šã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚ã°åˆ†ã‹ã‚‹
let x = 10; // x ã« 10 ã‚’ä»£å…¥

// âŒ ä¸è¦ï¼šæ„å‘³ã®ãªã„èª¬æ˜
function getData() {
    return this.data; // ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
}
```
## ğŸ“˜ é‹ç”¨ãƒ«ãƒ¼ãƒ«

### ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼å¿…é ˆäº‹é …
âš ï¸å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã«å¿…ãšãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½è¨˜ã™ã‚‹ã“ã¨ã€‚è¨˜è¼‰å†…å®¹ã¯ä¸€æ¬¡æƒ…å ±ã§ã‚ã‚Šã€è¾å…¸ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã“ã‚Œã‚’åŸºæº–ã«æ´¾ç”Ÿã•ã›ã‚‹ã€‚

1. **æä¾›ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§**
   - `@provides` ã«æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ãŒæä¾›ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ—æŒ™ã™ã‚‹ã“ã¨
2. **ä»–ãƒ•ã‚¡ã‚¤ãƒ«å‘¼ã³å‡ºã—ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§**
   - `@uses` ã«å‘¼ã³å‡ºã™ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ—æŒ™ã—ã€å‘¼ã³å‡ºã—å…ˆã®å®Ÿè£…æœ‰ç„¡ã‚’ç¢ºèªã™ã‚‹ã“ã¨
3. **åˆæœŸåŒ–é †åºãƒ•ãƒ­ãƒ¼**
   - `@initflow` ã«é–‹å§‹â†’å‡¦ç†â†’çµ‚äº†ã®é †åºã‚’æ˜è¨˜ã™ã‚‹ã“ã¨
   - åˆ†å²ã‚„è¤‡é›‘ãªæµã‚ŒãŒã‚ã‚‹å ´åˆã‚‚å¿…ãšè¨˜è¼‰ã™ã‚‹ã“ã¨
4. **ä¾å­˜ç¦æ­¢äº‹é …**
   - `@forbids` ã«ä»¥ä¸‹ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨
     - ğŸ’€ åŒæ–¹å‘ç¦æ­¢
     - ğŸ’€ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•ç¦æ­¢
     - ğŸ’€ v7/v8 ä¸¡å¯¾å¿œã«ã‚ˆã‚‹äºŒé‡ç®¡ç†ç¦æ­¢
5. **Managerç™»éŒ²ã‚­ãƒ¼**
   - `@manager-key` ã«ç™»éŒ²ã‚­ãƒ¼ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨
   - ä¾‹: `window.Tegaki.CanvasManagerInstance`

---

### ğŸ” ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
1. **ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—å‰**
   - å‘¼ã³å‡ºã—å…ˆãƒ•ã‚¡ã‚¤ãƒ«ã® `@provides` ã‚’ç¢ºèªã—ã€å®Ÿè£…æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’å¿…ãšãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨
2. **ãƒ˜ãƒƒãƒ€ãƒ¼è¨˜è¼‰æ™‚**
   - ã€Œâœ…ç¢ºèªæ¸ˆã¿ã€ã¯å¿…ãšå®Ÿéš›ã®ç¢ºèªå¾Œã«ã®ã¿è¿½è¨˜ã™ã‚‹ã“ã¨
   - è¨˜è¼‰å†…å®¹ã¯ `@provides` / `@uses` / `@initflow` / `@forbids` / `@manager-key` ã‚’æƒãˆã‚‹ã“ã¨
3. **Manageré€£æºæ™‚**
   - å¿…ãšçµ±ä¸€APIï¼ˆä¾‹: `startOperation()` / `endOperation()`ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨
   - `@manager-key` ã«è¨˜è¼‰ã•ã‚ŒãŸã‚­ãƒ¼ã¨æ•´åˆã—ã¦ã„ã‚‹ã“ã¨
4. **ä¿®æ­£æ™‚**
   - é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®æ•´åˆæ€§ã‚’ç¢ºèªã™ã‚‹ã“ã¨
   - `symbol-dictionary` ã¸ã®åæ˜ ã¯æ‰‹ä½œæ¥­ã§è¡Œã‚ãšã€è‡ªå‹•æŠ½å‡ºã«ä»»ã›ã‚‹ã“ã¨
5. **è¤‡é›‘ãªå‡¦ç†æ³¨æ„**
   - åˆæœŸåŒ–é †åºãŒè¤‡é›‘ã«ãªã‚‹å ´åˆã¯ `@initflow` ã«åˆ†å²ãƒ•ãƒ­ãƒ¼ã‚’æ˜è¨˜ã™ã‚‹ã“ã¨
   - è¤‡æ•°åº§æ¨™å‡¦ç†ãŒç™ºç”Ÿã™ã‚‹å ´åˆã¯è²¬å‹™ã‚’ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã§åˆ†å‰²ã—ã€å†—é•·åŒ–ã‚’é¿ã‘ã‚‹ã“ã¨

## ğŸ—ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆv8ç§»è¡Œå¯¾å¿œï¼‰

### âœ… v8ç§»è¡Œå¾Œä½¿ç”¨æŠ€è¡“
- **PixiJS v8.4.0** - æç”»ãƒ»ã‚­ãƒ£ãƒ³ãƒã‚¹åŸºç›¤ï¼ˆWebGPUå¯¾å¿œï¼‰
- **JavaScript ES2023** - ãƒ¢ãƒ€ãƒ³æ§‹æ–‡ç©æ¥µåˆ©ç”¨
- **fetch API** - HTTPé€šä¿¡ï¼ˆå¿…è¦æ™‚ï¼‰
- **HTMLç›´é–‹ã** - ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç›´æ¥å®Ÿè¡Œå¯èƒ½ï¼ˆç¶™ç¶šï¼‰

### ğŸ”„ v8ç§»è¡Œã§å¤‰æ›´ã•ã‚Œã‚‹æŠ€è¡“
```javascript
// çµ±åˆå‰Šé™¤ï¼ˆv8çµ±åˆæ¸ˆã¿ï¼‰
// "@pixi/graphics-smooth" â†’ v8ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆ
// "@pixi/layers" â†’ Containeréšå±¤ã§ä»£æ›¿

// ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°å¿…é ˆ
"@pixi/text-bitmap": "^8.4.0"     // v7â†’v8
"@pixi/ui": "^2.1.0"              // v8å¯¾å¿œç‰ˆ

// äº’æ›æ€§ç¢ºèªè¦
"@pixi/gif": "^2.1.1"             // v8å¯¾å¿œçŠ¶æ³ç¢ºèª
"pixi-svg": "^3.2.0"              // v8äº’æ›æ€§èª¿æŸ»è¦
```

### ğŸš« ç¦æ­¢æŠ€è¡“ï¼ˆç¶™ç¶šï¼‰
- **Vite / TypeScript / ESM** - HTMLç›´é–‹ãã§å‹•ãã“ã¨ãŒå¿…é ˆ
- **webpack / Babel** - ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ç¦æ­¢
- **jQuery** - ãƒ¢ãƒ€ãƒ³æ§‹æ–‡ã§ä»£æ›¿
- **å¾Œæ–¹äº’æ›** - å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶è€ƒæ…®ãªã—

### ğŸ“¦ ä¾å­˜é–¢ä¿‚ç®¡ç†ï¼ˆv8å¯¾å¿œï¼‰
```javascript
// å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã«ä¾å­˜ï¼ˆå¿…é ˆï¼‰
window.Tegaki.ConfigManagerInstance    // è¨­å®šç®¡ç†
window.Tegaki.ErrorManagerInstance     // ã‚¨ãƒ©ãƒ¼å‡¦ç†  
window.Tegaki.EventBusInstance         // ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡

// v8è¿½åŠ ç¢ºèªé …ç›®
window.PIXI                            // PixiJS v8åˆ©ç”¨å¯èƒ½
await PIXI.isWebGPUSupported()         // WebGPUå¯¾å¿œç¢ºèª
```

## ğŸ¯ PixiJS v8æ´»ç”¨æ–¹é‡ï¼ˆè»Šè¼ªã®å†ç™ºæ˜ç¦æ­¢å¼·åŒ–ï¼‰

### âœ… PixiJS v8æ–°æ©Ÿèƒ½ç©æ¥µæ´»ç”¨
```javascript
// âœ… æ­£ã—ã„ï¼šv8 ApplicationåˆæœŸåŒ–
const app = new PIXI.Application();
await app.init({
    width: 800,
    height: 600,
    backgroundColor: '#1a1a1a',
    resolution: window.devicePixelRatio || 1,
    antialias: true,
    preference: 'webgpu' // WebGPUå„ªå…ˆ
});

// âœ… æ­£ã—ã„ï¼šv8 Graphicsæ–°è¨˜æ³•
const graphics = new PIXI.Graphics();
graphics.stroke({
    width: 4,
    color: 0x800000,
    alpha: 1.0,
    cap: 'round',
    join: 'round'
});
graphics.moveTo(x, y);
graphics.lineTo(x2, y2);

// âœ… æ­£ã—ã„ï¼šv8 Containeréšå±¤æ´»ç”¨
const layer = new PIXI.Container();
layer.name = 'main-layer';               // v8: nameå±æ€§æ´»ç”¨
layer.sortableChildren = true;
stage.addChild(layer);
```

### ğŸ”„ v7â†’v8 Breaking Changeså¯¾å¿œ
```javascript
// ğŸš¨ v7â†’v8 å¿…é ˆå¤‰æ›´é …ç›®
// 1. ApplicationåˆæœŸåŒ–æ–¹å¼
// v7ï¼ˆæ—§ï¼‰: const app = new PIXI.Application(options);
// v8ï¼ˆæ–°ï¼‰: const app = new PIXI.Application(); await app.init(options);

// 2. Graphicsæç”»API
// v7ï¼ˆæ—§ï¼‰: graphics.lineStyle(width, color, alpha);
// v8ï¼ˆæ–°ï¼‰: graphics.stroke({ width, color, alpha });

// 3. Containeréšå±¤ç®¡ç†
// v7ï¼ˆæ—§ï¼‰: @pixi/layersä¾å­˜ã§z-indexç®¡ç†
// v8ï¼ˆæ–°ï¼‰: Container.sortableChildren = true; child.zIndex = n;

// 4. ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
// v7ï¼ˆæ—§ï¼‰: sprite.interactive = true; sprite.on('click', handler);
// v8ï¼ˆæ–°ï¼‰: sprite.eventMode = 'static'; sprite.on('click', handler);
```

### ğŸš« v8ç§»è¡Œæ™‚ç¦æ­¢äº‹é …
```javascript
// âŒ ç¦æ­¢ï¼šv7ã¨v8ã®æ··åœ¨ä½¿ç”¨
class BadManager {
    initializeV7() {
        const app = new PIXI.Application({ width: 800 }); // v7æ–¹å¼
    }
    useV8Graphics() {
        graphics.stroke({ width: 4 }); // v8æ–¹å¼ â† æ··åœ¨ã§ã‚¨ãƒ©ãƒ¼
    }
}

// âŒ ç¦æ­¢ï¼šå‰Šé™¤äºˆå®šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¶™ç¶šä½¿ç”¨
import { Layer } from '@pixi/layers';  // v8ã§å‰Šé™¤æ¸ˆã¿
import smooth from '@pixi/graphics-smooth'; // v8çµ±åˆæ¸ˆã¿

// âŒ ç¦æ­¢ï¼šWebGPUæœªç¢ºèªã§ã®æ±ºã‚æ‰“ã¡
app.renderer.type; // 'webgpu'æ±ºã‚æ‰“ã¡ï¼ˆCanvas fallbackã‚’è€ƒæ…®ã›ã‚ˆï¼‰
```

### âœ… v8æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ–°è¦ä½œæˆæ™‚ï¼‰
```javascript
// âœ… æ­£ã—ã„ï¼šWebGPUå¯¾å¿œç¢ºèªä»˜ãåˆæœŸåŒ–
class CanvasManagerV8 {
    async initializePixiV8(options) {
        const app = new PIXI.Application();
        
        // WebGPUå¯¾å¿œç¢ºèª
        if (await PIXI.isWebGPUSupported()) {
            console.log('ğŸš€ Using WebGPU renderer');
            options.preference = 'webgpu';
        } else {
            console.log('ğŸ“Š Fallback to Canvas renderer');
            options.preference = 'webgl';
        }
        
        await app.init(options);
        this.pixiApp = app;
    }
    
    // v8: Containeréšå±¤æœ€é©åŒ–
    createLayerV8(id, options = {}) {
        const layer = new PIXI.Container();
        layer.name = id;
        layer.sortableChildren = true;
        layer.zIndex = options.zIndex ?? 0;
        
        // v8: é«˜åº¦ãªContaineræ©Ÿèƒ½æ´»ç”¨
        if (options.mask) layer.mask = options.mask;
        if (options.filters) layer.filters = options.filters;
        
        this.pixiApp.stage.addChild(layer);
        return layer;
    }
}
```

## ğŸ® ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆv8å¯¾å¿œï¼‰

### âœ… v8æ¨å¥¨ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// UIå±¤ï¼šã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡ãƒ»åº§æ¨™å¤‰æ›ï¼ˆv8å¯¾å¿œï¼‰
handlePointerDown(e) {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    // v8: åº§æ¨™å¤‰æ›å¼·åŒ–
    const canvasPoint = this.coordinateManager.screenToCanvasV8(x, y);
    
    // Managerå±¤ã«å§”è­²
    this.toolManager.handlePointerDown(canvasPoint.x, canvasPoint.y, e);
}

// Managerå±¤ï¼šãƒ„ãƒ¼ãƒ«é¸æŠãƒ»ã‚¤ãƒ™ãƒ³ãƒˆè»¢é€ï¼ˆv8çµ±åˆï¼‰
handlePointerDown(x, y, event) {
    if (this.currentTool?.onPointerDown) {
        // v8: é«˜ç²¾åº¦åº§æ¨™ã§å‡¦ç†
        this.currentTool.onPointerDown(x, y, event);
    }
}

// Toolå±¤ï¼šv8 Graphicsæ´»ç”¨å®Ÿéš›å‡¦ç†
onPointerDown(x, y, event) {
    this.isDrawing = true;
    
    // v8: æ–°Graphics APIä½¿ç”¨
    this.currentPath = new PIXI.Graphics();
    this.currentPath.stroke({
        width: this.lineWidth,
        color: this.color,
        alpha: this.opacity,
        cap: 'round',
        join: 'round'
    });
    this.currentPath.moveTo(x, y);
    
    // v8: ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å³è¿½åŠ ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»æº–å‚™ï¼‰
    const layer = this.canvasManager.getLayer('main');
    layer.addChild(this.currentPath);
}
```

### ğŸš« v8ç§»è¡Œæ™‚ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³
```javascript
// âŒ ç¦æ­¢ï¼šv7 APIæ··åœ¨
onPointerDown(x, y, event) {
    // v7æ–¹å¼ã¨v8æ–¹å¼æ··åœ¨
    this.graphics.lineStyle(4, 0x800000);    // v7 API
    this.graphics.stroke({ width: 4 });      // v8 API â† ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
}

// âŒ ç¦æ­¢ï¼šå‰Šé™¤æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¾å­˜
import { Layer } from '@pixi/layers';        // å‰Šé™¤æ¸ˆã¿
const layer = new Layer();                   // å‹•ä½œã—ãªã„

// âŒ ç¦æ­¢ï¼šWebGPUå‰æã‚³ãƒ¼ãƒ‰
app.renderer.gl.getExtension('...');         // WebGPUã§ã¯å­˜åœ¨ã—ãªã„
```

## ğŸ§ª ãƒ‡ãƒãƒƒã‚°ãƒ»å“è³ªä¿è¨¼æ–¹é‡ï¼ˆv8å¯¾å¿œï¼‰

### ğŸ“Š v8å¯¾å¿œãƒ‡ãƒãƒƒã‚°æƒ…å ±å¿…é ˆ
```javascript
class MyManagerV8 {
    /**
     * ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—ï¼ˆv8å¯¾å¿œç‰ˆå¿…é ˆå®Ÿè£…ï¼‰
     */
    getDebugInfo() {
        return {
            initialized: this.initialized,
            pixiVersion: PIXI.VERSION,                    // v8ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
            rendererType: this.pixiApp?.renderer?.type,   // webgpu/webgl/canvas
            webgpuSupported: this.webgpuSupported,        // WebGPUå¯¾å¿œçŠ¶æ³
            hasRequiredDeps: !!this.dependency,
            itemCount: this.items.size,
            currentState: this.state,
            lastError: this.lastError?.message || 'none',
            v8Features: this.getV8FeatureStatus()         // v8æ©Ÿèƒ½åˆ©ç”¨çŠ¶æ³
        };
    }
    
    getV8FeatureStatus() {
        return {
            containerHierarchy: true,      // Containeréšå±¤ä½¿ç”¨
            advancedGraphics: true,        // v8 Graphicsä½¿ç”¨
            webgpuRenderer: this.pixiApp?.renderer?.type === 'webgpu'
        };
    }
}
```

### ğŸ” v8ç§»è¡Œæ™‚å®Ÿè¡Œæ™‚æ¤œè¨¼
```javascript
// v8ç’°å¢ƒç¢ºèªï¼ˆé–‹ç™ºæ™‚å¿…é ˆï¼‰
console.assert(window.PIXI, 'PixiJS not loaded');
console.assert(PIXI.VERSION.startsWith('8.'), `PixiJS v8 required, got ${PIXI.VERSION}`);
console.assert(window.Tegaki.ErrorManagerInstance, 'ErrorManager not available');

// v8æ©Ÿèƒ½å¯¾å¿œç¢ºèª
if (await PIXI.isWebGPUSupported()) {
    console.log('ğŸš€ WebGPU supported - high performance rendering available');
} else {
    console.log('ğŸ“Š WebGPU not supported - using WebGL/Canvas fallback');
}

// ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ï¼ˆv8å¯¾å¿œçŠ¶æ³è¡¨ç¤ºï¼‰
console.log('ğŸ¨ Manager created (v8):', this.getDebugInfo());
```

## ğŸ”„ v8ç§»è¡Œæ®µéšçš„å®Ÿè¡Œæ–¹é‡

### ğŸ“‹ ç§»è¡Œæ®µéšï¼ˆå¿…é ˆé †åºï¼‰
```javascript
// Phase 1: åŸºç›¤ç§»è¡Œ
// 1. package.jsonä¾å­˜é–¢ä¿‚æ›´æ–°
// 2. CanvasManager v8å¯¾å¿œï¼ˆåŸºæœ¬å‹•ä½œç¢ºä¿ï¼‰
// 3. åŸºæœ¬æç”»å¾©æ—§ç¢ºèª

// Phase 2: æç”»æ©Ÿèƒ½ç§»è¡Œ  
// 4. PenTool v8 Graphicså¯¾å¿œ
// 5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»å®Ÿè£…
// 6. EraserTool v8å¯¾å¿œ

// Phase 3: çµ±åˆæ©Ÿèƒ½ç§»è¡Œ
// 7. å…¨Manager v8äº’æ›æ€§ç¢ºèª
// 8. ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†v8å¯¾å¿œ
// 9. çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æ€§èƒ½ç¢ºèª
```

### âš ï¸ ç§»è¡Œæ™‚å®‰å…¨ç¢ºä¿
```javascript
// âœ… æ®µéšçš„ç§»è¡Œï¼ˆä¸€æ‹¬æ›´æ–°ç¦æ­¢ï¼‰
class MigrationSafeManager {
    async migrateToV8Gradually() {
        try {
            // Step 1: v8åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ
            await this.testV8Initialization();
            
            // Step 2: åŸºæœ¬æ©Ÿèƒ½ç§»è¡Œ
            await this.migrateBasicFeatures();
            
            // Step 3: æ—¢å­˜æ©Ÿèƒ½å‹•ä½œç¢ºèª
            await this.verifyExistingFeatures();
            
        } catch (error) {
            console.error('âŒ v8 migration failed:', error);
            throw error; // ç§»è¡Œå¤±æ•—ã¯éš è”½ã—ãªã„
        }
    }
}

// ğŸš« ä¸€æ‹¬ç§»è¡Œç¦æ­¢
class BadMigration {
    migrateAllAtOnce() {
        // å…¨éƒ¨ä¸€æ°—ã«å¤‰æ›´ï¼ˆå±é™ºï¼‰
        this.updatePackageJson();
        this.convertAllManagers();
        this.updateAllTools();
        // â† ã©ã“ã§å¤±æ•—ã—ãŸã‹åˆ†ã‹ã‚‰ãªã„
    }
}
```

## ğŸ¯ v8æ´»ç”¨ã«ã‚ˆã‚‹æ€§èƒ½æ”¹å–„ç›®æ¨™

### ğŸ“Š æ€§èƒ½æ”¹å–„ç›®æ¨™å€¤
- **ãƒšãƒ³æç”»å¿œç­”æ€§**: é…å»¶ãªã—ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»
- **æç”»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ**: 60FPSç¶­æŒï¼ˆWebGPUç’°å¢ƒï¼‰
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: Containeréšå±¤æœ€é©åŒ–ã§20%å‰Šæ¸›
- **åˆæœŸåŒ–æ™‚é–“**: WebGPUæ´»ç”¨ã§30%çŸ­ç¸®

### âœ… v8æ©Ÿèƒ½æ´»ç”¨é …ç›®
```javascript
// 1. WebGPUé«˜é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
// 2. Containeréšå±¤ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†
// 3. æ”¹å–„ã•ã‚ŒãŸGraphics APIã«ã‚ˆã‚‹æ»‘ã‚‰ã‹æç”»
// 4. EventSystemçµ±åˆã«ã‚ˆã‚‹é«˜ç²¾åº¦ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
// 5. RenderTextureæ´»ç”¨ã«ã‚ˆã‚‹é«˜å“è³ªå‡ºåŠ›
```

## ğŸ“„ æ–‡æ›¸ç®¡ç†æ–¹é‡ï¼ˆv8å¯¾å¿œï¼‰

### ğŸ“š 3å†Šæ§‹é€ ã®å½¹å‰²åˆ†æ‹…ï¼ˆç¶™ç¶šï¼‰
- **ğŸ“ Rulebookï¼ˆæœ¬æ›¸v7ï¼‰**: v8å¯¾å¿œåŸºæœ¬æ–¹é‡ãƒ»æ§‹é€ ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»å“è³ªåŸºæº–
- **ğŸ“š Symbol Dictionary v7**: v8å¯¾å¿œAPIå®šç¾©ãƒ»ç¢ºå®šã—ãŸç”¨èªï¼ˆæ®µéšçš„æ›´æ–°ï¼‰  
- **ğŸš€ Evolution Plan v7**: v8ç§»è¡Œå…·ä½“çš„æ‰‹é †ãƒ»Phase2-3ç°¡ç•¥è¨ˆç”»

### ğŸ”’ v8ç§»è¡Œæ™‚æ›´æ–°ãƒ«ãƒ¼ãƒ«
- **Rulebook**: v8å¯¾å¿œåŸºæœ¬æ–¹é‡è¿½åŠ ãƒ»v7ã¨ã®å·®åˆ†æ˜è¨˜
- **Symbol Dictionary**: v8 APIç¢ºå®šå¾Œã«æ®µéšçš„æ›´æ–°
- **Evolution Plan**: v8ç§»è¡Œé€²æ—ã«åˆã‚ã›ã¦éšæ™‚æ›´æ–°

### âš ï¸ v8ç§»è¡Œå†—é•·åŒ–é˜²æ­¢
- v7ã¨ã®å·®åˆ†ã®ã¿è¨˜è¼‰ãƒ»é‡è¤‡å†…å®¹å›é¿
- v8å›ºæœ‰æ©Ÿèƒ½ã¯åˆ¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒ–
- ç§»è¡Œå®Œäº†å¾Œã«v7è¨˜è¿°ã¯å‰Šé™¤ãƒ»æ•´ç†

---

## ğŸš¨ **v8ç§»è¡Œæ™‚å³å®ˆäº‹é …**

### ğŸ’€ ç§»è¡Œæ™‚çµ¶å¯¾ç¦æ­¢ï¼ˆé‡å¤§é•åï¼‰
1. **v7ã¨v8 APIæ··åœ¨ä½¿ç”¨** - å¿…ãšã©ã¡ã‚‰ã‹çµ±ä¸€
2. **å‰Šé™¤æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¶™ç¶šä½¿ç”¨** - @pixi/layers, @pixi/graphics-smoothç­‰
3. **WebGPUæ±ºã‚æ‰“ã¡ã‚³ãƒ¼ãƒ‰** - å¿…ãšfallbackè€ƒæ…®
4. **ä¸€æ‹¬ç§»è¡Œå®Ÿè¡Œ** - å¿…ãšæ®µéšçš„ç§»è¡Œ
5. **ç§»è¡Œå¤±æ•—éš è”½** - ã‚¨ãƒ©ãƒ¼ã¯å¿…ãšthrowãƒ»æ¡ã‚Šã¤ã¶ã—ç¦æ­¢

### âœ… v8ç§»è¡Œæ™‚å¿…é ˆéµå®ˆ
1. **æ®µéšçš„ç§»è¡Œå®Ÿè¡Œ** - Phaseåˆ†å‰²ãƒ»å‹•ä½œç¢ºèªã—ãªãŒã‚‰é€²è¡Œ
2. **WebGPUå¯¾å¿œç¢ºèª** - isWebGPUSupported()å¿…é ˆãƒã‚§ãƒƒã‚¯
3. **æ—¢å­˜æ©Ÿèƒ½ä¿è­·** - Phase1.5å®Œäº†æ©Ÿèƒ½ã®å‹•ä½œä¿è¨¼
4. **æ€§èƒ½æ”¹å–„ç¢ºèª** - v8ç§»è¡ŒåŠ¹æœã®å®šé‡çš„ç¢ºèª
5. **ã‚¨ãƒ©ãƒ¼å‡¦ç†å¼·åŒ–** - v8ç§»è¡Œæ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚‚ ErrorManager çµŒç”±

### ğŸ¯ v8ç§»è¡ŒæˆåŠŸåŸºæº–
- [ ] ãƒšãƒ³ãƒ„ãƒ¼ãƒ«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»å®Ÿç¾
- [ ] åˆå›ãƒšãƒ³ã‚¢ã‚¤ã‚³ãƒ³æŠ¼ä¸‹ä¸è¦åŒ–
- [ ] æ—¢å­˜Phase1.5æ©Ÿèƒ½ã™ã¹ã¦å‹•ä½œç¶™ç¶š
- [ ] WebGPUç’°å¢ƒã§æç”»æ€§èƒ½50%ä»¥ä¸Šå‘ä¸Š
- [ ] ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡å¤§å¹…å‰Šæ¸›

---

**ğŸ“ æ›´æ–°æ–¹é‡**: v8å¯¾å¿œåŸºæœ¬æ–¹é‡ãƒ»v7ã¨ã®å·®åˆ†æ˜è¨˜ãƒ»ç§»è¡Œå®Œäº†å¾Œæ•´ç†  
**ğŸ¯ å“è³ªã®éµ**: ã‚¨ãƒ©ãƒ¼ã‚’éš ã™ãªãƒ»æ§‹é€ ã‚’é€ã‘ã•ã›ã‚ãƒ»v8æ©Ÿèƒ½ã‚’ãƒ•ãƒ«æ´»ç”¨ã—ã‚  
**ğŸ’€ åŸºæœ¬åŸå‰‡**: æ€ªç‰©ã‚³ãƒ¼ãƒ‰æ’²æ»…ãƒ»v8ç§»è¡Œã§ã‚‚å‰›ç›´æ§‹é€ ç¶™ç¶šãƒ»æ®µéšçš„ç§»è¡Œå³å®ˆ