# ğŸ“š Tegakiã‚·ãƒ³ãƒœãƒ«è¾å…¸ v1.2-Final - å®Ÿè£…ç¾çŠ¶å®Œå…¨æº–æ‹ ç‰ˆ

> **å®Ÿè£…ç¢ºèªæ¸ˆã¿ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿è¨˜è¼‰** - Phase1rev10ç¾çŠ¶åˆ†æå®Œäº†ãƒ»ç·Šæ€¥ä¿®æ­£é …ç›®æ˜è¨˜

## ğŸš¨ Phase1rev10ã®ç¾çŠ¶å•é¡Œ

### âœ… å‹•ä½œã—ã¦ã„ã‚‹ã‚‚ã®
- **PixiJSåŸºç›¤**: æ­£å¸¸å‹•ä½œ
- **ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ **: layer0(èƒŒæ™¯)ãƒ»layer1(æç”»)ã®åˆ†é›¢å®Œæˆ
- **ã‚¢ã‚¤ã‚³ãƒ³ã‚·ã‚¹ãƒ†ãƒ **: TegakiIconså®Œå…¨å®Ÿè£…ãƒ»æœªæ´»ç”¨
- **ã‚¨ãƒ©ãƒ¼ç®¡ç†**: ErrorManagerå®Ÿè£…æ¸ˆã¿
- **è¨­å®šç®¡ç†**: ConfigManagerå®Ÿè£…æ¸ˆã¿

### ğŸš¨ ç·Šæ€¥ä¿®æ­£å¿…è¦
1. **TegakiApplication**: å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒåº§æ¨™ã‚ºãƒ¬å•é¡Œã‚ã‚Š
2. **åº§æ¨™å¤‰æ›**: ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‹ã‚‰ç´„200pxå³ä¸‹ã§æç”»ã•ã‚Œã‚‹
3. **ã‚¢ã‚¤ã‚³ãƒ³å‘¼ã³å‡ºã—**: setupIcons()å®Ÿè£…æ¸ˆã¿ã ãŒå•é¡Œã®å¯èƒ½æ€§
4. **EraserTool**: å®Ÿè£…æ¸ˆã¿ã ãŒå‹•ä½œç¢ºèªè¦

## ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«åå‰ç©ºé–“ï¼ˆå®Ÿè£…ç¢ºèªæ¸ˆã¿ï¼‰

### window.Tegaki.*ï¼ˆå®Ÿåœ¨ç¢ºèªæ¸ˆã¿ï¼‰
```javascript
window.Tegaki = {
    // ===== ã‚¯ãƒ©ã‚¹å®šç¾©ï¼ˆå®Ÿåœ¨ç¢ºèªæ¸ˆã¿ï¼‰ =====
    AppCore,                    // main.js - ManageræŸã­å°‚ä»»
    TegakiApplication,          // app-core.js - UIé€£æºãƒ»åº§æ¨™å¤‰æ›å°‚ä»»
    CanvasManager,              // canvas-manager.js - PixiJSãƒ»ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç†
    ToolManager,                // tool-manager.js - ãƒ„ãƒ¼ãƒ«é¸æŠãƒ»ã‚¤ãƒ™ãƒ³ãƒˆè»¢é€
    PenTool,                    // pen-tool.js - ãƒ™ã‚¯ã‚¿ãƒ¼æç”»
    EraserTool,                 // eraser-tool.js - æ¶ˆã—ã‚´ãƒ 
    ErrorManager,               // error-manager.js - ã‚¨ãƒ©ãƒ¼å‡¦ç†
    ConfigManager,              // config-manager.js - è¨­å®šç®¡ç†
    EventBus,                   // event-bus.js - ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡
    TegakiIcons,               // icons.js - SVGç”Ÿæˆãƒ»ã‚¢ã‚¤ã‚³ãƒ³é©ç”¨
    
    // ===== ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆè‡ªå‹•ä½œæˆï¼‰ =====
    ErrorManagerInstance,       // error-manager.js ã§è‡ªå‹•ä½œæˆ
    ConfigManagerInstance,      // config-manager.js ã§è‡ªå‹•ä½œæˆ
    EventBusInstance,          // event-bus.js ã§è‡ªå‹•ä½œæˆ
    
    // ===== å‹•çš„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆå®Ÿè¡Œæ™‚ä½œæˆï¼‰ =====
    // TegakiApplicationInstance  // bootstrap.js ã§ä½œæˆï¼ˆappèµ·å‹•æ™‚ï¼‰
    // AppCoreInstance           // TegakiApplicationå†…ã§ä½œæˆ
    // CanvasManagerInstance     // AppCoreå†…ã§ä½œæˆ
    // ToolManagerInstance       // AppCoreå†…ã§ä½œæˆ
};
```

## ğŸ¯ TegakiApplicationï¼ˆapp-core.jsï¼‰- åº§æ¨™ã‚ºãƒ¬å•é¡Œã‚ã‚Š

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // è‡ªå‹•åˆæœŸåŒ–å®Ÿè¡Œ
async initialize()                     // AppCoreä½œæˆãƒ»Canvasãƒ»UIè¨­å®š
async initializeAppCore()              // AppCoreåˆæœŸåŒ–ï¼ˆCanvasManagerã®ã¿ï¼‰
createCanvas()                         // PixiJS Applicationä½œæˆãƒ»DOMé…ç½®
async initializeToolManager()          // ToolManageråˆæœŸåŒ–ï¼ˆPixiJSè¨­å®šå¾Œï¼‰
setupUI()                             // ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ãƒœã‚¿ãƒ³è¨­å®š
setupCanvasEvents()                   // Canvas ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
setupToolButtons()                    // ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
setupIcons()                          // ã‚¢ã‚¤ã‚³ãƒ³é©ç”¨ï¼ˆTegakiIconsä½¿ç”¨ï¼‰
selectTool(toolName)                  // ãƒ„ãƒ¼ãƒ«é¸æŠãƒ»UIæ›´æ–°
updateToolButtons(activeToolName)     // ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³UIæ›´æ–°
updateStatusDisplay()                 // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºæ›´æ–°

// ===== ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ï¼ˆğŸš¨åº§æ¨™ã‚ºãƒ¬å•é¡Œï¼‰ =====
handlePointerDown(e)                  // ãƒã‚¤ãƒ³ã‚¿ãƒ¼æŠ¼ä¸‹ãƒ»åº§æ¨™å¤‰æ›ãƒ»è»¢é€
handlePointerMove(e)                  // ãƒã‚¤ãƒ³ã‚¿ãƒ¼ç§»å‹•ãƒ»åº§æ¨™å¤‰æ›ãƒ»è»¢é€
handlePointerUp(e)                    // ãƒã‚¤ãƒ³ã‚¿ãƒ¼è§£æ”¾ãƒ»åº§æ¨™å¤‰æ›ãƒ»è»¢é€
getCanvasCoordinates(e)               // ğŸš¨ DOMâ†’Canvasåº§æ¨™å¤‰æ›ï¼ˆå•é¡Œç®‡æ‰€ï¼‰
updateCoordinates(x, y)               // åº§æ¨™è¡¨ç¤ºæ›´æ–°

// ===== ãã®ä»– =====
showSuccessMessage()                  // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

### ğŸš¨ åº§æ¨™ã‚ºãƒ¬å•é¡Œã®è©³ç´°ï¼ˆç·Šæ€¥ä¿®æ­£å¿…è¦ï¼‰
```javascript
// å•é¡Œç—‡çŠ¶: ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‹ã‚‰ç´„200pxå³ä¸‹ã§æç”»ã•ã‚Œã‚‹
// å•é¡Œç®‡æ‰€: getCanvasCoordinates(e) ãƒ¡ã‚½ãƒƒãƒ‰
// åŸå› å€™è£œ:
// 1. Canvas DOMé…ç½®ã¨PixiJSå†…éƒ¨åº§æ¨™ã®ä¸ä¸€è‡´
// 2. devicePixelRatioãƒ»ã‚¹ã‚±ãƒ¼ãƒ«è¨ˆç®—ã®èª¤ç”¨
// 3. getBoundingClientRect()ã®çµæœã¨Canvaså®Ÿåº§æ¨™ã®ä¹–é›¢
// 4. CSS transformãƒ»positioning ã«ã‚ˆã‚‹åº§æ¨™ã‚ªãƒ•ã‚»ãƒƒãƒˆ
```

## ğŸ–Šï¸ AppCoreï¼ˆmain.jsï¼‰- ManageræŸã­å°‚ä»»ï¼ˆæ­£å¸¸å‹•ä½œï¼‰

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
async initializeCanvasManager()        // CanvasManagerå˜ä½“åˆæœŸåŒ–
setPixiApp(pixiApp)                   // PixiJS Applicationè¨­å®šãƒ»è»¢é€
verifyLayerStructure()                // ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ç¢ºèª
async initializeToolManager()          // ToolManageråˆæœŸåŒ–ï¼ˆPixiJSè¨­å®šå¾Œï¼‰
start()                               // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
getCanvasManager()                     // CanvasManagerå–å¾—
getToolManager()                       // ToolManagerå–å¾—
isReady()                             // åˆæœŸåŒ–å®Œäº†ç¢ºèª

// ===== ä¾¿åˆ©ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆãƒ„ãƒ¼ãƒ«é€£æºï¼‰ =====
selectTool(toolName)                  // ãƒ„ãƒ¼ãƒ«é¸æŠ
clearCanvas()                         // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¯ãƒªã‚¢
setColor(color)                       // è‰²å¤‰æ›´
setLineWidth(width)                   // ç·šå¹…å¤‰æ›´
setOpacity(opacity)                   // é€æ˜åº¦å¤‰æ›´
setEraserSize(size)                   // æ¶ˆã—ã‚´ãƒ ã‚µã‚¤ã‚ºå¤‰æ›´
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
destroy()                             // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

## ğŸ¨ CanvasManagerï¼ˆmanagers/canvas-manager.jsï¼‰- ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢å®Œæˆ

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setPixiApp(pixiApp)                   // PixiJSè¨­å®šãƒ»ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢æ§‹é€ ä½œæˆ
createLayerStructure()                // layer0(èƒŒæ™¯) + layer1(æç”») ä½œæˆ
createLayer(layerId)                  // ãƒ¬ã‚¤ãƒ¤ãƒ¼ä½œæˆï¼ˆæ±ç”¨ï¼‰

// ===== Graphicsé…ç½®ï¼ˆæç”»ã®å®Ÿè¡Œè²¬ä»»ï¼‰ =====
addGraphicsToLayer(graphics, layerId) // Graphicsé…ç½®ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼å„ªå…ˆï¼‰
addEraseGraphicsToLayer(graphics, layerId) // æ¶ˆå»Graphicsé…ç½®ï¼ˆERASEãƒ–ãƒ¬ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ï¼‰

// ===== ãƒ¬ã‚¤ãƒ¤ãƒ¼ç®¡ç† =====
setActiveLayer(layerId)               // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼è¨­å®š
getActiveLayer()                      // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
getActiveLayerId()                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼IDå–å¾—
getLayer(layerId)                     // ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
getMainLayer()                        // ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—ï¼ˆäº’æ›æ€§ï¼‰
getBackgroundLayer()                  // èƒŒæ™¯ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
getDrawingLayer()                     // æç”»ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—

// ===== ã‚¯ãƒªã‚¢å‡¦ç† =====
clear()                               // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒªã‚¢ï¼ˆèƒŒæ™¯ä¿è­·ï¼‰
clearAllDrawingLayers()               // å…¨æç”»ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒªã‚¢ï¼ˆèƒŒæ™¯ä¿è­·ï¼‰
clearLayer(layerId)                   // ç‰¹å®šãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒªã‚¢

// ===== ãã®ä»– =====
resizeCanvas(width, height)           // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºå¤‰æ›´ï¼ˆèƒŒæ™¯æ›´æ–°ä»˜ãï¼‰
getPixiApp()                          // PixiJS Applicationå–å¾—
isReady()                             // æº–å‚™çŠ¶æ…‹ç¢ºèª
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

### ğŸ¨ ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ï¼ˆå®Ÿè£…å®Œæˆï¼‰
```javascript
// layer0: èƒŒæ™¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆä¿è­·å¯¾è±¡ï¼‰
// - ãµãŸã°ã‚¯ãƒªãƒ¼ãƒ è‰²ï¼ˆ#f0e0d6ï¼‰ã§å¡—ã‚Šã¤ã¶ã—
// - zIndex: 0ï¼ˆæœ€èƒŒé¢ï¼‰
// - æ¶ˆã—ã‚´ãƒ å¯¾è±¡å¤–ãƒ»ã‚¯ãƒªã‚¢ç¦æ­¢

// layer1: æç”»ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼‰
// - é€æ˜ãƒ»æç”»å¯¾è±¡
// - zIndex: 1ï¼ˆå‰é¢ï¼‰
// - ãƒšãƒ³ãƒ»æ¶ˆã—ã‚´ãƒ å¯¾è±¡
```

## ğŸ–Šï¸ ToolManagerï¼ˆmanagers/tool-manager.jsï¼‰- ãƒ„ãƒ¼ãƒ«é¸æŠãƒ»ã‚¤ãƒ™ãƒ³ãƒˆè»¢é€

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setCanvasManager(canvasManager)        // CanvasManagerè¨­å®š
createTools()                          // ãƒ„ãƒ¼ãƒ«ä½œæˆï¼ˆPenToolãƒ»EraserToolï¼‰
selectTool(toolName)                   // ãƒ„ãƒ¼ãƒ«é¸æŠï¼ˆ'pen'/'eraser'ï¼‰
getCurrentTool()                       // ç¾åœ¨ãƒ„ãƒ¼ãƒ«å–å¾—
getCurrentToolName()                   // ç¾åœ¨ãƒ„ãƒ¼ãƒ«åå–å¾—

// ===== ã‚¤ãƒ™ãƒ³ãƒˆè»¢é€ï¼ˆåº§æ¨™ã¯ãã®ã¾ã¾è»¢é€ï¼‰ =====
handlePointerDown(x, y, event)        // ãƒã‚¤ãƒ³ã‚¿ãƒ¼æŠ¼ä¸‹è»¢é€
handlePointerMove(x, y, event)         // ãƒã‚¤ãƒ³ã‚¿ãƒ¼ç§»å‹•è»¢é€
handlePointerUp(x, y, event)          // ãƒã‚¤ãƒ³ã‚¿ãƒ¼è§£æ”¾è»¢é€

// ===== ãã®ä»– =====
getAvailableTools()                    // åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«ä¸€è¦§
getToolInfo(toolName)                  // ãƒ„ãƒ¼ãƒ«æƒ…å ±å–å¾—
isReady()                             // æº–å‚™çŠ¶æ…‹ç¢ºèª
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

## âœï¸ PenToolï¼ˆtools/pen-tool.jsï¼‰- ãƒ™ã‚¯ã‚¿ãƒ¼æç”»

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setCanvasManager(canvasManager)        // CanvasManagerè¨­å®š

// ===== æç”»å‡¦ç†ï¼ˆåº§æ¨™ã¯ãã®ã¾ã¾ä½¿ç”¨ï¼‰ =====
onPointerDown(x, y, event)            // æç”»é–‹å§‹ãƒ»Graphicsä½œæˆãƒ»é…ç½®
onPointerMove(x, y, event)            // æç”»ç¶™ç¶šãƒ»ç·šãƒ»å††æç”»
onPointerUp(x, y, event)              // æç”»çµ‚äº†ãƒ»å®Œæˆå‡¦ç†

// ===== Graphicsæç”» =====
drawPointCircle(x, y)                 // ç‚¹æç”»ï¼ˆå††ï¼‰
updateGraphicsStyle()                 // Graphics ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°
drawSmoothLine()                      // ã‚¹ãƒ ãƒ¼ã‚ºæ›²ç·šæç”»ï¼ˆãƒ™ã‚¸ã‚§ã‚«ãƒ¼ãƒ–ï¼‰

// ===== è¨­å®šãƒ¡ã‚½ãƒƒãƒ‰ =====
setPenColor(color)                    // è‰²è¨­å®š
setPenWidth(width)                    // ç·šå¹…è¨­å®š
setPenOpacity(opacity)                // é€æ˜åº¦è¨­å®š
setSmoothing(enabled)                 // ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°è¨­å®š

// ===== Phase1.5æº–å‚™ï¼ˆå°†æ¥æ‹¡å¼µï¼‰ =====
getStrokeHistory()                    // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å±¥æ­´å–å¾—
redrawStroke(strokeData)              // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å†æç”»
removeLastStroke()                    // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å‰Šé™¤
toSVGData()                           // SVGå¤‰æ›ç”¨ãƒ‡ãƒ¼ã‚¿å–å¾—
strokeToSVGPath(stroke)               // SVGãƒ‘ã‚¹æ–‡å­—åˆ—å¤‰æ›
enablePhase15Features()               // Phase1.5æ©Ÿèƒ½æœ‰åŠ¹åŒ–
enablePhase2Features()                // Phase2æ©Ÿèƒ½æœ‰åŠ¹åŒ–

// ===== ãã®ä»– =====
getSettings()                         // è¨­å®šå–å¾—
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

## ğŸ§¹ EraserToolï¼ˆtools/eraser-tool.jsï¼‰- æ¶ˆã—ã‚´ãƒ ï¼ˆè¦å‹•ä½œç¢ºèªï¼‰

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setCanvasManager(canvasManager)        // CanvasManagerè¨­å®š

// ===== æ¶ˆå»å‡¦ç†ï¼ˆå®Ÿè£…æ¸ˆã¿ãƒ»è¦å‹•ä½œç¢ºèªï¼‰ =====
onPointerDown(x, y, event)            // æ¶ˆå»é–‹å§‹ï¼ˆERASEãƒ–ãƒ¬ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ï¼‰
onPointerMove(x, y, event)            // æ¶ˆå»ç¶™ç¶š
onPointerUp(x, y, event)              // æ¶ˆå»çµ‚äº†

// ===== è¨­å®šãƒ¡ã‚½ãƒƒãƒ‰ =====
setEraserSize(size)                   // æ¶ˆã—ã‚´ãƒ ã‚µã‚¤ã‚ºè¨­å®š
setEraserOpacity(opacity)             // æ¶ˆã—ã‚´ãƒ é€æ˜åº¦è¨­å®š
getSettings()                         // è¨­å®šå–å¾—
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

## ğŸ¯ TegakiIconsï¼ˆassets/icons.jsï¼‰- SVGç”Ÿæˆãƒ»ã‚¢ã‚¤ã‚³ãƒ³é©ç”¨ï¼ˆå®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼‰

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
// ===== é™çš„ãƒ‡ãƒ¼ã‚¿ =====
svgData: { ... }                      // SVGå®šç¾©ãƒ‡ãƒ¼ã‚¿ï¼ˆ9ç¨®é¡ã®ã‚¢ã‚¤ã‚³ãƒ³ï¼‰
buttonMappings: { ... }               // ãƒœã‚¿ãƒ³IDâ†’ã‚¢ã‚¤ã‚³ãƒ³åãƒãƒƒãƒ”ãƒ³ã‚°

// ===== ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆãƒ»é©ç”¨ =====
createIcon(iconName, options)         // SVGã‚¢ã‚¤ã‚³ãƒ³è¦ç´ ä½œæˆ
replaceButtonIcon(buttonId, iconName) // ç‰¹å®šãƒœã‚¿ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ç½®æ›
replaceAllToolIcons()                 // â˜…é‡è¦ï¼šå…¨ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ä¸€æ‹¬ç½®æ›
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

### ğŸ¨ å¯¾å¿œã‚¢ã‚¤ã‚³ãƒ³ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
```javascript
// å®Œå…¨å®Ÿè£…æ¸ˆã¿ã®ã‚¢ã‚¤ã‚³ãƒ³
download, resize, palette, pen, eraser, fill, select, layers, settings

// ãƒœã‚¿ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
'download-tool' â†’ 'download'
'resize-tool' â†’ 'resize'  
'palette-tool' â†’ 'palette'
'pen-tool' â†’ 'pen'
'eraser-tool' â†’ 'eraser'
'fill-tool' â†’ 'fill'
'select-tool' â†’ 'select'
'layers-tool' â†’ 'layers'
'settings-tool' â†’ 'settings'
```

## ğŸš¨ ErrorManagerï¼ˆjs/utils/error-manager.jsï¼‰- ã‚¨ãƒ©ãƒ¼å‡¦ç†å°‚ä»»

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
showError(type, message, options)      // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
showVisualNotification(type, message, options) // è¦–è¦šé€šçŸ¥
showInfo(message, options)             // æƒ…å ±è¡¨ç¤º
showWarning(message, options)          // è­¦å‘Šè¡¨ç¤º
showCritical(message, options)         // é‡è¦ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
getBackgroundColor(type)              // èƒŒæ™¯è‰²å–å¾—
getTextColor(type)                    // ãƒ†ã‚­ã‚¹ãƒˆè‰²å–å¾—
getBorderColor(type)                  // ãƒœãƒ¼ãƒ€ãƒ¼è‰²å–å¾—
getErrors()                           // ã‚¨ãƒ©ãƒ¼è¨˜éŒ²å–å¾—
clear()                               // ã‚¨ãƒ©ãƒ¼è¨˜éŒ²ã‚¯ãƒªã‚¢
```

## âš™ï¸ ConfigManagerï¼ˆjs/utils/config-manager.jsï¼‰- è¨­å®šç®¡ç†

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
getCanvasConfig()                     // ã‚­ãƒ£ãƒ³ãƒã‚¹è¨­å®šå–å¾—
getPenConfig()                        // ãƒšãƒ³è¨­å®šå–å¾—
getEraserConfig()                     // æ¶ˆã—ã‚´ãƒ è¨­å®šå–å¾—
getUIConfig()                         // UIè¨­å®šå–å¾—
updateConfig(section, updates)        // è¨­å®šæ›´æ–°
resetToDefaults()                     // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šå¾©å…ƒ
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

## ğŸ“¡ EventBusï¼ˆjs/utils/event-bus.jsï¼‰- ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
on(eventName, callback)               // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
off(eventName, callback)              // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼å‰Šé™¤
emit(eventName, data)                 // ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
once(eventName, callback)             // ä¸€å›é™ã‚Šãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²
getListeners(eventName)               // ãƒªã‚¹ãƒŠãƒ¼ä¸€è¦§å–å¾—
clear()                               // å…¨ãƒªã‚¹ãƒŠãƒ¼å‰Šé™¤
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—
```

## ğŸš€ Bootstrapï¼ˆjs/bootstrap.jsï¼‰- ã‚¢ãƒ—ãƒªèµ·å‹•

### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½
```javascript
// DOMContentLoadedå¾…æ©Ÿå¾Œã«ä»¥ä¸‹ã‚’å®Ÿè¡Œ
new window.Tegaki.TegakiApplication()  // TegakiApplication ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
// window.TegakiAppInstance ã«æ ¼ç´    // ãƒ‡ãƒãƒƒã‚°ç”¨ã‚°ãƒ­ãƒ¼ãƒãƒ«å‚ç…§
```

## ğŸ”§ ç·Šæ€¥ä¿®æ­£é …ç›®ï¼ˆPhase1rev10 â†’ Phase1rev11ï¼‰

### 1. ğŸš¨ åº§æ¨™ã‚ºãƒ¬å•é¡Œï¼ˆæœ€å„ªå…ˆï¼‰
**ç—‡çŠ¶**: ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‹ã‚‰ç´„200pxå³ä¸‹ã§æç”»ã•ã‚Œã‚‹
**ä¿®æ­£ç®‡æ‰€**: `TegakiApplication.getCanvasCoordinates(e)`
**ä¿®æ­£æ–¹æ³•**: 
- CSS positioningãƒ»transform ã®å½±éŸ¿ç¢ºèª
- getBoundingClientRect() ã®çµæœæ¤œè¨¼
- devicePixelRatio å‡¦ç†ã®ç°¡ç´ åŒ–
- Canvasè¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šç¢ºèª

### 2. âš ï¸ EraserToolå‹•ä½œç¢ºèª
**ç¢ºèªé …ç›®**: ERASEãƒ–ãƒ¬ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ãŒæ­£å¸¸å‹•ä½œã™ã‚‹ã‹
**ãƒ†ã‚¹ãƒˆæ–¹æ³•**: ãƒšãƒ³ã§æç”»å¾Œã€æ¶ˆã—ã‚´ãƒ ã§æ¶ˆå»ãƒ†ã‚¹ãƒˆ

### 3. ğŸ¨ ã‚¢ã‚¤ã‚³ãƒ³å‘¼ã³å‡ºã—ç¢ºèª
**ç¢ºèªé …ç›®**: `TegakiIcons.replaceAllToolIcons()` ãŒæ­£å¸¸å®Ÿè¡Œã•ã‚Œã‚‹ã‹
**ã‚¨ãƒ©ãƒ¼ç®‡æ‰€**: setupIcons() ãƒ¡ã‚½ãƒƒãƒ‰ã§ã®ã‚¢ã‚¤ã‚³ãƒ³é©ç”¨

### 4. ğŸ“‹ è¨­å®šå€¤æ¤œè¨¼
**ç¢ºèªé …ç›®**: ConfigManager ã®è¨­å®šå€¤ãŒé©åˆ‡ã‹
**ç‰¹ã«**: Canvas ã‚µã‚¤ã‚ºãƒ»åº§æ¨™ç³»è¨­å®š

## ğŸ¯ å‹•ä½œãƒ•ãƒ­ãƒ¼ï¼ˆPhase1rev10ç¾åœ¨ï¼‰

### æ­£å¸¸ãªèµ·å‹•ãƒ•ãƒ­ãƒ¼
1. **HTMLèª­ã¿è¾¼ã¿** â†’ å…¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿å®Œäº†
2. **Bootstrap** â†’ `new TegakiApplication()`
3. **TegakiApplication.initialize()** 
   - AppCoreä½œæˆ
   - Canvasä½œæˆãƒ»DOMé…ç½®
   - ToolManageråˆæœŸåŒ–
   - UIè¨­å®šï¼ˆ**ã‚¢ã‚¤ã‚³ãƒ³é©ç”¨å«ã‚€**ï¼‰
4. **æç”»ãƒ†ã‚¹ãƒˆ** â†’ ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ â†’ åº§æ¨™å¤‰æ› â†’ ãƒ„ãƒ¼ãƒ«å‡¦ç†

### å•é¡Œç™ºç”Ÿç®‡æ‰€
- **åº§æ¨™å¤‰æ›**: `getCanvasCoordinates()` ã§ã®ã‚ºãƒ¬è¨ˆç®—
- **ã‚¢ã‚¤ã‚³ãƒ³**: setupIcons() å®Ÿè¡Œæ™‚ã®ã‚¨ãƒ©ãƒ¼å¯èƒ½æ€§
- **æ¶ˆã—ã‚´ãƒ **: ERASEãƒ–ãƒ¬ãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰å‹•ä½œç¢ºèªè¦

---

## ğŸ“ Phase1rev11ä¿®æ­£è¨ˆç”»

### Step1: åº§æ¨™ã‚ºãƒ¬æ ¹æœ¬ä¿®æ­£
- `getCanvasCoordinates()` ã®åº§æ¨™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯è¦‹ç›´ã—
- Canvasé…ç½®ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã®ç¢ºèªãƒ»ä¿®æ­£

### Step2: æ©Ÿèƒ½å‹•ä½œç¢ºèª
- ã‚¢ã‚¤ã‚³ãƒ³é©ç”¨ã®æˆåŠŸç¢ºèª
- EraserTool ã®æ¶ˆå»å‹•ä½œç¢ºèª
- å…¨ä½“çš„ãªå‹•ä½œå®‰å®šæ€§ç¢ºèª

### Step3: å“è³ªå‘ä¸Š
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„
- ãƒ‡ãƒãƒƒã‚°æƒ…å ±å……å®Ÿ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

**ã“ã®è¾å…¸ã¯Phase1rev10ã®å®Ÿè£…ç¾çŠ¶ã«åŸºã¥ãæ­£ç¢ºãªè¨˜éŒ²ã§ã™ã€‚åº§æ¨™ã‚ºãƒ¬å•é¡Œã®æ—©æ€¥ãªä¿®æ­£ãŒå¿…è¦ã§ã™ã€‚**