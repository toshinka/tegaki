# ğŸ“š Tegaki ã‚·ãƒ³ãƒœãƒ«è¾å…¸ v1.1 - ç¾å®Ÿæº–æ‹ ç‰ˆ

> **å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹ã‚¯ãƒ©ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿è¨˜è¼‰** - æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰è¨˜è¼‰å³ç¦

## ğŸš¨ é‡è¦ãªæ³¨æ„ï¼šç¾å®Ÿã¨ã®ä¹–é›¢ã‚’ä¿®æ­£

### âŒ å‰ç‰ˆã®å•é¡Œ
- **æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰è¨˜è¼‰**: å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã€Œå®Ÿè£…æ¸ˆã¿ã€ã¨è¨˜è¼‰
- **ã‚¯ãƒ©ã‚¹é‡è¤‡ç„¡è¦–**: `AppCore`ãŒ3ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å•é¡Œã‚’è¨˜è¼‰ã›ãš
- **TegakiIconsç„¡è¦–**: å®Ÿè£…æ¸ˆã¿ã®`TegakiIcons`ãŒè¾å…¸ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„

### âœ… ä¿®æ­£æ–¹é‡
- **å®Ÿè£…ç¢ºèªæ¸ˆã¿ã®ã¿è¨˜è¼‰**
- **é‡è¤‡å•é¡Œæ˜è¨˜**
- **ç¾å®Ÿã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ åæ˜ **

## ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«åå‰ç©ºé–“ï¼ˆç¾å®Ÿç‰ˆï¼‰

### window.Tegaki.*ï¼ˆå®Ÿéš›ã«å­˜åœ¨ï¼‰
```javascript
window.Tegaki = {
    // ã‚¯ãƒ©ã‚¹å®šç¾©ï¼ˆå®Ÿåœ¨ç¢ºèªæ¸ˆã¿ï¼‰
    AppCore,                    // main.js ã§å®šç¾©ï¼ˆManageræŸã­ç‰ˆï¼‰
    CanvasManager,              // canvas-manager.js ã§å®šç¾©
    ToolManager,                // tool-manager.js ã§å®šç¾©
    PenTool,                    // pen-tool.js ã§å®šç¾©
    EraserTool,                 // eraser-tool.js ã§å®šç¾©
    ErrorManager,               // error-manager.js ã§å®šç¾©
    ConfigManager,              // config-manager.js ã§å®šç¾©
    EventBus,                   // event-bus.js ã§å®šç¾©
    TegakiIcons,               // icons.js ã§å®šç¾©ï¼ˆé‡è¦ï¼šå‰ç‰ˆã§è¨˜è¼‰æ¼ã‚Œï¼‰
    
    // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆè‡ªå‹•ä½œæˆï¼‰
    ErrorManagerInstance,       // error-manager.js ã§ä½œæˆ
    ConfigManagerInstance,      // config-manager.js ã§ä½œæˆ
    EventBusInstance,          // event-bus.js ã§ä½œæˆ
    
    // æ³¨æ„ï¼šä»¥ä¸‹ã¯å‹•çš„ã«ä½œæˆã•ã‚Œã‚‹
    CanvasManagerInstance,     // main.js AppCore.initialize()ã§ä½œæˆ
    ToolManagerInstance        // main.js AppCore.initialize()ã§ä½œæˆ
};
```

### âŒ å­˜åœ¨ã—ãªã„ãŒå‚ç…§ã•ã‚Œã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹
```javascript
// bootstrap.jsãŒæ¢ã—ã¦ã„ã‚‹ãŒå­˜åœ¨ã—ãªã„
window.Tegaki.TegakiApplication    // app-core.jsã§å®šç¾©ã™ã¹ãã ãŒç¾åœ¨ã¯AppCore
```

### âš ï¸ é‡è¤‡å®šç¾©å•é¡Œ
```javascript
// åŒã˜AppCoreãŒ3ãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹
main.js:         window.Tegaki.AppCore = AppCore;      // ManageræŸã­ç‰ˆ
app-core.js:     window.Tegaki.AppCore = AppCore;      // åŒåã§ä¸Šæ›¸ã
minimal-deps.js: window.Tegaki.AppCore = AppCore;      // æœ€å°é™ç‰ˆã§ä¸Šæ›¸ã
```

## ğŸ–Šï¸ AppCoreï¼ˆmain.jsç‰ˆï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
async initialize()                     // Managerä½œæˆãƒ»é€£æºè¨­å®š
setPixiApp(pixiApp)                   // CanvasManagerã«PixiAppè¨­å®š
getCanvasManager()                     // CanvasManagerå–å¾—
getToolManager()                       // ToolManagerå–å¾—
isReady()                             // åˆæœŸåŒ–å®Œäº†ç¢ºèª
start()                               // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±å–å¾—

// ä¾¿åˆ©ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆmain.jsç‰ˆã§è¿½åŠ ç¢ºèªï¼‰
selectTool(toolName)                  // ãƒ„ãƒ¼ãƒ«é¸æŠ
clearCanvas()                         // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¯ãƒªã‚¢
setColor(color)                       // è‰²å¤‰æ›´
setLineWidth(width)                   // ç·šå¹…å¤‰æ›´
setOpacity(opacity)                   // é€æ˜åº¦å¤‰æ›´
setEraserSize(size)                   // æ¶ˆã—ã‚´ãƒ ã‚µã‚¤ã‚ºå¤‰æ›´
destroy()                             // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

## âŒ AppCoreï¼ˆapp-core.jsç‰ˆï¼‰- é‡è¤‡å•é¡Œ

### å•é¡Œ
- **åŒã˜ã‚¯ãƒ©ã‚¹å**: `main.js`ã¨ç«¶åˆ
- **å½¹å‰²ä¸æ˜**: TegakiApplicationã‚’å®šç¾©ã™ã¹ãã ãŒåå‰ãŒé•ã†
- **ä¿®æ­£å¿…è¦**: `TegakiApplication`ã«åå‰å¤‰æ›´

## ğŸ¨ CanvasManagerï¼ˆmanagers/canvas-manager.jsï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setPixiApp(pixiApp)                   // PixiJS Applicationè¨­å®š
createLayerStructure()                // layer0(èƒŒæ™¯) + layer1(æç”»)ä½œæˆ
createLayer(layerId)                  // ãƒ¬ã‚¤ãƒ¤ãƒ¼ä½œæˆ
addGraphicsToLayer(graphics, layerId) // Graphicsé…ç½®
setActiveLayer(layerId)               // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼è¨­å®š
getActiveLayer()                      // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
getActiveLayerId()                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼IDå–å¾—
getLayer(layerId)                     // ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
getMainLayer()                        // ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼å–å¾—
clear()                               // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒªã‚¢
clearLayer(layerId)                   // ç‰¹å®šãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒªã‚¢
resizeCanvas(width, height)           // ã‚µã‚¤ã‚ºå¤‰æ›´
getPixiApp()                          // PixiJS Applicationå–å¾—
isReady()                             // æº–å‚™çŠ¶æ…‹ç¢ºèª
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
```

## ğŸ–Šï¸ ToolManagerï¼ˆmanagers/tool-manager.jsï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setCanvasManager(canvasManager)        // CanvasManagerè¨­å®š
createTools()                          // ãƒ„ãƒ¼ãƒ«ä½œæˆ
selectTool(toolName)                   // ãƒ„ãƒ¼ãƒ«é¸æŠ
getCurrentTool()                       // ç¾åœ¨ãƒ„ãƒ¼ãƒ«å–å¾—
getCurrentToolName()                   // ç¾åœ¨ãƒ„ãƒ¼ãƒ«åå–å¾—
handlePointerDown(x, y, event)        // ãƒã‚¤ãƒ³ã‚¿ãƒ¼æŠ¼ä¸‹è»¢é€
handlePointerMove(x, y, event)         // ãƒã‚¤ãƒ³ã‚¿ãƒ¼ç§»å‹•è»¢é€
handlePointerUp(x, y, event)          // ãƒã‚¤ãƒ³ã‚¿ãƒ¼è§£æ”¾è»¢é€
getAvailableTools()                    // åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«ä¸€è¦§
getToolInfo(toolName)                  // ãƒ„ãƒ¼ãƒ«æƒ…å ±å–å¾—
isReady()                             // æº–å‚™çŠ¶æ…‹ç¢ºèª
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
```

## âœï¸ PenToolï¼ˆtools/pen-tool.jsï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setCanvasManager(canvasManager)        // CanvasManagerè¨­å®š
onPointerDown(x, y, event)            // æç”»é–‹å§‹
onPointerMove(x, y, event)            // æç”»ç¶™ç¶š
onPointerUp(x, y, event)              // æç”»çµ‚äº†
drawSmoothLine()                      // ã‚¹ãƒ ãƒ¼ã‚ºæ›²ç·šæç”»
setPenColor(color)                    // è‰²è¨­å®š
setPenWidth(width)                    // ç·šå¹…è¨­å®š
setPenOpacity(opacity)                // é€æ˜åº¦è¨­å®š
setSmoothing(enabled)                 // ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°è¨­å®š
getSettings()                         // è¨­å®šå–å¾—
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
```

## ğŸ§¹ EraserToolï¼ˆtools/eraser-tool.jsï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
setCanvasManager(canvasManager)        // CanvasManagerè¨­å®š
onPointerDown(x, y, event)            // æ¶ˆå»é–‹å§‹ï¼ˆERASE blend modeï¼‰
onPointerMove(x, y, event)            // æ¶ˆå»ç¶™ç¶š
onPointerUp(x, y, event)              // æ¶ˆå»çµ‚äº†
setEraserSize(size)                   // æ¶ˆã—ã‚´ãƒ ã‚µã‚¤ã‚ºè¨­å®š
setEraserOpacity(opacity)             // æ¶ˆã—ã‚´ãƒ é€æ˜åº¦è¨­å®š
getSettings()                         // è¨­å®šå–å¾—
getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
```

## ğŸ¯ TegakiIconsï¼ˆassets/icons.jsï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### é‡è¦ï¼šå‰ç‰ˆã§è¨˜è¼‰æ¼ã‚Œã®ã‚¯ãƒ©ã‚¹
```javascript
window.Tegaki.TegakiIcons = {
    svgData: { ... }                      // SVGå®šç¾©ãƒ‡ãƒ¼ã‚¿
    buttonMappings: { ... }               // ãƒœã‚¿ãƒ³IDâ†’ã‚¢ã‚¤ã‚³ãƒ³åãƒãƒƒãƒ”ãƒ³ã‚°
    createIcon(iconName, options)         // SVGã‚¢ã‚¤ã‚³ãƒ³è¦ç´ ä½œæˆ
    replaceButtonIcon(buttonId, iconName) // ç‰¹å®šãƒœã‚¿ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ç½®æ›
    replaceAllToolIcons()                 // å…¨ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ä¸€æ‹¬ç½®æ›â˜…é‡è¦
    getDebugInfo()                        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
}
```

## ğŸš¨ ErrorManagerï¼ˆjs/utils/error-manager.jsï¼‰- å®Ÿè£…ç¢ºèªæ¸ˆã¿

### å®Ÿè£…æ¸ˆã¿ãƒ¡ã‚½ãƒƒãƒ‰
```javascript
constructor()                          // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
showError(type, message, options)      // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
showVisualNotification(type, message, options) // è¦–è¦šé€šçŸ¥
showInfo(message, options)             // æƒ…å ±è¡¨ç¤º
showWarning(message, options)          // è­¦å‘Šè¡¨ç¤º
showCritical(message, options)         // é‡è¦ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
getBackgroundColor(type)              // èƒŒæ™¯è‰²å–å¾—
getTextColor(type)                    // ãƒ†ã‚­ã‚¹ãƒˆè‰²å–å¾—
getBorderColor(type)                  // ãƒœãƒ¼ãƒ€ãƒ¼è‰²å–å¾—
getErrors()                           // ã‚¨ãƒ©ãƒ¼è¨˜éŒ²å–å¾—
clear()                               // ã‚¨ãƒ©ãƒ¼è¨˜éŒ²ã‚¯ãƒªã‚¢
```

## âŒ å­˜åœ¨ã—ãªã„ã‚¯ãƒ©ã‚¹ï¼ˆè¦ä¿®æ­£ï¼‰

### ğŸš¨ bootstrap.jsãŒæ¢ã—ã¦ã„ã‚‹ãŒå­˜åœ¨ã—ãªã„
```javascript
window.Tegaki.TegakiApplication        // app-core.jsã§å®šç¾©ã™ã¹ã
```

### âš ï¸ minimal-deps.jsã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒä¸è¦
```javascript
// å®Ÿéš›ã®å®Ÿè£…ã¨ç«¶åˆã™ã‚‹ãŸã‚å‰Šé™¤ã™ã¹ã
StateManager, CoordinateManager, Performance, PopupManager,
SliderManager, UIManager, MemoryManager, SettingsManager,
BoundaryManager, AbstractTool
```

## ğŸ”§ ç·Šæ€¥ä¿®æ­£é …ç›®

### 1. **app-core.jsä¿®æ­£**
```javascript
// ç¾åœ¨: class AppCore { ... }
// ä¿®æ­£: class TegakiApplication { ... }
```

### 2. **minimal-deps.jså¯¾å‡¦**
```javascript
// AppCoreãªã©ç«¶åˆã‚¯ãƒ©ã‚¹å®šç¾©ã‚’å‰Šé™¤
// æœªå®Ÿè£…ã‚¯ãƒ©ã‚¹ã®ã¿æ®‹ã™
```

### 3. **ã‚¢ã‚¤ã‚³ãƒ³å‘¼ã³å‡ºã—è¿½åŠ **
```javascript
// TegakiApplication.setupUI()ã«è¿½åŠ 
window.Tegaki.TegakiIcons.replaceAllToolIcons();
```

### 4. **HTMLèª­ã¿è¾¼ã¿é †åºä¿®æ­£**
```html
<!-- minimal-deps.jsã‚’å‰Šé™¤ or æœ€å¾Œã«ç§»å‹• -->
```

---

ğŸ“ **ç¾å®Ÿæº–æ‹ ã®åŸå‰‡**: å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ã¯è¨˜è¼‰ã—ãªã„
ğŸš¨ **é‡è¤‡ãƒˆãƒ©ãƒƒãƒ—è§£æ¶ˆ**: ã‚¯ãƒ©ã‚¹é‡è¤‡ãƒ»æ¶ç©ºãƒ¡ã‚½ãƒƒãƒ‰ãƒ»èª­ã¿è¾¼ã¿é †åºã‚’å…¨ã¦ä¿®æ­£
ğŸ¯ **ä¿¡é ¼æ€§ç¢ºä¿**: å¾Œç¶šClaudeãŒæ··ä¹±ã—ãªã„æ­£ç¢ºãªæ–‡æ›¸ä½œæˆ