段階的改修計画書フェーズ1: EventBus統一とLayer ID導入（基盤整備）

目的: モデルとビューの分離、一意識別子の導入
作業:

EventBus APIの確認と統一
Layer構造に一意IDを追加
layer-system APIの整備（IDベース操作）


フェーズ2: サムネイル即時更新（体感改善）

目的: ペン描画時のタイムラインサムネイル反映
作業:

描画終了イベント（stroke:end）の発火
timeline-uiでのイベント受信とデバウンス処理
PIXI extractを使ったサムネイル生成


フェーズ3: 削除確認削除（UX改善）

目的: confirm()削除によるレスポンス向上
作業:

ui-panels.jsのconfirm()削除
history統合確認


フェーズ4: レイヤー階層移動修正（整合性修復）

目的: DOM-モデル同期、繰り返し操作可能化
作業:

moveLayer API実装
UIの完全再描画ロジック
イベントリスナ再バインド