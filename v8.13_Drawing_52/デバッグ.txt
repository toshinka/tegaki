// è©³ç´°ç‰ˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
const originalStartDrawing = window.drawingEngine?.startDrawing;
if (originalStartDrawing) {
    window.drawingEngine.startDrawing = function(x, y, event) {
        if (event?.clientX) {
            const cs = window.CoordinateSystem;
            const lm = window.layerManager;
            const layer = lm?.getActiveLayer?.();
            
            if (cs && layer) {
                const canvas = cs.screenClientToCanvas(event.clientX, event.clientY);
                const world = cs.canvasToWorld(canvas.x, canvas.y);
                const local = cs.worldToLocal(world.x, world.y, layer);
                
                console.log('ğŸ“Š Drawing Engineåº§æ¨™ãƒã‚§ãƒƒã‚¯');
                console.table({
                    'clientX/Y': [event.clientX, event.clientY],
                    'Canvas': [canvas.x.toFixed(1), canvas.y.toFixed(1)],
                    'World': [world.x.toFixed(1), world.y.toFixed(1)],
                    'Local': [local.x.toFixed(1), local.y.toFixed(1)]
                });
                
                // strokeRecorder ã«å®Ÿéš›ã«è¨˜éŒ²ã•ã‚Œã‚‹å€¤
                console.log('strokeRecorder.points:', 
                    window.drawingEngine.strokeRecorder.getCurrentPoints());
            }
        }
        return originalStartDrawing.call(this, x, y, event);
    };
    
    console.log('âœ… è©³ç´°ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°é–‹å§‹ã€‚ãƒšãƒ³ã§æç”»ã—ã¦ãã ã•ã„');
}