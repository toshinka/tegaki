# Drawing System Refactoring Plan v2.0
ãƒ™ã‚¯ã‚¿ãƒ¼æ¶ˆã—ã‚´ãƒ å®Ÿè£…ã®ãŸã‚ã®æ®µéšçš„æ”¹ä¿®è¨ˆç”»ï¼ˆæœ€å°ä¾µè¥²ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰

## æ”¹ä¿®æ–¹é‡ã®è»¢æ›

### v1.0ã®å¤±æ•—åˆ†æ
- âŒ Phase 1ã§æ—¢å­˜APIã‚’ç ´å£Š
- âŒ ToolManager/DataManagerç­‰ã®å¤§è¦æ¨¡ãªæŠ½è±¡åŒ–ã‚’å…ˆè¡Œ
- âŒ åˆæœŸåŒ–é †åºãƒ»ä¾å­˜é–¢ä¿‚ãŒè¤‡é›‘åŒ–
- âŒ æ®µéšçš„æ¤œè¨¼ãŒã§ããªã„

### v2.0ã®æ–°æ–¹é‡
- âœ… **æ—¢å­˜DrawingEngineã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„**
- âœ… **æ¶ˆã—ã‚´ãƒ æ©Ÿèƒ½ã‚’æœ€å°é™ã®è¿½åŠ ã§å®Ÿè£…**
- âœ… **å„ã‚¹ãƒ†ãƒƒãƒ—ã§å‹•ä½œç¢ºèªå¯èƒ½**
- âœ… **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¯å‹•ä½œå¾Œã«å®Ÿæ–½**

---

## å‰ææ¡ä»¶ã®ç¢ºèª

### æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹é€ 
```
DrawingEngine (æ”¹ä¿®å‰)
â”œâ”€ settings: BrushSettings          // ãƒ–ãƒ©ã‚·è¨­å®šç®¡ç†
â”œâ”€ recorder: StrokeRecorder         // ãƒã‚¤ãƒ³ãƒˆè¨˜éŒ²
â”œâ”€ renderer: StrokeRenderer         // æç”»å®Ÿè¡Œ
â”œâ”€ pressureHandler: PressureHandler // ç­†åœ§å‡¦ç†
â”œâ”€ transformer: StrokeTransformer   // ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°
â”œâ”€ currentPath: Object              // æç”»ä¸­ã®ãƒ‘ã‚¹
â”œâ”€ isDrawing: boolean
â””â”€ currentTool: 'pen' | 'eraser'
```

### ãƒ‡ãƒ¼ã‚¿ã®æ‰€åœ¨
- **ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ãƒ‡ãƒ¼ã‚¿**: `layerManager` â†’ `activeLayer.layerData.paths[]`
- **Graphics**: å„path.graphics (PIXI.Graphics)
- **History**: window.History (undo/redoç®¡ç†)

### åº§æ¨™ç³»
- **ãƒ¯ãƒ¼ãƒ«ãƒ‰åº§æ¨™**: Canvasä¸Šã®çµ¶å¯¾åº§æ¨™ (cameraSystem.screenToCanvaså¤‰æ›å¾Œ)
- **å…¨ã¦ã®è¨ˆç®—ã¯ãƒ¯ãƒ¼ãƒ«ãƒ‰åº§æ¨™ã§å®Ÿæ–½**

---

## Phase 0: ãƒ™ã‚¯ã‚¿ãƒ¼æ¼”ç®—åŸºç›¤ã®ã¿è¿½åŠ 

### ç›®çš„
æ¶ˆã—ã‚´ãƒ ã«å¿…è¦ãªå¹¾ä½•æ¼”ç®—æ©Ÿèƒ½ã‚’ç‹¬ç«‹ã—ãŸãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨ã—ã¦å®Ÿè£…

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«

**system/drawing/processing/vector-operations.js**
```javascript
// å½¹å‰²: ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å¹¾ä½•æ¼”ç®—ï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã«ä¾å­˜ã—ãªã„ï¼‰
class VectorOperations {
  // ç‚¹ã¨ç·šåˆ†ã®è·é›¢è¨ˆç®—
  static pointToSegmentDistance(point, segStart, segEnd) { }
  
  // å††ã¨ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã®äº¤å·®åˆ¤å®š
  static testCircleStrokeIntersection(center, radius, points) { }
  
  // å††ã¨ã®äº¤å·®ã§ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã‚’åˆ†å‰²
  static splitStrokeByCircle(points, center, radius, minLength) {
    // æˆ»ã‚Šå€¤: åˆ†å‰²ã•ã‚ŒãŸè¤‡æ•°ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯é…åˆ—
    // [ [point1, point2, ...], [point5, point6, ...] ]
  }
  
  // ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã®é•·ã•è¨ˆç®—
  static calculateStrokeLength(points) { }
}
```

**ä¾å­˜é–¢ä¿‚**: ãªã—ï¼ˆç´”ç²‹ãªæ•°å­¦é–¢æ•°ï¼‰

### æ¤œè¨¼æ–¹æ³•
```javascript
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãƒ†ã‚¹ãƒˆ
const points = [{x:0,y:0}, {x:100,y:0}, {x:100,y:100}];
const result = VectorOperations.splitStrokeByCircle(
  points, 
  {x:50, y:0}, 
  20, 
  5
);
console.log('åˆ†å‰²çµæœ:', result);
```

### å®Œäº†æ¡ä»¶
- [ ] vector-operations.js ãŒç‹¬ç«‹ã—ã¦å‹•ä½œ
- [ ] splitStrokeByCircle ãŒæ­£ã—ãåˆ†å‰²
- [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã«å½±éŸ¿ãªã—

---

## Phase 1: æ¶ˆã—ã‚´ãƒ ãƒ„ãƒ¼ãƒ«æœ€å°å®Ÿè£…

### ç›®çš„
DrawingEngineã«æ¶ˆã—ã‚´ãƒ æ©Ÿèƒ½ã‚’**è¿½åŠ **ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´ã—ãªã„ï¼‰

### æ”¹ä¿®ãƒ•ã‚¡ã‚¤ãƒ«

**system/drawing/drawing-engine.js**
- **å¤‰æ›´æ–¹é‡**: æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸€åˆ‡å¤‰æ›´ã›ãšã€æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿è¿½åŠ 

```javascript
class DrawingEngine {
  // === æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦ç¶­æŒ ===
  constructor() { /* æ—¢å­˜ã®ã¾ã¾ */ }
  startDrawing() { /* æ—¢å­˜ã®ã¾ã¾ */ }
  continueDrawing() { /* æ—¢å­˜ã®ã¾ã¾ */ }
  stopDrawing() { 
    // æ—¢å­˜å‡¦ç†ã®æœ€å¾Œã«è¿½åŠ 
    if (this.currentTool === 'eraser' && this.currentPath) {
      this.applyEraserEffect(this.currentPath);
    }
    // ä»¥é™ã¯æ—¢å­˜ã®ã¾ã¾
  }
  
  // === æ–°è¦è¿½åŠ ãƒ¡ã‚½ãƒƒãƒ‰ ===
  
  /**
   * æ¶ˆã—ã‚´ãƒ åŠ¹æœã®é©ç”¨
   * currentPathã§æã„ãŸè»Œè·¡ã«æ²¿ã£ã¦ã€æ—¢å­˜ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã‚’å‰Šé™¤/åˆ†å‰²
   */
  applyEraserEffect(eraserPath) {
    const eraserPoints = eraserPath.points;
    const eraserRadius = eraserPath.size / 2;
    
    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰å…¨ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å–å¾—
    const activeLayer = this.layerManager.getActiveLayer();
    if (!activeLayer?.layerData?.paths) return;
    
    const affectedPaths = [];
    const modifications = []; // { original, segments }
    
    // å„ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã«å¯¾ã—ã¦æ¶ˆå»åˆ¤å®š
    for (const path of activeLayer.layerData.paths) {
      if (path === eraserPath) continue; // è‡ªèº«ã¯ã‚¹ã‚­ãƒƒãƒ—
      
      let hasIntersection = false;
      
      // æ¶ˆã—ã‚´ãƒ ã®è»Œè·¡ä¸Šã®å„ç‚¹ã§åˆ¤å®š
      for (const eraserPoint of eraserPoints) {
        if (VectorOperations.testCircleStrokeIntersection(
          eraserPoint, 
          eraserRadius, 
          path.points
        )) {
          hasIntersection = true;
          break;
        }
      }
      
      if (hasIntersection) {
        // åˆ†å‰²å®Ÿè¡Œ
        const segments = this.splitPathByEraserTrail(
          path, 
          eraserPoints, 
          eraserRadius
        );
        modifications.push({ original: path, segments });
      }
    }
    
    // å¤‰æ›´ã‚’é©ç”¨
    this.applyPathModifications(modifications);
  }
  
  /**
   * æ¶ˆã—ã‚´ãƒ ã®è»Œè·¡å…¨ä½“ã§ãƒ‘ã‚¹ã‚’åˆ†å‰²
   */
  splitPathByEraserTrail(path, eraserPoints, eraserRadius) {
    let remainingPoints = [...path.points];
    
    // æ¶ˆã—ã‚´ãƒ ã®å„ç‚¹ã§é †æ¬¡åˆ†å‰²
    for (const eraserPoint of eraserPoints) {
      const newSegments = [];
      
      for (const segment of remainingPoints) {
        if (Array.isArray(segment)) {
          const splits = VectorOperations.splitStrokeByCircle(
            segment,
            eraserPoint,
            eraserRadius,
            5 // æœ€å°é•·ã•é–¾å€¤
          );
          newSegments.push(...splits);
        }
      }
      
      remainingPoints = newSegments.length > 0 ? newSegments : [remainingPoints];
    }
    
    return remainingPoints;
  }
  
  /**
   * ãƒ‘ã‚¹å¤‰æ›´ã®é©ç”¨ã¨Historyè¨˜éŒ²
   */
  applyPathModifications(modifications) {
    const activeLayer = this.layerManager.getActiveLayer();
    const removedPaths = [];
    const addedPaths = [];
    
    for (const { original, segments } of modifications) {
      // å…ƒã®ãƒ‘ã‚¹ã‚’å‰Šé™¤
      removedPaths.push(original);
      activeLayer.layerData.paths = 
        activeLayer.layerData.paths.filter(p => p !== original);
      
      if (original.graphics) {
        activeLayer.removeChild(original.graphics);
        original.graphics.destroy();
      }
      
      // åˆ†å‰²å¾Œã®ãƒ‘ã‚¹ã‚’è¿½åŠ 
      for (const segmentPoints of segments) {
        if (segmentPoints.length < 2) continue;
        
        const newPath = {
          ...original,
          points: segmentPoints,
          graphics: new PIXI.Graphics()
        };
        
        // å†æç”»
        const options = {
          ...original.strokeOptions,
          color: original.color,
          alpha: original.opacity
        };
        this.renderer.renderStroke(segmentPoints, options, newPath.graphics);
        
        activeLayer.addChild(newPath.graphics);
        activeLayer.layerData.paths.push(newPath);
        addedPaths.push(newPath);
      }
    }
    
    // Historyè¨˜éŒ²
    if (window.History && removedPaths.length > 0) {
      const layerIndex = this.layerManager.activeLayerIndex;
      const command = {
        name: 'eraser-applied',
        undo: () => {
          // è¿½åŠ ã—ãŸãƒ‘ã‚¹ã‚’å‰Šé™¤
          const layer = this.layerManager.layers[layerIndex];
          for (const path of addedPaths) {
            layer.layerData.paths = 
              layer.layerData.paths.filter(p => p !== path);
            if (path.graphics) {
              layer.removeChild(path.graphics);
              path.graphics.destroy();
            }
          }
          // å…ƒã®ãƒ‘ã‚¹ã‚’å¾©å…ƒ
          for (const path of removedPaths) {
            layer.layerData.paths.push(path);
            layer.addChild(path.graphics);
          }
          this.layerManager.requestThumbnailUpdate(layerIndex);
        },
        do: () => {
          // å…ƒã®ãƒ‘ã‚¹ã‚’å‰Šé™¤
          const layer = this.layerManager.layers[layerIndex];
          for (const path of removedPaths) {
            layer.layerData.paths = 
              layer.layerData.paths.filter(p => p !== path);
            if (path.graphics) {
              layer.removeChild(path.graphics);
              path.graphics.destroy();
            }
          }
          // åˆ†å‰²å¾Œã‚’è¿½åŠ 
          for (const path of addedPaths) {
            layer.layerData.paths.push(path);
            layer.addChild(path.graphics);
          }
          this.layerManager.requestThumbnailUpdate(layerIndex);
        },
        meta: { type: 'eraser', layerIndex }
      };
      window.History.push(command);
    }
    
    this.layerManager.requestThumbnailUpdate();
  }
}
```

### æ¤œè¨¼æ–¹æ³•
```javascript
// 1. ãƒšãƒ³ã§æç”»ï¼ˆæ—¢å­˜æ©Ÿèƒ½ï¼‰
drawingEngine.setTool('pen');
// ãƒã‚¦ã‚¹ã§æç”»

// 2. æ¶ˆã—ã‚´ãƒ ã«åˆ‡ã‚Šæ›¿ãˆ
drawingEngine.setTool('eraser');
// ãƒã‚¦ã‚¹ã§æç”»ï¼ˆã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ãŒå‰Šé™¤ã•ã‚Œã‚‹ã¯ãšï¼‰

// 3. Undo/Redoãƒ†ã‚¹ãƒˆ
window.History.undo();
window.History.redo();
```

### å®Œäº†æ¡ä»¶
- [ ] ãƒšãƒ³æç”»ãŒæ—¢å­˜é€šã‚Šå‹•ä½œ
- [ ] æ¶ˆã—ã‚´ãƒ ã§ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ãŒå‰Šé™¤ã•ã‚Œã‚‹
- [ ] éƒ¨åˆ†å‰Šé™¤æ™‚ã«åˆ†å‰²ã•ã‚Œã‚‹
- [ ] Undo/RedoãŒå‹•ä½œ
- [ ] æ—¢å­˜æ©Ÿèƒ½ã«å½±éŸ¿ãªã—

---

## Phase 2: æ¶ˆã—ã‚´ãƒ UXæ”¹å–„

### ç›®çš„
æ¶ˆã—ã‚´ãƒ ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

### æ”¹ä¿®å†…å®¹

**system/drawing/drawing-engine.js**
```javascript
class DrawingEngine {
  continueDrawing(screenX, screenY, pressureOrEvent) {
    // æ—¢å­˜å‡¦ç†...
    
    // æ¶ˆã—ã‚´ãƒ ãƒ¢ãƒ¼ãƒ‰æ™‚: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å††ã‚’è¡¨ç¤º
    if (this.currentTool === 'eraser') {
      this.updateEraserPreview(canvasPoint);
    }
  }
  
  updateEraserPreview(worldPos) {
    if (!this.eraserPreviewGraphics) {
      this.eraserPreviewGraphics = new PIXI.Graphics();
      this.layerManager.getActiveLayer().addChild(this.eraserPreviewGraphics);
    }
    
    this.eraserPreviewGraphics.clear();
    this.eraserPreviewGraphics.circle(worldPos.x, worldPos.y, this.brushSize / 2);
    this.eraserPreviewGraphics.stroke({ width: 1, color: 0xFF0000, alpha: 0.5 });
  }
}
```

**æœ€é©åŒ–**:
- æ¶ˆã—ã‚´ãƒ è»Œè·¡ã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°é–“éš”ã‚’èª¿æ•´
- å¤§é‡ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æ™‚ã®ç©ºé–“åˆ†å‰²æ¤œç´¢ï¼ˆå°†æ¥ï¼‰

### æ¤œè¨¼æ–¹æ³•
```javascript
// æ¶ˆã—ã‚´ãƒ ã‚«ãƒ¼ã‚½ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª
drawingEngine.setTool('eraser');
// ãƒã‚¦ã‚¹ç§»å‹•ã§èµ¤ã„å††ãŒè¿½å¾“ã™ã‚‹ã¯ãš
```

### å®Œäº†æ¡ä»¶
- [ ] æ¶ˆã—ã‚´ãƒ ã‚«ãƒ¼ã‚½ãƒ«ãŒè¡¨ç¤º
- [ ] é«˜é€Ÿç§»å‹•ã§ã‚‚é€”åˆ‡ã‚Œãªã„æ¶ˆå»
- [ ] 100ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æç”»ã§ã‚‚60fpsç¶­æŒ

---

## Phase 3: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ•´ç†ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ç›®çš„
å‹•ä½œç¢ºèªå¾Œã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆå¿…é ˆã§ã¯ãªã„ï¼‰

### å®Ÿæ–½å†…å®¹
- ãƒ„ãƒ¼ãƒ«æŠ½è±¡åŒ–ï¼ˆPenTool/EraserToolåˆ†é›¢ï¼‰
- DataManagerå°å…¥
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ•´ç†

**å‰æ**: Phase 1-2ãŒå®Œç’§ã«å‹•ä½œã—ã¦ã„ã‚‹å ´åˆã®ã¿å®Ÿæ–½

---

## æ®µéšçš„ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 0
```javascript
// âœ… vector-operations.js èª­ã¿è¾¼ã¿ç¢ºèª
console.log('VectorOperations:', window.TegakiDrawing?.VectorOperations);

// âœ… åˆ†å‰²ãƒ†ã‚¹ãƒˆ
const testPoints = [{x:0,y:0},{x:100,y:0}];
const result = VectorOperations.splitStrokeByCircle(testPoints, {x:50,y:0}, 10, 5);
console.log('åˆ†å‰²çµæœ:', result);
```

### Phase 1
```javascript
// âœ… DrawingEngineåˆæœŸåŒ–ç¢ºèª
console.log('DrawingEngine:', window.drawingEngine);
console.log('æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰:', typeof drawingEngine.startDrawing);
console.log('æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰:', typeof drawingEngine.applyEraserEffect);

// âœ… ãƒšãƒ³æç”»ãƒ†ã‚¹ãƒˆ
drawingEngine.setTool('pen');
// æç”»...

// âœ… æ¶ˆã—ã‚´ãƒ ãƒ†ã‚¹ãƒˆ
drawingEngine.setTool('eraser');
// æç”»ï¼ˆæ—¢å­˜ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã‚’æ¨ªåˆ‡ã‚‹ï¼‰

// âœ… ãƒ¬ã‚¤ãƒ¤ãƒ¼ç¢ºèª
const layer = layerManager.getActiveLayer();
console.log('ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯æ•°:', layer.layerData.paths.length);
```

### Phase 2
```javascript
// âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèª
drawingEngine.setTool('eraser');
// ãƒã‚¦ã‚¹ç§»å‹•ã§ã‚«ãƒ¼ã‚½ãƒ«è¡¨ç¤ºç¢ºèª

// âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
// 100æœ¬ã®ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã‚’æç”»
for (let i = 0; i < 100; i++) {
  // ãƒšãƒ³ã§æç”»...
}
// FPSç¢ºèª: Ctrl+Shift+I â†’ Performance ãƒ¢ãƒ‹ã‚¿ãƒ¼
```

---

## æ”¹ä¿®æ™‚ã®å³å®ˆäº‹é …

### DO
- âœ… å„Phaseå®Œäº†å¾Œã«å¿…ãšå‹•ä½œç¢ºèª
- âœ… æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã›ãšæ®‹ã™
- âœ… æ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰ã®å¾Œã«è¿½åŠ 
- âœ… console.log ã¯æœ€å°é™ï¼ˆã‚¨ãƒ©ãƒ¼æ™‚ã®ã¿ï¼‰
- âœ… åº§æ¨™ã¯ãƒ¯ãƒ¼ãƒ«ãƒ‰åº§æ¨™ã§çµ±ä¸€

### DON'T
- ğŸš« æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ãƒ»æˆ»ã‚Šå€¤ã‚’å¤‰æ›´
- ğŸš« è¤‡æ•°Phaseã‚’åŒæ™‚ã«å®Ÿè£…
- ğŸš« å‹•ä½œç¢ºèªå‰ã«æ¬¡ã®Phaseã¸é€²ã‚€
- ğŸš« localStorageä½¿ç”¨
- ğŸš« APIã®äºŒé‡å®Ÿè£…

---

## ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

å„Phaseå¤±æ•—æ™‚ã®å¯¾å¿œ:

**Phase 0å¤±æ•—**: vector-operations.js ã‚’å‰Šé™¤
**Phase 1å¤±æ•—**: drawing-engine.js ã‚’å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã«æˆ»ã™
**Phase 2å¤±æ•—**: Phase 1ã®çŠ¶æ…‹ã«æˆ»ã™ï¼ˆæ–°è¦ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿å‰Šé™¤ï¼‰

---

## æœ€çµ‚ã‚´ãƒ¼ãƒ«

```
ã€Phase 0-1å®Œäº†æ™‚ç‚¹ã€‘
- ãƒšãƒ³æç”»: æ—¢å­˜é€šã‚Šå‹•ä½œ âœ…
- æ¶ˆã—ã‚´ãƒ : ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯å‰Šé™¤ãƒ»åˆ†å‰²ãŒå‹•ä½œ âœ…
- Undo/Redo: æ­£å¸¸å‹•ä½œ âœ…
- æ—¢å­˜æ©Ÿèƒ½: ä¸€åˆ‡å½±éŸ¿ãªã— âœ…

ã€Phase 2å®Œäº†æ™‚ç‚¹ã€‘
- æ¶ˆã—ã‚´ãƒ ã‚«ãƒ¼ã‚½ãƒ«è¡¨ç¤º âœ…
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– âœ…

ã€Phase 3ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã€‘
- ã‚³ãƒ¼ãƒ‰æ•´ç†ãƒ»æŠ½è±¡åŒ–
- å°†æ¥ã®æ‹¡å¼µæ€§ç¢ºä¿
```

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãªã‚‰ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã§ç¢ºå®Ÿã«å‹•ä½œç¢ºèªã—ãªãŒã‚‰é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚