 âœ… config.js (Phase 2å®Œå…¨ç‰ˆ) loaded
    - BRUSH_DEFAULTSè¿½åŠ å®Œäº†
 âœ… system/event-bus.js Phase 2: å„ªå…ˆåº¦æ©Ÿèƒ½è¿½åŠ ç‰ˆ loaded
 âœ… coordinate-system.js (Phase 2.5å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
    - Phase 2.5: worldToLocal() ã® pivot/position/rotation/scale è¨ˆç®—é †åºã‚’å®Œå…¨ä¿®æ­£
    - Phase 2.5: localToWorld() ã‚‚åŒæ§˜ã«ä¿®æ­£ï¼ˆå®Œå…¨ãªé€†å¤‰æ›ã‚’ä¿è¨¼ï¼‰
    - ã‚µãƒ ãƒã‚¤ãƒ«å•é¡Œã®æ ¹æœ¬åŽŸå› ã‚’è§£æ±º
 âœ… Debug commands: TegakiDebug.coord.*
 âœ… data-models.js (ãƒžã‚¹ã‚¯ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆä¸å¯è¦–ç‰ˆ) loaded
 âœ… batch-api.js (Phase 6: Historyçµ±åˆç‰ˆ) loaded
 âœ… popup-manager.js (quick-accessé™¤å¤–å¯¾å¿œç‰ˆ) loaded
 âœ… camera-system.js (v2.0: ãƒªã‚µã‚¤ã‚ºä¿®æ­£ç‰ˆ) loaded
 âœ… layer-transform.js (Phase 1-5 GSAPçµ±åˆå®Œå…¨ç‰ˆ) loaded
    âœ“ Phase 1-4: ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ãƒ»NaNå¯¾ç­–ãƒ»UIæ•´å‚™ãƒ»åè»¢æ©Ÿèƒ½
    âœ“ Phase 5: GSAPçµ±åˆï¼ˆkillTweensOf + delayedCallï¼‰
    âœ“ GPUåæ˜ ä¿è¨¼: Transformé©ç”¨ã‹ã‚‰1ãƒ•ãƒ¬ãƒ¼ãƒ å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
    âœ“ ã‚µãƒ ãƒã‚¤ãƒ«åŒæœŸ: layer:transform-updated + thumbnail:layer-updated
 âœ… layer-system.js (v2.0.1: åè»¢æ©Ÿèƒ½ä¿®å¾©ç‰ˆ) loaded
 âœ… drawing-clipboard.js Phase4æ”¹ä¿®ç‰ˆ+ç¢ºå®šã‚¤ãƒ™ãƒ³ãƒˆ loaded
    - âœ… CTRL+V behavior: overwrite active layer
    - âœ… Commit events: paste:commit, operation:commit
    - âœ… Thumbnail auto-update on paste
 âœ… history.js (Phase 3: Redo nullå‚ç…§ä¿®æ­£ç‰ˆ) loaded
 [AnimationSystem] GSAP detected - using synchronized thumbnail generation
 âœ… animation-system.js (GSAPçµ±åˆå®Œå…¨ç‰ˆ) loaded
    âœ“ Phase 1: ãƒ•ãƒ¬ãƒ¼ãƒ åçµ±ä¸€ï¼ˆxFå½¢å¼ï¼‰
    âœ“ Phase 3: Canvas2Då»ƒæ­¢ â†’ ThumbnailSystemçµ±ä¸€
    âœ“ Phase 3-2: init()æ™‚ã«GSAP.delayedCall()ã§åˆå›žã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ
    âœ“ generateFrameThumbnail(): PixiJS RenderTextureä½¿ç”¨
    âœ“ frame.thumbnailDataURLä¿å­˜ã§ UIå±¤é€£æº
 âœ… pressure-handler.js (Phase 3: è·é›¢ãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿è¿½åŠ ç‰ˆ) loaded
    - applyDistanceFilter() è¿½åŠ 
    - çŸ­è·é›¢: alpha=0.9 (å³åº§åæ˜ )
    - é•·è·é›¢: alpha=0.3 (ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°å¼·)
 âœ… curve-interpolator.js (Phase 3) loaded
    - Catmull-Rom ã‚¹ãƒ—ãƒ©ã‚¤ãƒ³è£œé–“
    - é©å¿œçš„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å¯¾å¿œ
    - tiltX/Y/twist ãƒ‡ãƒ¼ã‚¿è£œé–“å¯¾å¿œ
 âœ… system/drawing/stroke-renderer.js loaded (PixiJS v8å®Œå…¨å¯¾å¿œç‰ˆ)
thumbnail-system.js:2 Uncaught SyntaxError: Unexpected identifier '_renderLayerThumbnail'
 âœ… brush-settings.js (APIçµ±ä¸€ç‰ˆ) loaded
    - âœ… getOpacity() / setOpacity() è¿½åŠ 
    - âœ… brush:opacity-changed ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­è¿½åŠ 
 âœ… drawing-engine.js (åº§æ¨™ç³»å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
 âœ… Debug commands: TegakiDebug.drawing.*
 âœ… quick-export-ui.js (ç„¡åŠ¹åŒ–ç‰ˆ) loaded
 âœ… export-manager.js (CUTâ†’FRAMEå®Œå…¨ä¿®æ­£ç‰ˆ) loaded
 âœ… png-exporter.js (å˜ä¸€ãƒ•ãƒ¬ãƒ¼ãƒ å°‚ç”¨ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œ) loaded
 âœ… apng-exporter.js (CUTâ†’FRAMEå®Œå…¨ä¿®æ­£ç‰ˆ) loaded
 âœ… gif-exporter.js (CUTâ†’FRAMEå®Œå…¨ä¿®æ­£ç‰ˆ) loaded
 âœ… webp-exporter.js (é™æ­¢ç”»ãƒ»å‹•ç”»è‡ªå‹•åˆ¤å®šå¯¾å¿œç‰ˆ) loaded
 âœ… mp4-exporter.js (Phase 8å®Œæˆç‰ˆ) loaded
 âœ… pdf-exporter.js (CUTâ†’FRAMEå®Œå…¨å¯¾å¿œç‰ˆ) loaded
 âœ… dom-builder.js (IDé‡è¤‡è§£æ¶ˆç‰ˆ) loaded
    - #pen-settings â†’ #legacy-pen-settings ã«å¤‰æ›´
    - pen-size-slider â†’ legacy-pen-size-slider ã«å¤‰æ›´
    - quick-access-popup.jsã¨ã®IDç«¶åˆã‚’å®Œå…¨è§£æ¶ˆ
 âœ… ui/slider-utils.js loaded
    - è²¬å‹™: ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼UIã®çµ±ä¸€å®Ÿè£…
    - DRYåŽŸå‰‡: settings-popup.js ã¨ ui-panels.js ã§å…±æœ‰
    - API: createSlider() / createSimpleSlider()
 âœ… keyboard-handler.js (P/Eã‚µã‚¤ãƒ‰ãƒãƒ¼åŒæœŸç‰ˆ) loaded
 âœ… resize-popup.js (Phase 4å®Œäº†: ãƒ­ã‚¸ãƒƒã‚¯å‰Šæ¸›ç‰ˆ) loaded
 âœ… ui/layer-panel-renderer.js (Phase 2å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
    âœ“ ã‚¤ãƒ™ãƒ³ãƒˆå„ªå…ˆåº¦è¨­å®šãƒ»throttleæœ€é©åŒ–
    âœ“ DOMæ¤œç´¢ã®å …ç‰¢åŒ–ï¼ˆ3ã¤ã®æ–¹æ³•ã§è©¦è¡Œï¼‰
    âœ“ ThumbnailSystemåˆæœŸåŒ–ç¢ºèªå¼·åŒ–
    âœ“ immediate ãƒ•ãƒ©ã‚°å¯¾å¿œãƒ»GSAP delayedCall åŒæœŸ
 âœ… status-display-renderer.js (Phase 1æ”¹ä¿®ç‰ˆ) loaded
 âœ… ui/timeline-thumbnail-utils.js (Phase 3å®Œå…¨ç‰ˆ) loaded
    âœ“ Phase 1: layer:transform-updated è³¼èª­è¿½åŠ 
    âœ“ Phase 3: throttleæœ€é©åŒ–ï¼ˆ100msï¼‰
    âœ“ Phase 3: immediate ãƒ•ãƒ©ã‚°å¯¾å¿œ
    âœ“ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢ã«å³åº§è¿½å¾“
 âœ… timeline-ui.js (Phase 4å®Œäº†: ãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢é€£æºç‰ˆ) loaded
 âœ… album-popup.js (FRAMEæ”¹ä¿®ç‰ˆ) loaded
 âœ… settings-popup.js (å³å¿œæ€§å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
    - CSS transitionå®Œå…¨é™¤åŽ»ï¼ˆ!importantä»˜ãï¼‰
    - DOMæ›´æ–°ã‚’åŒæœŸçš„ã«å³åº§å®Ÿè¡Œ
    - quick-access/resize-popupã¨å®Œå…¨åŒç­‰ã®å‹•ä½œ
 âœ… quick-access-popup.js (èƒŒæ™¯ãƒ‰ãƒ©ãƒƒã‚° + é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ç‰ˆ) loaded
    - èƒŒæ™¯ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•å¯èƒ½ï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼/ãƒœã‚¿ãƒ³ä»¥å¤–ï¼‰
    - å³ä¸ŠÃ—ãƒœã‚¿ãƒ³ã§é–‰ã˜ã‚‹
    - ç”»é¢å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ãªã„ï¼ˆå¸¸æ™‚é–‹ãã£ã±ãªã—å¯èƒ½ï¼‰
 âœ… export-popup.js (frameInfoä¿®æ­£ç‰ˆï¼‹PDFæœ‰åŠ¹åŒ–) loaded
 âœ… ui-panels.js (ã‚µã‚¤ãƒ‰ãƒãƒ¼åŒæœŸãƒ»è‰²èª¿æ•´ç‰ˆ) loaded
 âœ… core-runtime.js (Phase 1-3å®Œå…¨ç‰ˆ: ThumbnailSystemçµ±åˆ) loaded
 âœ… core-engine.js (Phase 4å®Œå…¨ä¿®æ­£ç‰ˆ) loaded
    âœ“ Phase 2: ãƒªã‚µã‚¤ã‚ºæ™‚ãƒ¬ã‚¤ãƒ¤ãƒ¼åº§æ¨™ã‚·ãƒ•ãƒˆ + èƒŒæ™¯è‰²ä¿®æ­£
    âœ“ Phase 4: onFlipRequestå†è©¦è¡Œãƒ¡ã‚«ãƒ‹ã‚ºãƒ å®Ÿè£…ï¼ˆç¢ºå®ŸæŽ¥ç¶šï¼‰
    âœ“ Phase 5: GSAP Tickerçµ±åˆæº–å‚™å®Œäº†
core-engine.js:851    âœ“ destroy()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰å®‰å®šåŒ–ï¼‰
core-initializer.js:401 âœ… core-initializer.js (LayerPanelRendererçµ±åˆç‰ˆ) loaded
core-initializer.js:402    âœ“ Phase 2: LayerPanelRendereråˆæœŸåŒ–è¿½åŠ 
core-initializer.js:403    âœ“ ã‚°ãƒ­ãƒ¼ãƒãƒ«å‚ç…§: TegakiUI.layerPanelRenderer
core-initializer.js:404    âœ“ ã‚°ãƒ­ãƒ¼ãƒãƒ«å‚ç…§: CoreRuntime.internal.layerPanelRenderer
core-engine.js:352 [CoreEngine] GSAP detected - Tickerçµ±åˆ available
layer-transform.js:46 [LayerTransform] GSAP detected - using synchronized updates
drawing-clipboard.js:19 DrawingClipboard: Initializing...
drawing-clipboard.js:26 âœ… DrawingClipboard initialized (Phase4æ”¹ä¿®ç‰ˆ + ç¢ºå®šã‚¤ãƒ™ãƒ³ãƒˆ)
core-engine.js:760 âš ï¸ ThumbnailSystem not found
initialize @ core-engine.js:760
animation-system.js:218 [AnimationSystem] GSAP detected - using synchronized thumbnail generation
core-initializer.js:65 âœ… SettingsManager initialized
popup-manager.js:16 âœ… PopupManager initialized
popup-manager.js:42 ðŸ“‹ Popup "settings" registered (priority: 1)
popup-manager.js:42 ðŸ“‹ Popup "quickAccess" registered (priority: 2)
popup-manager.js:42 ðŸ“‹ Popup "album" registered (priority: 3)
popup-manager.js:42 ðŸ“‹ Popup "resize" registered (priority: 4)
popup-manager.js:102 ðŸ”§ Initializing all popups...
popup-manager.js:87 âœ… Popup "settings" initialized successfully
popup-manager.js:87 âœ… Popup "quickAccess" initialized successfully
popup-manager.js:87 âœ… Popup "album" initialized successfully
popup-manager.js:87 âœ… Popup "resize" initialized successfully
popup-manager.js:118 ðŸ“Š Popup initialization: 4 ready, 0 deferred
animation-system.js:255 ðŸŽ¬ Regenerating 0 frame thumbnails...
animation-system.js:265 âœ… All frame thumbnails regenerated
layer-panel-renderer.js:28 [LayerPanelRenderer] GSAP detected - using synchronized thumbnail updates
layer-panel-renderer.js:146 âœ“ Event listeners configured (transform-updated, thumbnail-updated, etc.)
layer-panel-renderer.js:42 âœ… LayerPanelRenderer initialized (Phase 2å®Œå…¨ä¿®æ­£ç‰ˆ)
core-initializer.js:93 âœ… LayerPanelRenderer initialized and registered
core-initializer.js:94    - window.TegakiUI.layerPanelRenderer
core-initializer.js:95    - window.CoreRuntime.internal.layerPanelRenderer
layer-panel-renderer.js:324 [Panel] ThumbnailSystem not initialized
_generateAndDisplayThumbnail @ layer-panel-renderer.js:324
popup-manager.js:42 ðŸ“‹ Popup "export" registered (priority: 5)
core-engine.js:509 âœ… [CoreEngine] onFlipRequest callback configured (retry: 0)
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
popup-manager.js:87 âœ… Popup "export" initialized successfully
core-initializer.js:299 âœ… ExportPopup registered and initialized
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
console.log('=== System Initialized ===');
console.log('ThumbnailSystem:', typeof window.ThumbnailSystem);
console.log('ThumbnailSystem.isInitialized:', window.ThumbnailSystem?.isInitialized);
console.log('LayerManager:', typeof window.layerManager);
console.log('EventBus:', typeof window.TegakiEventBus);
console.log('CoordinateSystem:', typeof window.CoordinateSystem);
VM82:1 === System Initialized ===
VM82:2 ThumbnailSystem: undefined
VM82:3 ThumbnailSystem.isInitialized: undefined
VM82:4 LayerManager: object
VM82:5 EventBus: object
VM82:6 CoordinateSystem: object
undefined
const events = window.TegakiEventBus?.events || {};
console.log('=== Event Listeners ===');
console.log('layer:transform-updated:', events['layer:transform-updated']?.length || 0);
console.log('thumbnail:layer-updated:', events['thumbnail:layer-updated']?.length || 0);
console.log('keyboard:vkey-pressed:', events['keyboard:vkey-pressed']?.length || 0);
console.log('layer:stroke-added:', events['layer:stroke-added']?.length || 0);
VM86:2 === Event Listeners ===
VM86:3 layer:transform-updated: 2
VM86:4 thumbnail:layer-updated: 1
VM86:5 keyboard:vkey-pressed: 1
VM86:6 layer:stroke-added: 0
undefined
const layerMgr = window.layerManager;
const layers = layerMgr?.getLayers?.();
console.log('=== Layer State ===');
console.log('Total layers:', layers?.length || 0);
console.log('Active index:', layerMgr?.activeLayerIndex);
layers?.forEach((l, i) => {
  console.log(`  ${i}: ${l.layerData?.name} (id=${l.layerData?.id})`);
});
VM90:3 === Layer State ===
VM90:4 Total layers: 2
VM90:5 Active index: 1
VM90:7   0: èƒŒæ™¯ (id=layer_1761808552900_p000f9hij)
VM90:7   1: ãƒ¬ã‚¤ãƒ¤ãƒ¼1 (id=layer_1761808552901_mmmc7xiix)
undefined
window.TegakiDebug = window.TegakiDebug || {};
window.TegakiDebug.phase2 = {};

window.TegakiDebug.phase2.monitorTransformEvents = function(duration = 5000) {
  console.log(`\n=== Transform Event Monitor (${duration}ms) ===\n`);
  
  const eventBus = window.TegakiEventBus;
  const listeners = [];
  let eventCount = 0;
  
  const events = ['layer:transform-updated', 'thumbnail:layer-updated', 'layer:stroke-added'];
  
  events.forEach(eventName => {
    eventBus.on(eventName, (payload) => {
      eventCount++;
      const time = new Date().toLocaleTimeString();
      console.log(`[${time}] ${eventCount}. ${eventName}`, payload.data || payload);
    });
  });
  
  setTimeout(() => {
    console.log(`\nâœ… Monitor ended (${eventCount} events received)\n`);
  }, duration);
};
Æ’ (duration = 5000) {
  console.log(`\n=== Transform Event Monitor (${duration}ms) ===\n`);
  
  const eventBus = window.TegakiEventBus;
  const listeners = [];
  let eventCount = 0;
  
  const events â€¦
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
stopDrawing @ drawing-engine.js:296
handlePointerUp @ core-runtime.js:148
(anonymous) @ core-runtime.js:79
_notifyListeners @ EventBoundary.ts:1472
notifyTarget @ EventBoundary.ts:667
propagate @ EventBoundary.ts:302
dispatchEvent @ EventBoundary.ts:211
mapPointerUp @ EventBoundary.ts:977
mapEvent @ EventBoundary.ts:232
_onPointerUp @ EventSystem.ts:709
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
stopDrawing @ drawing-engine.js:296
handlePointerUp @ core-runtime.js:148
(anonymous) @ core-runtime.js:79
_notifyListeners @ EventBoundary.ts:1472
notifyTarget @ EventBoundary.ts:663
propagate @ EventBoundary.ts:313
dispatchEvent @ EventBoundary.ts:211
mapPointerUp @ EventBoundary.ts:977
mapEvent @ EventBoundary.ts:232
_onPointerUp @ EventSystem.ts:709
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdated @ layer-transform.js:586
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10







wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
transform.onTransformUpdate @ layer-system.js:130
updateTransform @ layer-transform.js:149
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:766
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10











wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10











wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10











wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10







wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10























wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10







wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
updateTransform @ layer-transform.js:146
transform.onSliderChange @ layer-system.js:139
(anonymous) @ layer-transform.js:754
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdated @ layer-transform.js:586
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

































































layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























































layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























































layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

































































window.TegakiDebug.phase2.testFlipInVMode = async function() {
  console.log('\n=== Flip in VMode Test ===\n');
  
  const layerMgr = window.layerManager;
  const activeLayer = layerMgr?.getActiveLayer?.();
  
  if (!activeLayer) {
    console.error('âŒ No active layer');
    return;
  }
  
  console.log(`Active layer: ${activeLayer.layerData?.name}`);
  console.log(`Transform before: x=${activeLayer.position.x}, scale=${activeLayer.scale.x}`);
  
  // Vãƒ¢ãƒ¼ãƒ‰é–‹å§‹
  window.TegakiEventBus.emit('keyboard:vkey-pressed', {});
  await new Promise(r => setTimeout(r, 100));
  
  // æ°´å¹³åè»¢ï¼ˆH ã‚­ãƒ¼ç›¸å½“ï¼‰
  if (layerMgr.transform) {
    layerMgr.transform.flipLayer(activeLayer, 'horizontal');
    await new Promise(r => setTimeout(r, 200));
  }
  
  console.log(`Transform after flip: scale=${activeLayer.scale.x}`);
  console.log('âœ… Test complete');
};
async Æ’ () {
  console.log('\n=== Flip in VMode Test ===\n');
  
  const layerMgr = window.layerManager;
  const activeLayer = layerMgr?.getActiveLayer?.();
  
  if (!activeLayer) {
    console.error('âŒ No aâ€¦
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
stopDrawing @ drawing-engine.js:296
handlePointerUp @ core-runtime.js:148
(anonymous) @ core-runtime.js:79
_notifyListeners @ EventBoundary.ts:1472
notifyTarget @ EventBoundary.ts:667
propagate @ EventBoundary.ts:302
dispatchEvent @ EventBoundary.ts:211
mapPointerUp @ EventBoundary.ts:977
mapEvent @ EventBoundary.ts:232
_onPointerUp @ EventSystem.ts:709
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
transform.onFlipRequest @ layer-system.js:143
(anonymous) @ layer-transform.js:700
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdated @ layer-transform.js:586
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10











wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

























wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ ui-panels.js:227
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
(anonymous) @ ui-panels.js:235
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
transform.onFlipRequest @ layer-system.js:143
(anonymous) @ layer-transform.js:711
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdated @ layer-transform.js:586
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

































































layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























































layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























































layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

































































layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
(anonymous) @ layer-system.js:747
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
transform.onFlipRequest @ layer-system.js:143
(anonymous) @ layer-transform.js:521
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdated @ layer-transform.js:586
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ layer-system.js:747
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ layer-system.js:747
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10















wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ layer-system.js:747
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ layer-system.js:747
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ layer-system.js:747
layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10



























wake @ gsap.min.js:10
Animation @ gsap.min.js:10
Tween @ gsap.min.js:10
delayedCall @ gsap.min.js:10
applyTransform @ layer-transform.js:169
flipLayer @ layer-transform.js:234
flipActiveLayer @ layer-system.js:299
(anonymous) @ layer-system.js:747
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
(anonymous) @ layer-system.js:751
layer-panel-renderer.js:53 [Panel] transform-updated: no layerIndex/layerId
(anonymous) @ layer-panel-renderer.js:53
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
flipActiveLayer @ layer-system.js:303
transform.onFlipRequest @ layer-system.js:143
(anonymous) @ layer-transform.js:517
layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:172
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdated @ layer-transform.js:586
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
_emitTransformUpdated @ layer-transform.js:605
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10































































layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

































































layer-panel-renderer.js:57 ðŸ”„ [Panel] Transform updated - layer 1, immediate=undefined
layer-panel-renderer.js:84 ðŸ“¸ [Panel] Thumbnail update request - immediate=undefined
animation-system.js:773 âš ï¸ ThumbnailSystem not available - cannot generate thumbnail
generateFrameThumbnail @ animation-system.js:773
generateFrameThumbnailOptimized @ animation-system.js:826
updateCurrentFrameThumbnail @ timeline-ui.js:226
(anonymous) @ timeline-ui.js:210
setTimeout
requestThumbnailUpdate @ timeline-ui.js:209
(anonymous) @ timeline-ui.js:197
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:627
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























































layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
(anonymous) @ layer-panel-renderer.js:102

(anonymous) @ layer-panel-renderer.js:100
(anonymous) @ event-bus.js:68
emit @ event-bus.js:66
_emitTransformUpdateImmediate @ layer-transform.js:633
(anonymous) @ layer-transform.js:600
setTimeout
_emitTransformUpdated @ layer-transform.js:599
(anonymous) @ layer-transform.js:170
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10





























































layer-panel-renderer.js:179 ðŸŽ¬ [Panel] Updating layer 1 thumbnail
layer-panel-renderer.js:381 [Panel] ThumbnailSystem not ready
updateLayerThumbnail @ layer-panel-renderer.js:381
_doUpdateLayerByIndexOrId @ layer-panel-renderer.js:180
(anonymous) @ layer-panel-renderer.js:167
_callback @ gsap.min.js:10
_renderZeroDurationTween @ gsap.min.js:10
render @ gsap.min.js:10
render @ gsap.min.js:10
oa @ gsap.min.js:10
updateRoot @ gsap.min.js:10

































































console.log('GSAP loaded:', typeof gsap);
console.log('GSAP version:', gsap?.version);
VM141:1 GSAP loaded: object
VM141:2 GSAP version: 3.13.0
undefined
// layer-panel-renderer ã®ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­çŠ¶æ³ã‚’ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆç¢ºèª
const events = window.TegakiEventBus.events || {};
const transformListeners = events['layer:transform-updated'] || [];
console.log('layer:transform-updated ãƒªã‚¹ãƒŠãƒ¼æ•°:', transformListeners.length);
console.log('ãƒªã‚¹ãƒŠãƒ¼:', transformListeners.map(l => l.name || 'anonymous'));
VM145:4 layer:transform-updated ãƒªã‚¹ãƒŠãƒ¼æ•°: 2
VM145:5 ãƒªã‚¹ãƒŠãƒ¼: (2)Â ['anonymous', 'anonymous']
undefined
window.TegakiDebug.phase4 = {};

window.TegakiDebug.phase4.traceSathumbnailUpdate = async function() {
  console.log('\n=== Thumbnail Update Trace ===\n');
  
  const layerMgr = window.layerManager;
  const activeLayer = layerMgr?.getActiveLayer?.();
  
  if (!activeLayer?.layerData) {
    console.error('âŒ No active layer');
    return;
  }
  
  console.log(`Layer: ${activeLayer.layerData.name}`);
  
  // Transformé©ç”¨å‰ã®ã‚µãƒ ãƒã‚¤ãƒ«
  console.log('1ï¸âƒ£ Generating thumbnail before transform...');
  const before = await window.ThumbnailSystem.generateLayerThumbnail(activeLayer, 64, 64);
  console.log(`   Before URL length: ${before?.toDataURL().length || 0}`);
  
  // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
  window.ThumbnailSystem._invalidateLayerCacheByLayerId(activeLayer.layerData.id);
  
  // Transformå¤‰æ›´ï¼ˆå›žè»¢30åº¦ï¼‰
  console.log('2ï¸âƒ£ Applying rotation (30Â°)...');
  if (layerMgr.transform) {
    const transform = layerMgr.transform.getTransform(activeLayer.layerData.id) || 
                     { x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1 };
    transform.rotation = Math.PI / 6;
    layerMgr.transform.applyTransform(activeLayer, transform, 400, 300);
    
    // GPUåæ˜ å¾…ã¡
    await new Promise(r => setTimeout(r, 100));
  }
  
  // Transformé©ç”¨å¾Œã®ã‚µãƒ ãƒã‚¤ãƒ«
  console.log('3ï¸âƒ£ Generating thumbnail after transform...');
  const after = await window.ThumbnailSystem.generateLayerThumbnail(activeLayer, 64, 64);
  console.log(`   After URL length: ${after?.toDataURL().length || 0}`);
  
  // æ¯”è¼ƒ
  if (before?.toDataURL() !== after?.toDataURL()) {
    console.log('âœ… Thumbnail changed (cache properly invalidated)');
  } else {
    console.log('âŒ Thumbnail unchanged (cache issue?)');
  }
};
async Æ’ () {
  console.log('\n=== Thumbnail Update Trace ===\n');
  
  const layerMgr = window.layerManager;
  const activeLayer = layerMgr?.getActiveLayer?.();
  
  if (!activeLayer?.layerData) {
    consolâ€¦
window.TegakiDebug.phase5 = {};

window.TegakiDebug.phase5.testTimelineThumbnailInit = async function() {
  console.log('\n=== Timeline Thumbnail Initial Generation ===\n');
  
  if (!window.animationSystem) {
    console.error('âŒ AnimationSystem not found');
    return;
  }
  
  const frameIndex = window.animationSystem.getCurrentFrameIndex?.();
  console.log(`Current frame: ${frameIndex}`);
  
  if (!window.timelineUI?.isVisible) {
    console.warn('âš ï¸ Timeline not visible');
  }
  
  // ãƒ•ãƒ¬ãƒ¼ãƒ ç›´å¾Œã®ã‚µãƒ ãƒã‚¤ãƒ«ç¢ºèª
  console.log('1ï¸âƒ£ Checking current frame thumbnail...');
  const frameData = window.animationSystem.getFrame?.(frameIndex);
  
  if (frameData?.thumbnail) {
    console.log('âœ… Frame thumbnail exists');
  } else {
    console.log('âŒ Frame thumbnail missing (generate triggered)');
    
    // ç”Ÿæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    if (window.ThumbnailSystem) {
      const layers = window.layerManager?.getLayers?.();
      if (layers) {
        console.log('2ï¸âƒ£ Generating frame thumbnail...');
        const frameThumbnail = await window.ThumbnailSystem.generateFrameThumbnail(
          frameData, 150, 150
        );
        console.log(`   Generated: ${!!frameThumbnail}`);
      }
    }
  }
};
async Æ’ () {
  console.log('\n=== Timeline Thumbnail Initial Generation ===\n');
  
  if (!window.animationSystem) {
    console.error('âŒ AnimationSystem not found');
    return;
  }
  
  const frameIndex = â€¦
