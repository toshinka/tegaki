<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ PixiJS v8.14 ãŠçµµã‹ããƒ„ãƒ¼ãƒ« - WebGL2 MSDFç‰ˆ</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- WebGL2 Canvas (webgpu-canvas IDã‚’æµç”¨) -->
    <canvas id="webgl2-canvas" width="1920" height="1080" style="position:absolute;top:0;left:0;pointer-events:auto;touch-action:none;z-index:10;display:block;"></canvas>
    
    <div id="app"></div>

    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@8.14.0/dist/pixi.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simplify-js@1.2.4/simplify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/upng-js/2.1.0/UPNG.js"></script>
    <script src="https://unpkg.com/earcut@2.2.4/dist/earcut.min.js"></script>
    <script src="libs/gsap.min.js"></script>
    <script src="libs/perfect-freehand-1.2.0.min.js"></script>

    <!-- Core Config -->
    <script src="config.js"></script>
    <script src="coordinate-system.js"></script>

    <!-- Event System -->
    <script src="system/event-bus.js"></script>
    
    <!-- Data Models -->
    <script src="system/data-models.js"></script>
    <script src="system/batch-api.js"></script>

    <!-- System -->
    <script src="system/popup-manager.js"></script>
    <script src="system/state-manager.js"></script>
    <script src="system/settings-manager.js"></script>
    <script src="system/camera-system.js"></script>
    <script src="system/layer-transform.js"></script>
    <script src="system/checker-utils.js"></script>
    <script src="system/layer-system.js"></script>
    <script src="system/drawing-clipboard.js"></script>
    <script src="system/history.js"></script>
    <script src="system/virtual-album.js"></script>
    <script src="system/animation-system.js"></script>

    <!-- WebGL2 Base -->
    <script src="system/drawing/webgl2/gl-texture-bridge.js"></script>
    <script src="system/drawing/webgl2/gl-msdf-pipeline.js"></script>
    <script src="system/drawing/webgl2/gl-stroke-processor.js"></script>
    <script src="system/drawing/webgl2/webgl2-drawing-layer.js"></script>
    <script src="system/drawing/webgl2/gl-mask-layer.js"></script>
    
    <!-- Earcut Triangulator (å…±é€š) -->
    <script src="system/drawing/earcut-triangulator.js"></script>

    <!-- Drawing System - Base -->
    <script src="system/drawing/pointer-handler.js"></script>
    <script src="system/drawing/pressure-handler.js"></script>

    <!-- Polygon Generator -->  
    <script src="system/drawing/stroke-recorder.js"></script>

    <!-- Drawing System - çµ±åˆ -->
    <script src="system/drawing/stroke-renderer.js"></script>
    <script src="system/drawing/thumbnail-system.js"></script>
    <script src="system/drawing/brush-settings.js"></script>
    <script src="system/drawing/stroke-transformer.js"></script>
    <script src="system/drawing/blend-modes.js"></script>
    <script src="system/processing/vector-operations.js"></script>
    <script src="system/drawing/brush-core.js"></script>
    <script src="system/drawing/fill-tool.js"></script>
    <script src="system/drawing/drawing-engine.js"></script>

    <!-- Export System -->
    <script src="system/quick-export-ui.js"></script>
    <script src="system/export-manager.js"></script>
    <script src="system/exporters/png-exporter.js"></script>
    <script src="system/exporters/webp-exporter.js"></script>
    <script src="system/exporters/psd-exporter.js"></script>
    <script src="system/exporters/apng-exporter.js"></script>
    <script src="system/exporters/webm-exporter.js"></script>
    <script src="system/exporters/mp4-exporter.js"></script>

    <!-- UI -->
    <script src="ui/dom-builder.js"></script>
    <script src="ui/slider-utils.js"></script>
    <script src="ui/keyboard-handler.js"></script>
    <script src="ui/resize-popup.js"></script>
    <script src="ui/layer-panel-renderer.js"></script>
    <script src="ui/status-display-renderer.js"></script>
    <script src="ui/timeline-thumbnail-utils.js"></script>
    <script src="ui/timeline-ui.js"></script>
    <script src="ui/album-popup.js"></script>
    <script src="ui/settings-popup.js"></script>
    <script src="ui/quick-access-popup.js"></script>
    <script src="ui/export-popup.js"></script>
    <script src="ui/ui-panels.js"></script>

    <!-- Core -->
    <script src="core-runtime.js"></script>
    <script src="core-engine.js"></script>
    <script src="core-initializer.js"></script>

    <script>
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                console.log('ğŸš€ WebGL2 MSDFç‰ˆ èµ·å‹•ä¸­...');
                await window.CoreInitializer.initialize();
                console.log('âœ… WebGL2åˆæœŸåŒ–å®Œäº†');
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–å¤±æ•—:', error);
            }
        });
    </script>
</body>
</html>