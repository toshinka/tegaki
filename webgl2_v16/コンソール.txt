config.js:509 âœ… config.js v8.14.3 Phase 1.7 ç­†åœ§å¯¾å¿œç‰ˆ loaded
config.js:510    ğŸ”§ thinning: 0.7 (ç­†åœ§ã«ã‚ˆã‚‹å¤ªã•å¤‰åŒ–æœ‰åŠ¹)
config.js:511    ğŸ”§ smoothing: 0.4 (é©åº¦ãªè£œé–“)
config.js:512    ğŸ”§ streamline: 0.3 (å®‰å®šåŒ–)
data-models.js:276 âœ… data-models.js (backgroundColorè¿½åŠ ç‰ˆ) loaded
batch-api.js:382 âœ… batch-api.js (Phase 6: Historyçµ±åˆç‰ˆ) loaded
popup-manager.js:357 âœ… popup-manager.js (quick-accessé™¤å¤–å¯¾å¿œç‰ˆ) loaded
state-manager.js:669 âœ… state-manager.js (Phase 8å®Œå…¨å®Ÿè£…ç‰ˆ) loaded
 âœ… settings-manager.js Phase 2 loaded
    ğŸ”§ exportResolution è¨­å®šé …ç›®è¿½åŠ 
 âœ… layer-transform.js Phase 6 loaded
    ğŸ”§ flipLayer(): confirmTransform()å‰Šé™¤ - åè»¢æ™‚ã®ç”»åƒæ¶ˆå¤±ã‚’è§£æ±º
 âœ… system/checker-utils.js çµ±ä¸€å®Ÿè£…ç‰ˆ loaded
 âœ… layer-system.js Phase 8å®Œæˆç‰ˆ loaded
    âœ… getLayerById() ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
    âœ… LayerModel.id ç¢ºå®Ÿå–å¾—ä¿è¨¼
    âœ… history.js ã¨ã®çµ±åˆå¯¾å¿œå®Œäº†
 âœ… drawing-clipboard.js Phase 1 loaded
    ğŸ”§ cutActiveLayer(): æç”»ã®ã¿å‰Šé™¤ï¼ˆãƒ¬ã‚¤ãƒ¤ãƒ¼ä¿æŒï¼‰
    ğŸ¨ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—: ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚³ãƒ”ãƒ¼ã€åˆ‡ã‚Šå–ã‚Š
 âœ… history.js Phase 4 mask snapshotå¯¾å¿œå®Œå…¨ç‰ˆ loaded
    âœ… pushEraseMask() å®Ÿè£…
    âœ… beginAction/endAction/addPoint å®Ÿè£…
 âœ… webgl2-drawing-layer.js Phase 1 loaded
 [GLStrokeProcessor] âœ… Singleton instance created
 [GLMSDFPipeline] âœ… Phase 1.8 Rollbackä¿®æ­£ç‰ˆ loaded
    âš ï¸ Phase 1.7ã®éå‰°ä¿®æ­£ã‚’å–ã‚Šæ¶ˆã—
    âœ… aPosition: [0, bounds.width/height] â†’ uResolutionã§æ­£è¦åŒ–
 âœ… gl-texture-bridge.js Phase 5å®Œå…¨ç‰ˆ (PixiJS v8å¯¾å¿œ) loaded
    âœ… WebGLTexture â†’ PIXI.Spriteå¤‰æ›å®Ÿè£…å®Œäº†
    âœ… PixiJS v8: Texture.from()ç›´æ¥ä½¿ç”¨ï¼ˆå®šæ•°å•é¡Œè§£æ±ºï¼‰
    âœ… WebGPUäº’æ›API (createSpriteFromGPUTexture) å¯¾å¿œ
 âœ… gl-mask-layer.js Phase 6å®Œå…¨ç‰ˆ loaded
    âœ… Circle mask renderingå®Ÿè£…
    âœ… Additive blendå¯¾å¿œ
    âœ… Compose Passçµ±åˆæº–å‚™å®Œäº†
 âœ… pointer-handler.js Phase 1 loaded
    ğŸ”§ pressureæ­£è¦åŒ–ä¿®æ­£ï¼ˆãƒã‚¦ã‚¹=0, ãƒšãƒ³=e.pressureï¼‰
    ğŸ”§ EventEmitteré¢¨APIå®Ÿè£…ï¼ˆ.on / .offï¼‰
 âœ… pressure-handler.js Phase 1 loaded
    ğŸ”§ ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æœªç¢ºå®šæ™‚ã«rawå€¤è¿”å´ï¼ˆ0.5å›ºå®šå‰Šé™¤ï¼‰
 âœ… stroke-recorder.js Phase 0 loaded
    âœ“ è‡ªå‹•åˆæœŸåŒ–å®Œäº†ï¼ˆinitialize()ä¸è¦ï¼‰
    âœ“ Localåº§æ¨™è¨˜éŒ²å°‚ç”¨ï¼ˆåº§æ¨™å¤‰æ›ãªã—ï¼‰
    âœ“ PerfectFreehandäº’æ›å½¢å¼å¯¾å¿œ
 âœ… stroke-renderer.js (WebGL2ç§»è¡Œç‰ˆ) loaded
    ğŸ”§ WebGPU â†’ WebGL2 å‚ç…§å¤‰æ›´å®Œäº†
 âœ… thumbnail-system.js (v1.1: çµ±ä¸€ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”å¯¾å¿œ) loaded
 âœ… brush-settings.js (Phase 3-D Clean) loaded
 âœ… BlendMode definitions loaded
 âœ… vector-operations.js Phase 1å®Œå…¨ç‰ˆ loaded
    âœ“ window.VectorOperations.generateStrokePolygon(points, size)
    âœ“ config.js perfectFreehandè¨­å®šè‡ªå‹•é©ç”¨
    ğŸ”¥ PerfectFreehandçµ±åˆåŸºç›¤å®Œæˆ
 âœ… brush-core.js Phase 2.2 åº§æ¨™ã‚ºãƒ¬å®Œå…¨ä¿®æ­£ç‰ˆ loaded
brush-core.js:740    âœ… Spriteã‚¹ã‚±ãƒ¼ãƒ«ä¿®æ­£: 512å›ºå®š â†’ bounds.width/height
brush-core.js:741    âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼é€æ˜åº¦: å®Ÿéš›ã®å€¤ã«ä¿®æ­£
brush-core.js:742    âœ… ãƒ†ã‚¯ã‚¹ãƒãƒ£å†åˆ©ç”¨ç¶­æŒ
fill-tool.js:269 âœ… fill-tool.js (WebGPUç«¶åˆä¿®æ­£ç‰ˆ) loaded
fill-tool.js:270    âŒ ç‹¬è‡ªWebGPUåˆæœŸåŒ–ã‚’å‰Šé™¤
fill-tool.js:271    âœ… æ—¢å­˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å‚ç…§ã®ã¿
quick-export-ui.js:292 âœ… quick-export-ui.js (ç„¡åŠ¹åŒ–ç‰ˆ) loaded
export-manager.js:531 âœ… export-manager.js v8.33.0 loaded
export-manager.js:532    ğŸ”§ PNGâ†’APNGç¶­æŒ / WEBPâ†’WebMè‡ªå‹•åˆ‡æ›¿å¯¾å¿œ
png-exporter.js:255 âœ… png-exporter.js v8.29.0 loaded
png-exporter.js:256    ğŸ”§ generatePreview()ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
png-exporter.js:257    ğŸ”§ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
png-exporter.js:258    ğŸ”§ Blobç”Ÿæˆã®ç¢ºå®Ÿæ€§å‘ä¸Š
webp-exporter.js:249 âœ… webp-exporter.js v8.33.0 loaded (é™æ­¢ç”»WEBPå°‚ç”¨)
webp-exporter.js:250    âš ï¸ è¤‡æ•°ãƒ•ãƒ¬ãƒ¼ãƒ æ™‚ã¯WebMæ¨å¥¨ï¼ˆã‚¢ãƒ«ãƒ•ã‚¡å€¤ç¶­æŒãƒ»è»½é‡ï¼‰
psd-exporter.js:170 âœ… psd-exporter.js v8.18.0 loaded (Phase 5: ãƒœã‚¿ãƒ³é…ç½®ç”¨)
psd-exporter.js:171    âš ï¸ å®Ÿè£…ã¯å°†æ¥ãƒ•ã‚§ãƒ¼ã‚ºã§è¿½åŠ äºˆå®š
psd-exporter.js:172    âœ“ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§é–‹ç™ºä¸­ã‚’é€šçŸ¥
apng-exporter.js:281 âœ… apng-exporter.js v8.31.0 loaded
mp4-exporter.js:30 âœ… mp4-exporter.js (Phase 8å®Œæˆç‰ˆ) loaded
dom-builder.js:527 âœ… dom-builder.js v8.19.0 loaded
dom-builder.js:528    ğŸ”§ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³: PNG/WEBP/PSDï¼ˆGIF/PDFå‰Šé™¤ï¼‰
dom-builder.js:529    âœ“ Systemæƒ…å ±è¡¨ç¤ºï¼ˆWebGPU/GPUæ¤œå‡ºï¼‰
slider-utils.js:265 âœ… slider-utils.js v8.14.0 loaded
slider-utils.js:266    ğŸ”§ PointerEventé…ä¿¡å•é¡Œä¿®æ­£å®Œäº†
keyboard-handler.js:486 âœ… keyboard-handler.js Phase 6å®Œæˆç‰ˆ loaded
keyboard-handler.js:487    âœ… BS/DEL: æç”»å‰Šé™¤ãŒæ­£å¸¸å‹•ä½œ
keyboard-handler.js:488    âœ… Undo/Redo: childrenå‚ç…§ä¿æŒã§å®Œå…¨å¾©å…ƒ
keyboard-handler.js:489    ğŸ”§ åè»¢å‡¦ç†: ç”»åƒæ¶ˆå¤±å•é¡Œè§£æ±º
layer-panel-renderer.js:663 âœ… layer-panel-renderer.js (Phase 5+6å¯¾å¿œç‰ˆ) loaded
layer-panel-renderer.js:664    âœ“ layer:panel-update-requested ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¿½åŠ 
layer-panel-renderer.js:665    âœ“ LayerSystemã‹ã‚‰ã®ç›´æ¥å‘¼ã³å‡ºã—å®Œå…¨æ’é™¤
status-display-renderer.js:317 âœ… ui/status-display-renderer.js å®Œå…¨æ”¹ä¿®ç‰ˆ loaded
timeline-thumbnail-utils.js:258 âœ… ui/timeline-thumbnail-utils.js (Phase 3å®Œå…¨ç‰ˆ) loaded
timeline-thumbnail-utils.js:259    âœ“ Phase 1: layer:transform-updated è³¼èª­è¿½åŠ 
timeline-thumbnail-utils.js:260    âœ“ Phase 3: throttleæœ€é©åŒ–ï¼ˆ100msï¼‰
timeline-thumbnail-utils.js:261    âœ“ Phase 3: immediate ãƒ•ãƒ©ã‚°å¯¾å¿œ
timeline-thumbnail-utils.js:262    âœ“ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚µãƒ ãƒã‚¤ãƒ«ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢ã«å³åº§è¿½å¾“
timeline-ui.js:981 âœ… timeline-ui.js (Phase 4å®Œäº†: ãƒ¬ã‚¤ãƒ¤ãƒ¼å¤‰å½¢é€£æºç‰ˆ) loaded
album-popup.js:473 âœ… album-popup.js (FRAMEæ”¹ä¿®ç‰ˆ) loaded
settings-popup.js:649 âœ… settings-popup.js Phase 1 loaded
settings-popup.js:650    ğŸ”§ ui:open-settings ãƒªã‚¹ãƒŠãƒ¼è¿½åŠ ï¼ˆCtrl+, å¯¾å¿œï¼‰
quick-access-popup.js:740 âœ… quick-access-popup.js v8.13.17 loaded
export-popup.js:557 âœ… export-popup.js v8.29.0 loaded
export-popup.js:558    ğŸ”§ PNGâ†’APNGç¶­æŒ / WEBPâ†’WebMè‡ªå‹•åˆ‡æ›¿UIå¯¾å¿œ
ui-panels.js:420 âœ… ui-panels.js v8.13.15 loaded
ui-panels.js:421    ğŸ¨ ã‚µã‚¤ãƒ‰ãƒãƒ¼è»½é‡ãƒ‡ã‚¶ã‚¤ãƒ³: ã‚ªãƒ¬ãƒ³ã‚¸æ ã®ã¿
ui-panels.js:422    ğŸ¯ SVGè‰²çµ±ä¸€: å¸¸ã«var(--futaba-maroon)
core-runtime.js:578 âœ… core-runtime.js (Phase 5 - UIä¾‹å¤–ä¿®æ­£ç‰ˆ) loaded
core-engine.js:767 âœ… core-engine.js Phase 4-Cå®Œå…¨ç‰ˆ loaded
core-engine.js:768    ğŸ”§ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼çµ±åˆå®Œäº†
core-engine.js:769    ğŸ”§ Master Loop: pointer â†’ preview â†’ render
index.html:111 ğŸš€ WebGL2 MSDFç‰ˆ èµ·å‹•ä¸­...
drawing-engine.js:477 [DrawingEngine] BrushCore not available
setBrushSettings @ drawing-engine.js:477
CoreEngine @ core-engine.js:163
initialize @ core-initializer.js:298
await in initialize
initialize @ core-initializer.js:502
ï¼ˆåŒ¿åï¼‰ @ index.html:112
popup-manager.js:16 âœ… PopupManager initialized
popup-manager.js:42 ğŸ“‹ Popup "settings" registered (priority: 1)
popup-manager.js:42 ğŸ“‹ Popup "quickAccess" registered (priority: 2)
popup-manager.js:42 ğŸ“‹ Popup "album" registered (priority: 3)
popup-manager.js:42 ğŸ“‹ Popup "resize" registered (priority: 4)
popup-manager.js:102 ğŸ”§ Initializing all popups...
popup-manager.js:87 âœ… Popup "settings" initialized successfully
popup-manager.js:87 âœ… Popup "quickAccess" initialized successfully
popup-manager.js:87 âœ… Popup "album" initialized successfully
popup-manager.js:87 âœ… Popup "resize" initialized successfully
popup-manager.js:118 ğŸ“Š Popup initialization: 4 ready, 0 deferred
webgl2-drawing-layer.js:87 [WebGL2DrawingLayer] âœ… Initialized {maxTextureSize: 16384, extensions: Array(3)}
core-initializer.js:187 [WebGL2] Drawing Layer initialized
gl-stroke-processor.js:48 [GLStrokeProcessor] âœ… Initialized (Phase 1.6)
core-initializer.js:196 [WebGL2] GLStrokeProcessor initialized
gl-msdf-pipeline.js:66 [GLMSDFPipeline] âœ… Initialized (Phase 1.8)
core-initializer.js:201 [WebGL2] GLMSDFPipeline initialized
gl-texture-bridge.js:51 [GLTextureBridge] âœ… Initialized (PixiJS v8)
core-initializer.js:209 [WebGL2] GLTextureBridge initialized
gl-mask-layer.js:82 [GLMaskLayer] âœ… Initialized {width: 400, height: 400}
core-initializer.js:221 [WebGL2] GLMaskLayer initialized
stroke-renderer.js:76 [StrokeRenderer] âœ… Initialized (WebGL2 mode)
core-initializer.js:236 [WebGL2] StrokeRenderer initialized
core-initializer.js:238 [WebGL2] âœ… Phase 6 initialization complete
core-initializer.js:345 [App] Re-initializing BrushCore with WebGL2 components
core-initializer.js:356 [App] âœ… BrushCore re-initialized with WebGL2 (Phase 6)
index.html:113 âœ… WebGL2åˆæœŸåŒ–å®Œäº†
popup-manager.js:42 ğŸ“‹ Popup "export" registered (priority: 5)
popup-manager.js:87 âœ… Popup "export" initialized successfully
// CoordinateSystemåˆæœŸåŒ–ï¼ˆDrawingEngineåˆæœŸåŒ–ã®å‰ã«å®Ÿè¡Œï¼‰
if (window.CoordinateSystem && !window.CoordinateSystem.initialized) {
  const pixiApp = this.cameraSystem?.app || window.cameraSystem?.app;
  const eventBus = this.eventBus || window.cameraSystem?.eventBus;
  const glCanvas = this.glCanvas || document.getElementById('webgpu-canvas');
  const worldContainer = this.cameraSystem?.worldContainer || window.cameraSystem?.worldContainer;
  
  if (worldContainer && !window.worldContainer) {
    window.worldContainer = worldContainer;
  }
  
  if (pixiApp && eventBus && glCanvas) {
    window.CoordinateSystem.initialize(glCanvas, pixiApp, eventBus);
    console.log('[CoreInitializer] CoordinateSystem initialized');
  } else {
    console.error('[CoreInitializer] Cannot initialize CoordinateSystem - missing dependencies');
  }
}
coordinate-system.js:69 [CoordinateSystem] Initialized {canvasSize: {â€¦}, worldContainer: 'worldContainer'}canvasSize: height: 1080width: 1920[[Prototype]]: Objectconstructor: Æ’ Object()hasOwnProperty: Æ’ hasOwnProperty()isPrototypeOf: Æ’ isPrototypeOf()propertyIsEnumerable: Æ’ propertyIsEnumerable()toLocaleString: Æ’ toLocaleString()toString: Æ’ toString()valueOf: Æ’ valueOf()__defineGetter__: Æ’ __defineGetter__()__defineSetter__: Æ’ __defineSetter__()__lookupGetter__: Æ’ __lookupGetter__()__lookupSetter__: Æ’ __lookupSetter__()__proto__: (...)get __proto__: Æ’ __proto__()set __proto__: Æ’ __proto__()worldContainer: "worldContainer"[[Prototype]]: Object
VM884:14 [CoreInitializer] CoordinateSystem initialized
undefined
// ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
TegakiDebug.coord.enableDebug();

// åº§æ¨™å¤‰æ›ãƒ•ãƒ«ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
TegakiDebug.coord.testFullPipeline(500, 300);

// DrawingEngineçŠ¶æ…‹ç¢ºèª
TegakiDebug.drawing?.inspectEngine();
coordinate-system.js:455 [CoordinateSystem] Debug mode: true
coordinate-system.js:462 [CoordinateSystem] Full Pipeline Test
coordinate-system.js:464 Input (Screen): {clientX: 500, clientY: 300}
coordinate-system.js:183 [screenClientToCanvas] {input: {â€¦}, rect: {â€¦}, scale: {â€¦}, output: {â€¦}}
coordinate-system.js:467 Step 1 (Canvas): {canvasX: 500, canvasY: 300}
Container.ts:1734 Uncaught TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:209:20)
    at CoordinateSystem.testFullPipeline (coordinate-system.js:474:24)
    at Object.testFullPipeline (coordinate-system.js:554:57)
    at <anonymous>:5:19
updateTransform @ Container.ts:1734
canvasToWorld @ coordinate-system.js:209
testFullPipeline @ coordinate-system.js:474
testFullPipeline @ coordinate-system.js:554
ï¼ˆåŒ¿åï¼‰ @ VM891:5
// ============================================================================
// worldContainer å•é¡Œè¨ºæ–­ã¨ä¿®æ­£
// ============================================================================

console.group('ğŸ” worldContainer Diagnostic');

const worldContainer = window.worldContainer || window.cameraSystem?.worldContainer;

if (!worldContainer) {
  console.error('âŒ worldContainer not found');
  console.groupEnd();
} else {
  console.log('âœ… worldContainer found:', worldContainer.label || worldContainer.name);
  
  // 1. è¦ªãƒã‚§ãƒ¼ãƒ³ç¢ºèª
  console.group('1ï¸âƒ£ Parent Chain');
  let node = worldContainer;
  let depth = 0;
  const chain = [];
  
  while (node && depth < 10) {
    chain.push({
      depth,
      label: node.label || node.name || 'unnamed',
      type: node.constructor.name,
      hasParent: !!node.parent,
      position: node.position ? { x: node.position.x, y: node.position.y } : 'undefined',
      destroyed: node.destroyed
    });
    node = node.parent;
    depth++;
  }
  
  console.table(chain);
  console.groupEnd();
  
  // 2. Transform ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¢ºèª
  console.group('2ï¸âƒ£ Transform Properties');
  console.log('position:', worldContainer.position);
  console.log('scale:', worldContainer.scale);
  console.log('rotation:', worldContainer.rotation);
  console.log('pivot:', worldContainer.pivot);
  console.log('worldTransform:', worldContainer.worldTransform);
  console.log('parent:', worldContainer.parent);
  console.groupEnd();
  
  // 3. è¦ªãŒ stage ã‹ã©ã†ã‹ç¢ºèª
  console.group('3ï¸âƒ£ Parent Analysis');
  const parent = worldContainer.parent;
  if (!parent) {
    console.warn('âš ï¸ worldContainer has no parent');
    console.log('Expected: worldContainer should be child of pixiApp.stage');
  } else {
    console.log('Parent:', {
      label: parent.label || parent.name || 'unnamed',
      type: parent.constructor.name,
      isStage: parent.label === 'stage' || parent.isRootNode
    });
  }
  console.groupEnd();
  
  // 4. ä¿®æ­£: position ãŒ undefined ã®å ´åˆã«åˆæœŸåŒ–
  console.group('4ï¸âƒ£ Fix Attempt');
  
  let fixed = false;
  
  if (!worldContainer.position || worldContainer.position.x === undefined) {
    console.warn('âš ï¸ worldContainer.position is undefined - initializing');
    worldContainer.position = { x: 0, y: 0 };
    fixed = true;
  }
  
  if (!worldContainer.scale || worldContainer.scale.x === undefined) {
    console.warn('âš ï¸ worldContainer.scale is undefined - initializing');
    worldContainer.scale = { x: 1, y: 1 };
    fixed = true;
  }
  
  if (!worldContainer.pivot || worldContainer.pivot.x === undefined) {
    console.warn('âš ï¸ worldContainer.pivot is undefined - initializing');
    worldContainer.pivot = { x: 0, y: 0 };
    fixed = true;
  }
  
  if (worldContainer.rotation === undefined) {
    console.warn('âš ï¸ worldContainer.rotation is undefined - initializing');
    worldContainer.rotation = 0;
    fixed = true;
  }
  
  // è¦ªãƒã‚§ãƒ¼ãƒ³ã‚‚ç¢ºèª
  node = worldContainer.parent;
  depth = 0;
  while (node && depth < 10) {
    if (!node.position || node.position.x === undefined) {
      console.warn(`âš ï¸ Parent[${depth}] (${node.label || 'unnamed'}).position is undefined - initializing`);
      node.position = { x: 0, y: 0 };
      fixed = true;
    }
    if (!node.scale || node.scale.x === undefined) {
      console.warn(`âš ï¸ Parent[${depth}] (${node.label || 'unnamed'}).scale is undefined - initializing`);
      node.scale = { x: 1, y: 1 };
      fixed = true;
    }
    node = node.parent;
    depth++;
  }
  
  if (fixed) {
    console.log('âœ… Fixed undefined transform properties');
  } else {
    console.log('âœ… All transform properties are valid');
  }
  
  console.groupEnd();
  
  // 5. updateTransform() ãƒ†ã‚¹ãƒˆ
  console.group('5ï¸âƒ£ updateTransform() Test');
  
  try {
    worldContainer.updateTransform();
    console.log('âœ… updateTransform() succeeded');
    console.log('worldTransform:', {
      a: worldContainer.worldTransform.a,
      b: worldContainer.worldTransform.b,
      c: worldContainer.worldTransform.c,
      d: worldContainer.worldTransform.d,
      tx: worldContainer.worldTransform.tx,
      ty: worldContainer.worldTransform.ty
    });
  } catch (error) {
    console.error('âŒ updateTransform() failed:', error);
    console.log('Error details:', {
      message: error.message,
      stack: error.stack
    });
  }
  
  console.groupEnd();
}

console.groupEnd();

// 6. ä¿®æ­£å¾Œã« CoordinateSystem ã® canvasToWorld ã‚’å†ãƒ†ã‚¹ãƒˆ
console.group('ğŸ”§ Retry Coordinate Transform');

try {
  const testResult = window.CoordinateSystem?.canvasToWorld(500, 300);
  if (testResult) {
    console.log('âœ… canvasToWorld succeeded:', testResult);
  } else {
    console.error('âŒ canvasToWorld returned null');
  }
} catch (error) {
  console.error('âŒ canvasToWorld failed:', error);
}

console.groupEnd();

// 7. å®Œå…¨ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
console.group('ğŸ§ª Full Pipeline Retry');

try {
  window.TegakiDebug?.coord?.testFullPipeline(500, 300);
} catch (error) {
  console.error('âŒ Full pipeline test failed:', error);
}

console.groupEnd();
VM900:5 ğŸ” worldContainer Diagnostic
VM900:13 âœ… worldContainer found: worldContainer
VM900:16 1ï¸âƒ£ Parent Chain
VM900:34 ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰depthlabeltypehasParentpositiondestroyedï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰depthlabeltypehasParentpositiondestroyed00'worldContainer''Z'true{â€¦}false11'unnamed''Z'false{â€¦}falseArray(2)
VM900:38 2ï¸âƒ£ Transform Properties
VM900:39 position: qÂ {_x: 200, _y: 100, _observer: Z}
VM900:40 scale: qÂ {_x: 1, _y: 1, _observer: Z}
VM900:41 rotation: 0
VM900:42 pivot: qÂ {_x: 0, _y: 0, _observer: Z}
VM900:43 worldTransform: MÂ {array: null, a: 1, b: 0, c: 0, d: 1,Â â€¦}
VM900:44 parent: ZÂ {_events: i, _eventsCount: 0, uid: 1, _updateFlags: 15, renderGroup: Ri,Â â€¦}
VM900:48 3ï¸âƒ£ Parent Analysis
VM900:54 Parent: {label: 'unnamed', type: 'Z', isStage: undefined}
VM900:63 4ï¸âƒ£ Fix Attempt
VM900:112 âœ… All transform properties are valid
VM900:118 5ï¸âƒ£ updateTransform() Test
VM900:132 âŒ updateTransform() failed: TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at <anonymous>:121:20
ï¼ˆåŒ¿åï¼‰ @ VM900:132
VM900:133 Error details: {message: "Cannot read properties of undefined (reading 'x')", stack: 'TypeError: Cannot read properties of undefined (reâ€¦st/pixi.min.js:7:72144)\n    at <anonymous>:121:20'}
VM900:145 ğŸ”§ Retry Coordinate Transform
VM900:155 âŒ canvasToWorld failed: TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:209:20)
    at <anonymous>:148:47
ï¼ˆåŒ¿åï¼‰ @ VM900:155
VM900:161 ğŸ§ª Full Pipeline Retry
coordinate-system.js:462 [CoordinateSystem] Full Pipeline Test
coordinate-system.js:464 Input (Screen): {clientX: 500, clientY: 300}
coordinate-system.js:183 [screenClientToCanvas] {input: {â€¦}, rect: {â€¦}, scale: {â€¦}, output: {â€¦}}
coordinate-system.js:467 Step 1 (Canvas): {canvasX: 500, canvasY: 300}
VM900:166 âŒ Full pipeline test failed: TypeError: Cannot read properties of undefined (reading 'x')
    at Z.updateTransform (Container.ts:1734:25)
    at CoordinateSystem.canvasToWorld (coordinate-system.js:209:20)
    at CoordinateSystem.testFullPipeline (coordinate-system.js:474:24)
    at Object.testFullPipeline (coordinate-system.js:554:57)
    at <anonymous>:164:30
ï¼ˆåŒ¿åï¼‰ @ VM900:166
undefined
