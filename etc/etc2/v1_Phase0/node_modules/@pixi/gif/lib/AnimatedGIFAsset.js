'use strict';

var core = require('@pixi/core');
var AnimatedGIF = require('./AnimatedGIF.js');

const AnimatedGIFAsset = {
  extension: core.ExtensionType.Asset,
  detection: {
    test: async () => true,
    add: async (formats) => [...formats, "gif"],
    remove: async (formats) => formats.filter((format) => format !== "gif")
  },
  loader: {
    test: (url) => core.utils.path.extname(url) === ".gif",
    load: async (url, asset) => {
      const response = await core.settings.ADAPTER.fetch(url);
      const buffer = await response.arrayBuffer();
      return AnimatedGIF.AnimatedGIF.fromBuffer(buffer, asset?.data);
    },
    unload: async (asset) => {
      asset.destroy();
    }
  }
};
core.extensions.add(AnimatedGIFAsset);

exports.AnimatedGIFAsset = AnimatedGIFAsset;
//# sourceMappingURL=AnimatedGIFAsset.js.map
